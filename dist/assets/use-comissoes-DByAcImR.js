import{r as c,a8 as d,a9 as u}from"./index-cNRh_qft.js";function x(){const[E,i]=c.useState([]),[f,m]=c.useState(!1),[w,n]=c.useState(null),l=c.useCallback(async()=>{var r,t,a;try{m(!0),n(null);const s=await d.get(`${u.comissao.list}?real_estate_id=68b1df705757655b21fc5210`);if(s.data.success){const o=s.data.data.data||[];i(o)}else i([])}catch(e){((r=e.response)==null?void 0:r.status)!==401&&(console.error("Erro ao buscar comissões:",e),n(((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Erro ao buscar comissões")),i([])}finally{m(!1)}},[]),C=c.useCallback(async r=>{var t,a;try{n(null);const e=await d.post(u.comissao.create,r);if(e.data.success){const s=e.data.data;return i(o=>[...o,s]),s}throw new Error(e.data.message||"Erro ao criar comissão")}catch(e){const s=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Erro ao criar comissão";throw n(s),new Error(s)}},[]),g=c.useCallback(async(r,t)=>{var a,e;try{n(null);const s=await d.put(u.comissao.update.replace(":id",r),t);if(s.data.success){const o=s.data.data;return i(y=>y.map(p=>p.id===r?o:p)),o}throw new Error(s.data.message||"Erro ao atualizar comissão")}catch(s){const o=((e=(a=s.response)==null?void 0:a.data)==null?void 0:e.message)||"Erro ao atualizar comissão";throw n(o),new Error(o)}},[]),h=c.useCallback(async r=>{var t,a;try{n(null);const e=await d.delete(u.comissao.delete.replace(":id",r));if(e.data.success)i(s=>s.filter(o=>o.id!==r));else throw new Error(e.data.message||"Erro ao deletar comissão")}catch(e){const s=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Erro ao deletar comissão";throw n(s),new Error(s)}},[]),b=c.useCallback(()=>{l()},[l]);return c.useEffect(()=>{l()},[l]),{comissoes:E,loading:f,error:w,refetch:b,createComissao:C,updateComissao:g,deleteComissao:h}}export{x as u};
