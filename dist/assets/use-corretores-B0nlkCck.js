import{r as o,a8 as p,a9 as C}from"./index-cNRh_qft.js";function $(){const[f,u]=o.useState([]),[i,n]=o.useState(!1),[h,l]=o.useState(null),d=o.useCallback(async()=>{var t,a,s;try{n(!0),l(null);const r=await p.get(`${C.corretor.list}?real_estate_id=68b1df705757655b21fc5210`);if(r.data.success){const c=r.data.data.data||[];u(c)}else u([])}catch(e){((t=e.response)==null?void 0:t.status)!==401?(console.error("Erro ao buscar corretores:",e),l(((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||"Erro ao buscar corretores")):u([])}finally{n(!1)}},[]),E=o.useCallback(async t=>{var a,s;try{n(!0),l(null);const e=await p.post(C.corretor.create,t);if(e.data.success){const r=e.data.data.corretor||e.data.data;return u(c=>[r,...c]),r}throw new Error("Erro ao criar corretor")}catch(e){console.error("Erro ao criar corretor:",e);const r=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||"Erro ao criar corretor";throw l(r),new Error(r)}finally{n(!1)}},[]),w=o.useCallback(async(t,a)=>{var s,e;try{n(!0),l(null);const r=await p.put(`${C.corretor.update}/${t}`,a);if(r.data.success){const c=r.data.data.corretor||r.data.data;return u(b=>b.map(g=>g.id===t?c:g)),c}throw new Error("Erro ao atualizar corretor")}catch(r){console.error("Erro ao atualizar corretor:",r);const c=((e=(s=r.response)==null?void 0:s.data)==null?void 0:e.message)||"Erro ao atualizar corretor";throw l(c),new Error(c)}finally{n(!1)}},[]),y=o.useCallback(async t=>{var a,s;try{n(!0),l(null),(await p.delete(`${C.corretor.delete}/${t}`)).data.success&&u(r=>r.filter(c=>c.id!==t))}catch(e){console.error("Erro ao deletar corretor:",e);const r=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||"Erro ao deletar corretor";throw l(r),new Error(r)}finally{n(!1)}},[]);return o.useEffect(()=>{d()},[d]),{corretores:f,loading:i,error:h,refetch:d,createCorretor:E,updateCorretor:w,deleteCorretor:y}}function S(f){const[u,i]=o.useState(null),[n,h]=o.useState(!1),[l,d]=o.useState(null),E=o.useCallback(async()=>{var w,y;if(f)try{h(!0),d(null);const t=await p.get(`${C.corretor.details}/${f}`);if(t.data.success){const a=t.data.data.corretor||t.data.data;i(a)}else i(null)}catch(t){console.error("Erro ao buscar corretor:",t),d(((y=(w=t.response)==null?void 0:w.data)==null?void 0:y.message)||"Erro ao buscar corretor"),i(null)}finally{h(!1)}},[f]);return o.useEffect(()=>{E()},[E]),{corretor:u,loading:n,error:l,refetch:E}}export{S as a,$ as u};
