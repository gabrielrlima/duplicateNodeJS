import{b0 as k,j as e,B as l,f as P,R as m,I as i,a_ as b,a1 as v,N as p,b1 as w,b2 as I,b3 as y,r as f,cV as j,p as x,c as B,T as u,S as E,bc as L,bq as $,bf as A,br as D,A as S,bV as T,D as F,H as G,C as H}from"./index-cNRh_qft.js";import{u as M}from"./use-params-DYuE92tD.js";import{a as O}from"./blog-d3h8vqZY.js";import{P as W,a as N}from"./post-comment-form-DiKPA8X4.js";import{a as U}from"./_blog-C6iFTPs4.js";import{M as R}from"./markdown-sdGgeBYa.js";import{E as V}from"./empty-content-BzM3Az2z.js";import{a as _}from"./post-skeleton-DmyewOCQ.js";import{P as z}from"./post-comment-list-CskaFO5r.js";import{A as q}from"./AvatarGroup-B32XWlKs.js";import"./html-to-markdown-wPkGdeP1.js";import"./index-ChnT1xRF.js";import"./index-BDJJM9HW.js";import"./schema-helper-D18en8Wv.js";import"./Zoom-BvRwL0eJ.js";import"./Fab-Dt3-pcZY.js";import"./Card-C_-31fGp.js";import"./CardHeader-CZZHKPlX.js";import"./Skeleton-XGh2Uz0E.js";import"./Pagination-tgO33XKK.js";import"./LastPage-ChYIEhQh.js";function J({sx:a,publish:s,backHref:n,editHref:o,liveHref:c,publishOptions:h,onChangePublish:r,...g}){const d=k(),C=()=>e.jsx(w,{open:d.open,anchorEl:d.anchorEl,onClose:d.onClose,slotProps:{arrow:{placement:"top-right"}},children:e.jsx(I,{children:h.map(t=>e.jsxs(y,{selected:t.value===s,onClick:()=>{d.onClose(),r(t.value)},children:[t.value==="published"&&e.jsx(i,{icon:"eva:cloud-upload-fill"}),t.value==="draft"&&e.jsx(i,{icon:"solar:file-text-bold"}),t.label]},t.value))})});return e.jsxs(e.Fragment,{children:[e.jsxs(l,{sx:[{gap:1.5,display:"flex",mb:{xs:3,md:5}},...Array.isArray(a)?a:[a]],...g,children:[e.jsx(P,{component:m,href:n,startIcon:e.jsx(i,{icon:"eva:arrow-ios-back-fill",width:16}),children:"Back"}),e.jsx(l,{sx:{flexGrow:1}}),s==="published"&&e.jsx(b,{title:"Go Live",children:e.jsx(v,{component:m,href:c,children:e.jsx(i,{icon:"eva:external-link-fill"})})}),e.jsx(b,{title:"Edit",children:e.jsx(v,{component:m,href:o,children:e.jsx(i,{icon:"solar:pen-bold"})})}),e.jsx(p,{color:"inherit",variant:"contained",loading:!s,loadingIndicator:"Loadingâ€¦",endIcon:e.jsx(i,{icon:"eva:arrow-ios-downward-fill"}),onClick:d.onOpen,sx:{textTransform:"capitalize"},children:s})]}),C()]})}function K({post:a,loading:s,error:n}){const[o,c]=f.useState(""),h=f.useCallback(r=>{c(r)},[]);return f.useEffect(()=>{a&&c(a==null?void 0:a.publish)},[a]),s?e.jsx(j,{maxWidth:!1,disablePadding:!0,children:e.jsx(_,{})}):n?e.jsx(j,{maxWidth:!1,children:e.jsx(V,{filled:!0,title:"Post not found!",action:e.jsx(P,{component:m,href:x.dashboard.post.root,startIcon:e.jsx(i,{width:16,icon:"eva:arrow-ios-back-fill"}),sx:{mt:3},children:"Back to list"}),sx:{py:10,height:"auto",flexGrow:"unset"}})}):e.jsxs(j,{maxWidth:!1,disablePadding:!0,children:[e.jsx(B,{maxWidth:!1,sx:{px:{sm:5}},children:e.jsx(J,{backHref:x.dashboard.post.root,editHref:x.dashboard.post.edit(`${a==null?void 0:a.title}`),liveHref:x.post.details(`${a==null?void 0:a.title}`),publish:`${o}`,onChangePublish:h,publishOptions:U})}),e.jsx(W,{title:`${a==null?void 0:a.title}`,coverUrl:`${a==null?void 0:a.coverUrl}`}),e.jsxs(l,{sx:{pb:5,mx:"auto",maxWidth:720,mt:{xs:5,md:10},px:{xs:2,sm:3}},children:[e.jsx(u,{variant:"subtitle1",children:a==null?void 0:a.description}),e.jsx(R,{children:a==null?void 0:a.content}),e.jsxs(E,{spacing:3,sx:[r=>({py:3,borderTop:`dashed 1px ${r.vars.palette.divider}`,borderBottom:`dashed 1px ${r.vars.palette.divider}`})],children:[e.jsx(l,{sx:{gap:1,display:"flex",flexWrap:"wrap"},children:a==null?void 0:a.tags.map(r=>e.jsx(L,{label:r,variant:"soft"},r))}),e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx($,{label:A(a==null?void 0:a.totalFavorites),control:e.jsx(D,{defaultChecked:!0,size:"small",color:"error",icon:e.jsx(i,{icon:"solar:heart-bold"}),checkedIcon:e.jsx(i,{icon:"solar:heart-bold"}),inputProps:{id:"favorite-checkbox","aria-label":"Favorite checkbox"}}),sx:{mr:1}}),e.jsx(q,{sx:{[`& .${T.avatar}`]:{width:32,height:32}},children:a==null?void 0:a.favoritePerson.map(r=>e.jsx(S,{alt:r.name,src:r.avatarUrl},r.name))})]})]}),e.jsxs(l,{sx:{mb:3,mt:5,display:"flex"},children:[e.jsx(u,{variant:"h4",children:"Comments"}),e.jsxs(u,{variant:"subtitle2",sx:{color:"text.disabled"},children:["(",a==null?void 0:a.comments.length,")"]})]}),e.jsx(N,{}),e.jsx(F,{sx:{mt:5,mb:2}}),e.jsx(z,{comments:(a==null?void 0:a.comments)??[]})]})]})}const Q={title:`Post details | Dashboard - ${H.appName}`};function ve(){const{title:a=""}=M(),{post:s,postLoading:n,postError:o}=O(a);return e.jsxs(e.Fragment,{children:[e.jsx(G,{children:e.jsxs("title",{children:[" ",Q.title]})}),e.jsx(K,{post:s,loading:n,error:o})]})}export{ve as default};
