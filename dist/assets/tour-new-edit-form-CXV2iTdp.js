import{V as U,y as F,z as R,O as p,cN as I,p as V,r as d,j as e,F as z,S as t,Q as n,bm as L,dO as _,D as g,T as l,K as r,f3 as B,bc as b,A as j,B as v,e$ as H,cO as W,bq as Q,aQ as K,N as M}from"./index-cNRh_qft.js";import{s as m}from"./schema-helper-D18en8Wv.js";import{C as f}from"./Card-C_-31fGp.js";import{C as D}from"./CardHeader-CZZHKPlX.js";const $=p({name:n().min(1,{message:"Name is required!"}),content:m.editor().min(100,{message:"Content must be at least 100 characters"}).max(500,{message:"Content must be less than 500 characters"}),images:m.files({message:"Images is required!"}),tourGuides:L(p({id:n(),name:n(),avatarUrl:n(),phoneNumber:n()})).min(1,{message:"Selecione pelo menos 1 guia!"}),available:p({startDate:m.date({message:{required:"Start date is required!"}}),endDate:m.date({message:{required:"End date is required!"}})}),durations:n().min(1,{message:"Durations is required!"}),destination:m.nullableInput(n().min(1,{message:"Destination is required!"}),{message:"Destination is required!"}),services:n().array().min(2,{message:"Selecione pelo menos 2 serviÃ§os!"}),tags:n().array().min(2,{message:"Adicione pelo menos 2 tags!"})}).refine(o=>!_(o.available.startDate,o.available.endDate),{message:"End date cannot be earlier than start date!",path:["available.endDate"]});function G({currentTour:o}){const S=U(),y={name:"",content:"",images:[],tourGuides:[],available:{startDate:null,endDate:null},durations:"",destination:"",services:[],tags:[]},h=F({mode:"all",resolver:R($),defaultValues:y,values:o}),{watch:T,reset:C,setValue:u,handleSubmit:E,formState:{isSubmitting:A}}=h,x=T(),O=E(async a=>{try{await new Promise(s=>setTimeout(s,500)),C(),I.success(o?"Update success!":"Create success!"),S.push(V.dashboard.tour.root),console.info("DATA",a)}catch(s){console.error(s)}}),k=d.useCallback(a=>{var i;const s=x.images&&((i=x.images)==null?void 0:i.filter(c=>c!==a));u("images",s,{shouldValidate:!0})},[u,x.images]),q=d.useCallback(()=>{u("images",[],{shouldValidate:!0})},[u]),w=()=>e.jsxs(f,{children:[e.jsx(D,{title:"Details",subheader:"Title, short description, image...",sx:{mb:3}}),e.jsx(g,{}),e.jsxs(t,{spacing:3,sx:{p:3},children:[e.jsxs(t,{spacing:1.5,children:[e.jsx(l,{variant:"subtitle2",children:"Name"}),e.jsx(r.Text,{name:"name",placeholder:"Ex: Adventure Seekers Expedition..."})]}),e.jsxs(t,{spacing:1.5,children:[e.jsx(l,{variant:"subtitle2",children:"Content"}),e.jsx(r.Editor,{name:"content",sx:{maxHeight:480}})]}),e.jsxs(t,{spacing:1.5,children:[e.jsx(l,{variant:"subtitle2",children:"Images"}),e.jsx(r.Upload,{multiple:!0,thumbnail:!0,name:"images",maxSize:3145728,onRemove:k,onRemoveAll:q,onUpload:()=>console.info("ON UPLOAD")})]})]})]}),N=()=>e.jsxs(f,{children:[e.jsx(D,{title:"Properties",subheader:"Additional functions and attributes...",sx:{mb:3}}),e.jsx(g,{}),e.jsxs(t,{spacing:3,sx:{p:3},children:[e.jsxs("div",{children:[e.jsx(l,{variant:"subtitle2",sx:{mb:1.5},children:"Tour guide"}),e.jsx(r.Autocomplete,{multiple:!0,name:"tourGuides",placeholder:"+ Tour Guides",disableCloseOnSelect:!0,options:B,getOptionLabel:a=>a.name,isOptionEqualToValue:(a,s)=>a.id===s.id,renderOption:(a,s)=>d.createElement("li",{...a,key:s.id},e.jsx(j,{alt:s.avatarUrl,src:s.avatarUrl,sx:{mr:1,width:24,height:24,flexShrink:0}},s.id),s.name),renderTags:(a,s)=>a.map((i,c)=>d.createElement(b,{...s({index:c}),key:i.id,size:"small",variant:"soft",label:i.name,avatar:e.jsx(j,{alt:i.name,src:i.avatarUrl})}))})]}),e.jsxs(t,{spacing:1.5,children:[e.jsx(l,{variant:"subtitle2",children:"Available"}),e.jsxs(v,{sx:{gap:2,display:"flex",flexDirection:{xs:"column",md:"row"}},children:[e.jsx(r.DatePicker,{name:"available.startDate",label:"Start date"}),e.jsx(r.DatePicker,{name:"available.endDate",label:"End date"})]})]}),e.jsxs(t,{spacing:1.5,children:[e.jsx(l,{variant:"subtitle2",children:"Duration"}),e.jsx(r.Text,{name:"durations",placeholder:"Ex: 2 days, 4 days 3 nights..."})]}),e.jsxs(t,{spacing:1.5,children:[e.jsx(l,{variant:"subtitle2",children:"Destination"}),e.jsx(r.CountrySelect,{fullWidth:!0,name:"destination",placeholder:"+ Destination"})]}),e.jsxs(t,{spacing:1,children:[e.jsx(l,{variant:"subtitle2",children:"Services"}),e.jsx(r.MultiCheckbox,{name:"services",options:H,sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"}})]}),e.jsxs(t,{spacing:1.5,children:[e.jsx(l,{variant:"subtitle2",children:"Tags"}),e.jsx(r.Autocomplete,{name:"tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,disableCloseOnSelect:!0,options:W.map(a=>a),getOptionLabel:a=>a,renderOption:(a,s)=>d.createElement("li",{...a,key:s},s),renderTags:(a,s)=>a.map((i,c)=>d.createElement(b,{...s({index:c}),key:i,label:i,size:"small",color:"info",variant:"soft"}))})]})]})]}),P=()=>e.jsxs(v,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:[e.jsx(Q,{label:"Publish",control:e.jsx(K,{defaultChecked:!0,inputProps:{id:"publish-switch"}}),sx:{flexGrow:1,pl:3}}),e.jsx(M,{type:"submit",variant:"contained",size:"large",loading:A,sx:{ml:2},children:o?"Save changes":"Create tour"})]});return e.jsx(z,{methods:h,onSubmit:O,children:e.jsxs(t,{spacing:{xs:3,md:5},sx:{mx:"auto",maxWidth:{xs:720,xl:880}},children:[w(),N(),P()]})})}export{G as T};
