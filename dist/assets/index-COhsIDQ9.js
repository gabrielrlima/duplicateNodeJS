import{c0 as b,r as c,j as t,s as S,c1 as D,U as g,a1 as R,I as w,B as k,f as F,ez as T,H as W,C as L}from"./index-cNRh_qft.js";import{C as G}from"./component-layout-D3xwTgqf.js";import{b as H,e as C,s as X,k as K,T as V,l as Y,h as U,M as q,f as J,S as Q,r as Z,m as P,n as ee,j as ae,D as te,a as re,u as ne,d as se}from"./sortable.esm-DKy7jZCP.js";import"./orderBy-BP_idRMj.js";import"./Card-C_-31fGp.js";import"./CardHeader-CZZHKPlX.js";import"./CardContent-BPfTDHT5.js";const n={item:b("dnd__item"),itemWrap:b("dnd__item__wrap"),removeBtn:b("dnd__remove__btn"),state:{sorting:"--sorting",dragging:"--dragging",dragOverlay:"--drag-overlay"}},oe=c.forwardRef((a,m)=>{const{item:i,stateProps:e,onRemove:u,sx:p,...s}=a;c.useEffect(()=>{if(e!=null&&e.dragOverlay)return document.body.style.cursor="grabbing",()=>{document.body.style.cursor=""}},[e==null?void 0:e.dragOverlay]);const l=()=>t.jsxs(de,{children:[t.jsx(R,{disableRipple:!0,disableFocusRipple:!0,disableTouchRipple:!0,size:"small",onClick:u,className:n.removeBtn,children:t.jsx(w,{icon:"solar:close-circle-bold"})}),t.jsx(R,{disableRipple:!0,disableFocusRipple:!0,disableTouchRipple:!0,...e==null?void 0:e.handleProps,...e==null?void 0:e.listeners,size:"small",children:t.jsx(w,{icon:"nimbus:drag-dots"})})]});return t.jsx(ie,{ref:m,className:D([n.itemWrap],{[n.state.sorting]:e==null?void 0:e.sorting,[n.state.dragging]:e==null?void 0:e.dragging,[n.state.dragOverlay]:e==null?void 0:e.dragOverlay}),sx:[{...!!(e!=null&&e.transition)&&{transition:e.transition},...!!(e!=null&&e.transform)&&{"--translate-x":`${Math.round(e.transform.x)}px`,"--translate-y":`${Math.round(e.transform.y)}px`,"--scale-x":`${e.transform.scaleX}`,"--scale-y":`${e.transform.scaleY}`}}],children:t.jsxs(le,{className:D([n.item],{[n.state.sorting]:e==null?void 0:e.sorting,[n.state.dragging]:e==null?void 0:e.dragging,[n.state.dragOverlay]:e==null?void 0:e.dragOverlay}),"data-cypress":"draggable-item",sx:p,...s,children:[i,l()]})})}),$=c.memo(oe),ie=S("li")({flexShrink:0,display:"flex",transform:"translate3d(var(--translate-x, 0), var(--translate-y, 0), 0) scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1))",transformOrigin:"0 0",touchAction:"manipulation",[`&.${n.state.dragOverlay}`]:{zIndex:999}}),le=S("div")(({theme:a})=>({...a.typography.h2,width:"100%",outline:"none",overflow:"hidden",textAlign:"center",position:"relative",transformOrigin:"50% 50%",touchAction:"manipulation",padding:a.spacing(5,0),WebkitTapHighlightColor:"transparent",borderRadius:a.shape.borderRadius*2,transition:a.transitions.create(["box-shadow"]),color:g(a.vars.palette.text.disabledChannel,.24),backgroundColor:g(a.vars.palette.grey["500Channel"],.04),border:`solid 1px ${g(a.vars.palette.grey["500Channel"],.16)}`,...a.applyStyles("dark",{backgroundColor:a.vars.palette.grey[900]}),"&:hover":{[`& .${n.removeBtn}`]:{opacity:.48}},[`& .${n.removeBtn}`]:{opacity:0,transition:a.transitions.create(["opacity"])},[`&.${n.state.dragOverlay}`]:{backdropFilter:"blur(6px)",boxShadow:a.vars.customShadows.z20,color:a.vars.palette.text.primary,backgroundColor:g(a.vars.palette.common.whiteChannel,.48),...a.applyStyles("dark",{backgroundColor:g(a.vars.palette.grey["900Channel"],.48)})},[`&.${n.state.dragging}`]:{opacity:.24,backgroundColor:g(a.vars.palette.grey["500Channel"],.12)}})),de=S("div")({top:6,right:6,zIndex:9,display:"flex",position:"absolute"}),ce={sideEffects:re({styles:{active:{opacity:"0.5"}}})};function j({sx:a,itemCount:m=12,swap:i=!1,layout:e="grid",...u}){const p=Array.from({length:m},(r,o)=>o+1),[s,l]=c.useState(p),y=H(C(Y),C(V),C(K,{coordinateGetter:X})),f=c.useRef(!0),v=Math.floor(Math.random()*200),[d,I]=c.useState(null),O=r=>s.indexOf(r),h=d!=null?O(d):-1,_=i?Z:P,A=i?ee:ae,B=i?({id:r,items:o,activeIndex:x,overIndex:E})=>A(o,x,E).indexOf(r):void 0;c.useEffect(()=>{d==null&&(f.current=!0)},[d]);const M=()=>{l([...s,v])},N=r=>{const o=s.filter(x=>x!==r);l(o)},z=()=>t.jsx(T,{children:t.jsx(te,{dropAnimation:ce,children:d!=null?t.jsx($,{item:s[h],stateProps:{dragOverlay:!0}}):null})});return t.jsxs(k,{sx:[{display:"flex",alignItems:"flex-end",flexDirection:"column"},...Array.isArray(a)?a:[a]],...u,children:[t.jsx(F,{variant:"contained",onClick:M,children:"+ Add item"}),t.jsxs(U,{id:"dnd-grid",sensors:y,collisionDetection:J,measuring:{droppable:{strategy:q.Always}},onDragStart:({active:r})=>{r&&I(r.id)},onDragEnd:({over:r})=>{if(I(null),r){const o=O(r.id);h!==o&&l(x=>A(x,h,o))}},children:[t.jsx(Q,{items:s,strategy:_,children:t.jsx(k,{component:"ul",sx:{py:3,gap:2,width:1,...e==="grid"&&{display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(4, 1fr)"}},...e==="vertical"&&{display:"flex",flexDirection:"column"},...e==="horizontal"&&{display:"flex",overflowX:"auto",flexDirection:"row",[`& .${n.itemWrap}`]:{maxWidth:180}}},children:s.map((r,o)=>t.jsx(me,{id:r,index:o,getNewIndex:B,onRemove:()=>N(r)},r))})}),z()]})]})}const ge=a=>se({...a,wasDragging:!0});function me({id:a,index:m,onRemove:i,getNewIndex:e}){const{isSorting:u,transform:p,listeners:s,attributes:l,isDragging:y,setNodeRef:f,transition:v,setActivatorNodeRef:d}=ne({id:a,getNewIndex:e,animateLayoutChanges:ge});return t.jsx($,{ref:f,item:a,"data-id":a,"data-index":m,onRemove:i,stateProps:{listeners:s,transform:p,transition:v,sorting:u,dragging:y,dragOverlay:y,handleProps:{ref:d}},...l})}const ue=[{name:"Grid",component:t.jsx(j,{swap:!0})},{name:"Vertical",component:t.jsx(j,{layout:"vertical",itemCount:4})},{name:"Horizontal",component:t.jsx(j,{layout:"horizontal",itemCount:3,sx:{[`& .${n.item}`]:{px:8}}})}];function pe(){return t.jsx(G,{sectionData:ue,heroProps:{heading:"Dnd",moreLinks:["https://docs.dndkit.com/"]}})}const xe={title:`Dnd | Components - ${L.appName}`};function Se(){return t.jsxs(t.Fragment,{children:[t.jsx(W,{children:t.jsxs("title",{children:[" ",xe.title]})}),t.jsx(pe,{})]})}export{Se as default};
