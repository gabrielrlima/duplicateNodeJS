import{b0 as B,r as d,j as e,B as o,A as V,aJ as $,a_ as oe,f as v,I as n,b1 as q,b2 as H,b3 as F,D as G,aS as J,aT as Y,au as O,a0 as re,bp as _,aV as K,Y as y,ax as te,S as E,dv as ie,T as W,br as N,a1 as D,b8 as le,bc as ce,dt as Q,d1 as de,dA as xe,R as he,aU as pe,dB as ue,du as me,cN as je,aj as ge,C as ve,bV as ye}from"./index-cNRh_qft.js";import{C as be}from"./confirm-dialog-V5NQjZtL.js";import{A as Ce}from"./AvatarGroup-B32XWlKs.js";function X({person:s}){const a=B(),[r,l]=d.useState(s.permission),x=d.useCallback(c=>{l(c)},[]),u=()=>e.jsx(q,{open:a.open,anchorEl:a.anchorEl,onClose:a.onClose,children:e.jsxs(H,{children:[e.jsxs(F,{selected:r==="view",onClick:()=>{a.onClose(),x("view")},children:[e.jsx(n,{icon:"solar:eye-bold"}),"Can view"]}),e.jsxs(F,{selected:r==="edit",onClick:()=>{a.onClose(),x("edit")},children:[e.jsx(n,{icon:"solar:pen-bold"}),"Can edit"]}),e.jsx(G,{sx:{borderStyle:"dashed"}}),e.jsxs(F,{onClick:()=>a.onClose(),sx:{color:"error.main"},children:[e.jsx(n,{icon:"solar:trash-bin-trash-bold"}),"Remove"]})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(o,{component:"li",sx:{display:"flex",alignItems:"center",py:1},children:[e.jsx(V,{alt:s.name,src:s.avatarUrl,sx:{mr:2}}),e.jsx($,{primary:s.name,secondary:e.jsx(oe,{title:s.email,children:e.jsx("span",{children:s.email})}),sx:{flexGrow:1,pr:1},slotProps:{primary:{noWrap:!0},secondary:{noWrap:!0}}}),e.jsxs(v,{size:"small",color:"inherit",endIcon:e.jsx(n,{width:16,icon:a.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:-.5}}),onClick:a.onOpen,sx:[c=>({flexShrink:0,fontSize:c.typography.pxToRem(12),...a.open&&{bgcolor:"action.selected"}})],children:["Can ",r]})]}),u()]})}function Z({open:s,shared:a,onClose:r,onCopyLink:l,inviteEmail:x,onChangeInvite:u,...c}){const m=a&&!!a.length;return e.jsxs(J,{fullWidth:!0,maxWidth:"xs",open:s,onClose:r,...c,children:[e.jsx(Y,{children:" Convite "}),e.jsx(o,{sx:{px:3},children:u&&e.jsx(O,{fullWidth:!0,value:x,placeholder:"Email",onChange:u,slotProps:{input:{endAdornment:e.jsx(re,{position:"end",children:e.jsx(v,{color:"inherit",variant:"contained",disabled:!x,sx:{mr:-.75},children:"Enviar convite"})})}},sx:{mb:2}})}),m&&e.jsx(_,{sx:{height:300,px:3},children:e.jsx(o,{component:"ul",children:a.map(i=>e.jsx(X,{person:i},i.id))})}),e.jsxs(K,{sx:{justifyContent:"space-between"},children:[l&&e.jsx(v,{startIcon:e.jsx(n,{icon:"eva:link-2-fill"}),onClick:l,children:"Copiar Link"}),r&&e.jsx(v,{variant:"outlined",color:"inherit",onClick:r,children:"Fechar"})]})]})}function we({file:s,open:a,onClose:r,onDelete:l,favorited:x,onFavorite:u,onCopyLink:c,...m}){const i=y(),p=y(!0),g=y(!0),[b,h]=d.useState(""),[I,w]=d.useState(s==null?void 0:s.tags.slice(0,3)),T=(s==null?void 0:s.shared)&&!!(s!=null&&s.shared.length),k=d.useCallback(t=>{h(t.target.value)},[]),S=d.useCallback(t=>{w(t)},[]),P=()=>e.jsxs(o,{sx:{p:2.5,display:"flex",alignItems:"center"},children:[e.jsx(W,{variant:"h6",sx:{flexGrow:1},children:"Info"}),e.jsx(N,{color:"warning",icon:e.jsx(n,{icon:"eva:star-outline"}),checkedIcon:e.jsx(n,{icon:"eva:star-fill"}),checked:x,onChange:u,inputProps:{id:`favorite-${s.id}-checkbox`,"aria-label":`Favorite ${s.id} checkbox`}})]}),z=()=>e.jsxs(E,{spacing:1.5,children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",typography:"subtitle2",justifyContent:"space-between"},children:["Propriedades",e.jsx(D,{size:"small",onClick:g.onToggle,children:e.jsx(n,{icon:g.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),g.value&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{sx:{display:"flex",typography:"caption",textTransform:"capitalize"},children:[e.jsx(o,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Tamanho"}),Q(s==null?void 0:s.size)]}),e.jsxs(o,{sx:{display:"flex",typography:"caption",textTransform:"capitalize"},children:[e.jsx(o,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Modificação"}),de(s==null?void 0:s.modifiedAt)]}),e.jsxs(o,{sx:{display:"flex",typography:"caption",textTransform:"capitalize"},children:[e.jsx(o,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Tipo"}),xe(s==null?void 0:s.type)]})]})]}),A=()=>e.jsxs(E,{spacing:1.5,children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",typography:"subtitle2",justifyContent:"space-between"},children:["Tags",e.jsx(D,{size:"small",onClick:p.onToggle,children:e.jsx(n,{icon:p.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),p.value&&e.jsx(le,{multiple:!0,freeSolo:!0,options:s==null?void 0:s.tags.map(t=>t),getOptionLabel:t=>t,defaultValue:s==null?void 0:s.tags.slice(0,3),value:I,onChange:(t,j)=>{S(j)},renderOption:(t,j)=>d.createElement("li",{...t,key:j},j),renderTags:(t,j)=>t.map((f,R)=>d.createElement(ce,{...j({index:R}),size:"small",variant:"soft",label:f,key:f})),renderInput:t=>e.jsx(O,{...t,placeholder:"#Add a tags"})})]}),M=()=>{var t;return e.jsxs(e.Fragment,{children:[e.jsxs(o,{sx:{p:2.5,display:"flex",alignItems:"center",typography:"subtitle2",justifyContent:"space-between"},children:["Share with",e.jsx(D,{size:"small",color:"primary",onClick:i.onTrue,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(n,{width:16,icon:"mingcute:add-line"})})]}),T&&e.jsx(o,{component:"ul",sx:{pl:2,pr:1},children:(t=s==null?void 0:s.shared)==null?void 0:t.map(j=>e.jsx(X,{person:j},j.id))})]})};return e.jsxs(e.Fragment,{children:[e.jsxs(te,{open:a,onClose:r,anchor:"right",slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:320}},...m,children:[e.jsxs(_,{children:[P(),e.jsxs(E,{spacing:2.5,sx:{p:2.5,justifyContent:"center",bgcolor:"background.neutral"},children:[e.jsx(ie,{imageView:!0,file:(s==null?void 0:s.type)==="folder"?s==null?void 0:s.type:s==null?void 0:s.url,sx:{width:"auto",height:"auto",alignSelf:"flex-start"},slotProps:{img:{sx:{width:320,height:"auto",aspectRatio:"4/3",objectFit:"cover"}},icon:{sx:{width:64,height:64}}}}),e.jsx(W,{variant:"subtitle1",sx:{wordBreak:"break-all"},children:s==null?void 0:s.name}),e.jsx(G,{sx:{borderStyle:"dashed"}}),A(),z()]}),M()]}),e.jsx(o,{sx:{p:2.5},children:e.jsx(v,{fullWidth:!0,variant:"soft",color:"error",size:"large",startIcon:e.jsx(n,{icon:"solar:trash-bin-trash-bold"}),onClick:l,children:"Apagar"})})]}),e.jsx(Z,{open:i.value,shared:s==null?void 0:s.shared,inviteEmail:b,onChangeInvite:k,onCopyLink:c,onClose:()=>{i.onFalse(),h("")}})]})}function De({sx:s,link:a,title:r,onOpen:l,subtitle:x,collapse:u,onCollapse:c,...m}){return e.jsxs(o,{sx:[{mb:3,display:"flex",alignItems:"center"},...Array.isArray(s)?s:[s]],...m,children:[e.jsxs(E,{flexGrow:1,children:[e.jsxs(o,{sx:{gap:1,flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsxs(W,{variant:"h6",children:[" ",r," "]}),e.jsx(D,{size:"small",color:"primary",onClick:l,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(n,{width:16,icon:"mingcute:add-line"})})]}),e.jsx(o,{sx:{typography:"body2",color:"text.disabled",mt:.5},children:x})]}),a&&e.jsx(v,{href:a,component:he,size:"small",color:"inherit",endIcon:e.jsx(n,{icon:"eva:arrow-ios-forward-fill",width:18,sx:{ml:-.5}}),children:"View all"}),c&&e.jsx(D,{onClick:c,children:e.jsx(n,{icon:u?"eva:arrow-ios-downward-fill":"eva:arrow-ios-upward-fill"})})]})}function ke({open:s,onClose:a,onCreate:r,onUpdate:l,folderName:x,onChangeFolderName:u,title:c="Upload de arquivos",...m}){const[i,p]=d.useState([]);d.useEffect(()=>{s||p([])},[s]);const g=d.useCallback(w=>{p([...i,...w])},[i]),b=()=>{a(),console.info("ON UPLOAD")},h=w=>{const T=i.filter(k=>k!==w);p(T)},I=()=>{p([])};return e.jsxs(J,{fullWidth:!0,maxWidth:"sm",open:s,onClose:a,...m,children:[e.jsx(Y,{sx:{p:"24px 24px 16px 24px"},children:c}),e.jsxs(pe,{dividers:!0,sx:{pt:1,pb:0,border:"none"},children:[(r||l)&&e.jsx(O,{fullWidth:!0,label:"Nome da pasta",value:x,onChange:u,sx:{mb:3}}),e.jsx(ue,{multiple:!0,value:i,onDrop:g,onRemove:h})]}),e.jsxs(K,{children:[e.jsx(v,{variant:"contained",startIcon:e.jsx(n,{icon:"eva:cloud-upload-fill"}),onClick:b,children:"Upload"}),!!i.length&&e.jsx(v,{variant:"outlined",color:"inherit",onClick:I,children:"Remove all"}),(r||l)&&e.jsx(o,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"},children:e.jsx(v,{variant:"soft",onClick:r||l,children:l?"Save":"Create"})})]})]})}function Ae({sx:s,folder:a,selected:r,onSelect:l,onDelete:x,...u}){var U;const c=y(),m=y(),i=y(),p=y(),g=y(),b=y(a.isFavorited),h=B(),{copy:I}=me(),[w,T]=d.useState(""),[k,S]=d.useState(a.name),P=d.useCallback(C=>{T(C.target.value)},[]),z=d.useCallback(C=>{S(C.target.value)},[]),A=d.useCallback(()=>{je.success("Copied!"),I(a.url)},[I,a.url]),M=()=>e.jsxs(o,{sx:{top:8,right:8,display:"flex",position:"absolute",alignItems:"center"},children:[e.jsx(N,{color:"warning",icon:e.jsx(n,{icon:"eva:star-outline"}),checkedIcon:e.jsx(n,{icon:"eva:star-fill"}),checked:b.value,onChange:b.onToggle,inputProps:{id:`favorite-${a.id}-checkbox`,"aria-label":`Favorite ${a.id} checkbox`}}),e.jsx(D,{color:h.open?"inherit":"default",onClick:h.onOpen,children:e.jsx(n,{icon:"eva:more-vertical-fill"})})]}),t=()=>e.jsx(o,{onMouseEnter:g.onTrue,onMouseLeave:g.onFalse,sx:{width:36,height:36},children:(g.value||r)&&l?e.jsx(N,{checked:r,onClick:l,icon:e.jsx(n,{icon:"eva:radio-button-off-fill"}),checkedIcon:e.jsx(n,{icon:"eva:checkmark-circle-2-fill"}),sx:{width:1,height:1}}):e.jsx(o,{component:"img",src:`${ve.assetsDir}/assets/icons/files/ic-folder.svg`,sx:{width:1,height:1}})}),j=()=>e.jsx($,{onClick:i.onTrue,primary:a.name,secondary:e.jsxs(e.Fragment,{children:[Q(a.size),e.jsx(o,{component:"span",sx:{mx:.75,width:2,height:2,borderRadius:"50%",bgcolor:"currentColor"}}),a.totalFiles," files"]}),slotProps:{primary:{noWrap:!0,sx:{typography:"subtitle1"}},secondary:{sx:{mt:.5,alignItems:"center",typography:"caption",color:"text.disabled",display:"inline-flex"}}}}),f=()=>{var C;return e.jsx(Ce,{max:3,sx:{[`& .${ye.avatar}`]:{width:24,height:24,"&:first-of-type":{fontSize:12}}},children:(C=a.shared)==null?void 0:C.map(L=>e.jsx(V,{alt:L.name,src:L.avatarUrl},L.id))})},R=()=>e.jsx(q,{open:h.open,anchorEl:h.anchorEl,onClose:h.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(H,{children:[e.jsxs(F,{onClick:()=>{h.onClose(),A()},children:[e.jsx(n,{icon:"eva:link-2-fill"}),"Copiar Link"]}),e.jsxs(F,{onClick:()=>{h.onClose(),c.onTrue()},children:[e.jsx(n,{icon:"solar:share-bold"}),"Compartilhar"]}),e.jsxs(F,{onClick:()=>{h.onClose(),p.onTrue()},children:[e.jsx(n,{icon:"solar:pen-bold"}),"Editar"]}),e.jsx(G,{sx:{borderStyle:"dashed"}}),e.jsxs(F,{onClick:()=>{m.onTrue(),h.onClose()},sx:{color:"error.main"},children:[e.jsx(n,{icon:"solar:trash-bin-trash-bold"}),"Apagar"]})]})}),ee=()=>e.jsx(we,{file:a,favorited:b.value,onFavorite:b.onToggle,onCopyLink:A,open:i.value,onClose:i.onFalse,onDelete:()=>{i.onFalse(),x()}}),se=()=>e.jsx(Z,{open:c.value,shared:a.shared,inviteEmail:w,onChangeInvite:P,onCopyLink:A,onClose:()=>{c.onFalse(),T("")}}),ae=()=>e.jsx(ke,{open:p.value,onClose:p.onFalse,title:"Editar Pasta",onUpdate:()=>{p.onFalse(),S(k),console.info("UPDATE FOLDER",k)},folderName:k,onChangeFolderName:z}),ne=()=>e.jsx(be,{open:m.value,onClose:m.onFalse,title:"Apagar",content:"Você tem certeza que deseja apagar?",action:e.jsx(v,{variant:"contained",color:"error",onClick:x,children:"Apagar"})});return e.jsxs(e.Fragment,{children:[e.jsxs(ge,{variant:"outlined",sx:[C=>({gap:1,p:2.5,display:"flex",borderRadius:2,cursor:"pointer",position:"relative",bgcolor:"transparent",flexDirection:"column",alignItems:"flex-start",...(g.value||r)&&{bgcolor:"background.paper",boxShadow:C.vars.customShadows.z20}}),...Array.isArray(s)?s:[s]],...u,children:[t(),M(),j(),!!((U=a==null?void 0:a.shared)!=null&&U.length)&&f()]}),se(),ae(),ee(),R(),ne()]})}export{we as F,Z as a,De as b,Ae as c,ke as d};
