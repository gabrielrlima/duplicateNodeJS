import{ca as M,j as e,a1 as A,I as u,B as b,A as X,aJ as Z,aK as U,L as D,R as F,D as $,cG as ee,T as j,cb as H,cc as z,cd as R,r as a,p as S,f as J,V as se,ce as le,cf as N,cg as ne,ch as G,ci as te,cj as oe,au as V,a0 as re,ck as ie,eK as q,d1 as _,ax as ae,c4 as ce,S as Y,c3 as de,a$ as P,b1 as W,du as xe,a_ as k,eQ as pe,Y as he,dC as me,b8 as ue,aZ as fe,eM as be,eL as ye,eP as je,em as ge,eR as Ce,H as ke,C as Se}from"./index-D82XrlGq.js";import{E as Te}from"./empty-content-CAmd9egU.js";import{C as ve}from"./Card-Bw-3A9ev.js";import{P as Ee,p as Fe}from"./Pagination-CXHPyE06.js";import{F as we,a as v,c as E}from"./filters-result-BUC8QtIh.js";import{o as B}from"./orderBy-BP_idRMj.js";import"./job-new-edit-form-DZPwZ3fG.js";import"./html-to-markdown-ClkW1E93.js";import"./LastPage-xOhVKZvt.js";import"./schema-helper-BcHhi0sG.js";import"./CardHeader-BbCWHGKm.js";function Re({job:s,editHref:h,detailsHref:i,onDelete:l,sx:r,...d}){const t=M(),c=()=>e.jsx(H,{open:t.open,anchorEl:t.anchorEl,onClose:t.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(z,{children:[e.jsx("li",{children:e.jsxs(R,{component:F,href:i,onClick:()=>t.onClose(),children:[e.jsx(u,{icon:"solar:eye-bold"}),"View"]})}),e.jsx("li",{children:e.jsxs(R,{component:F,href:h,onClick:()=>t.onClose(),children:[e.jsx(u,{icon:"solar:pen-bold"}),"Edit"]})}),e.jsxs(R,{onClick:()=>{t.onClose(),l()},sx:{color:"error.main"},children:[e.jsx(u,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(ve,{sx:r,...d,children:[e.jsx(A,{onClick:t.onOpen,sx:{position:"absolute",top:8,right:8},children:e.jsx(u,{icon:"eva:more-vertical-fill"})}),e.jsxs(b,{sx:{p:3,pb:2},children:[e.jsx(X,{alt:s.company.name,src:s.company.logo,variant:"rounded",sx:{width:48,height:48,mb:2}}),e.jsx(Z,{sx:{mb:1},primary:e.jsx(D,{component:F,href:i,color:"inherit",children:s.title}),secondary:`Posted date: ${U(s.createdAt)}`,slotProps:{primary:{sx:{typography:"subtitle1"}},secondary:{sx:{mt:1,typography:"caption",color:"text.disabled"}}}}),e.jsxs(b,{sx:{gap:.5,display:"flex",alignItems:"center",color:"primary.main",typography:"caption"},children:[e.jsx(u,{width:16,icon:"solar:users-group-rounded-bold"}),s.candidates.length," candidates"]})]}),e.jsx($,{sx:{borderStyle:"dashed"}}),e.jsx(b,{sx:{p:3,rowGap:1.5,display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:[{label:s.experience,icon:e.jsx(u,{width:16,icon:"carbon:skill-level-basic",sx:{flexShrink:0}})},{label:s.employmentTypes.join(", "),icon:e.jsx(u,{width:16,icon:"solar:clock-circle-bold",sx:{flexShrink:0}})},{label:s.salary.negotiable?"Negotiable":ee(s.salary.price),icon:e.jsx(u,{width:16,icon:"solar:wad-of-money-bold",sx:{flexShrink:0}})},{label:s.role,icon:e.jsx(u,{width:16,icon:"solar:user-rounded-bold",sx:{flexShrink:0}})}].map(x=>e.jsxs(b,{sx:{gap:.5,minWidth:0,flexShrink:0,display:"flex",alignItems:"center",color:"text.disabled"},children:[x.icon,e.jsx(j,{variant:"caption",noWrap:!0,children:x.label})]},x.label))})]}),c()]})}function Ie({jobs:s}){const h=a.useCallback(i=>{console.info("DELETE",i)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(b,{sx:{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"}},children:s.map(i=>e.jsx(Re,{job:i,editHref:S.dashboard.job.edit(i.id),detailsHref:S.dashboard.job.details(i.id),onDelete:()=>h(i.id)},i.id))}),s.length>8&&e.jsx(Ee,{count:8,sx:{mt:{xs:8,md:8},[`& .${Fe.ul}`]:{justifyContent:"center"}}})]})}function Le({sort:s,onSort:h,sortOptions:i}){const l=M(),r=()=>e.jsx(H,{open:l.open,anchorEl:l.anchorEl,onClose:l.onClose,children:e.jsx(z,{children:i.map(d=>e.jsx(R,{selected:d.value===s,onClick:()=>{l.onClose(),h(d.value)},children:d.label},d.value))})});return e.jsxs(e.Fragment,{children:[e.jsxs(J,{disableRipple:!0,color:"inherit",onClick:l.onOpen,endIcon:e.jsx(u,{icon:l.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold"},children:["Sort by:",e.jsx(b,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold",textTransform:"capitalize"},children:s})]}),r()]})}function Oe({redirectPath:s,sx:h}){const i=se(),[l,r]=a.useState(""),[d,t]=a.useState(null),c=le(l),{searchResults:x,searchLoading:f}=Pe(c),g=a.useCallback(p=>{t(p),p&&i.push(s(p.id))},[s,i]),o={width:320,[` .${N.listbox}`]:{[` .${N.option}`]:{p:0,[` .${ne.root}`]:{px:1,py:.75,width:1}}}};return e.jsx(G,{autoHighlight:!0,popupIcon:null,loading:f,options:x,value:d,onChange:(p,m)=>g(m),onInputChange:(p,m)=>r(m),getOptionLabel:p=>p.title,noOptionsText:e.jsx(ie,{query:c}),isOptionEqualToValue:(p,m)=>p.id===m.id,slotProps:{paper:{sx:o}},sx:[{width:{xs:1,sm:260}},...Array.isArray(h)?h:[h]],renderInput:p=>e.jsx(V,{...p,placeholder:"Pesquisar...",slotProps:{input:{...p.InputProps,startAdornment:e.jsx(re,{position:"start",children:e.jsx(u,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(e.Fragment,{children:[f?e.jsx(u,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,p.InputProps.endAdornment]})}}}),renderOption:(p,m,{inputValue:w})=>{const I=te(m.title,w),L=oe(m.title,I);return a.createElement("li",{...p,key:m.id},e.jsx(D,{component:F,href:s(m.id),color:"inherit",underline:"none",children:L.map((T,O)=>e.jsx(j,{component:"span",color:T.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:T.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:T.text},O))},w))}})}function Pe(s){const[h,i]=a.useState([]),[l,r]=a.useState(!1),d=a.useCallback(async()=>{r(!0);try{await new Promise(c=>setTimeout(c,500));const t=q.filter(({title:c})=>[c].some(x=>x==null?void 0:x.toLowerCase().includes(s.toLowerCase())));i(t)}catch(t){console.error(t)}finally{r(!1)}},[s]);return a.useEffect(()=>{s?d():i([])},[d,s]),{searchResults:h,searchLoading:l}}function Be({open:s,canReset:h,onOpen:i,onClose:l,filters:r,options:d}){const{state:t,setState:c,resetState:x}=r,f=a.useCallback(n=>{const y=t.employmentTypes.includes(n)?t.employmentTypes.filter(C=>C!==n):[...t.employmentTypes,n];c({employmentTypes:y})},[c,t.employmentTypes]),g=a.useCallback(n=>{c({experience:n})},[c]),o=a.useCallback(n=>{c({roles:n})},[c]),p=a.useCallback(n=>{c({locations:n})},[c]),m=a.useCallback(n=>{const y=t.benefits.includes(n)?t.benefits.filter(C=>C!==n):[...t.benefits,n];c({benefits:y})},[c,t.benefits]),w=()=>e.jsxs(e.Fragment,{children:[e.jsxs(b,{sx:{py:2,pr:1,pl:2.5,display:"flex",alignItems:"center"},children:[e.jsx(j,{variant:"h6",sx:{flexGrow:1},children:"Filters"}),e.jsx(de,{title:"Reset",children:e.jsx(A,{onClick:()=>x(),children:e.jsx(_,{color:"error",variant:"dot",invisible:!h,children:e.jsx(u,{icon:"solar:restart-bold"})})})}),e.jsx(A,{onClick:l,children:e.jsx(u,{icon:"mingcute:close-line"})})]}),e.jsx($,{sx:{borderStyle:"dashed"}})]}),I=()=>e.jsxs(b,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1},children:"Employment types"}),d.employmentTypes.map(n=>e.jsx(P,{control:e.jsx(W,{checked:t.employmentTypes.includes(n),onClick:()=>f(n)}),label:n},n))]}),L=()=>e.jsxs(b,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1},children:"Experience"}),d.experiences.map(n=>e.jsx(P,{control:e.jsx(xe,{checked:n===t.experience,onClick:()=>g(n)}),label:n,sx:{...n==="all"&&{textTransform:"capitalize"}}},n))]}),T=()=>e.jsxs(b,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1.5},children:"Roles"}),e.jsx(G,{multiple:!0,disableCloseOnSelect:!0,options:d.roles.map(n=>n),getOptionLabel:n=>n,value:t.roles,onChange:(n,y)=>o(y),renderInput:n=>e.jsx(V,{placeholder:"Select Roles",...n}),renderOption:(n,y)=>a.createElement("li",{...n,key:y},y),renderTags:(n,y)=>n.map((C,Q)=>a.createElement(k,{...y({index:Q}),key:C,label:C,size:"small",variant:"soft"}))})]}),O=()=>e.jsxs(b,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1.5},children:"Locations"}),e.jsx(pe,{id:"multiple-locations",multiple:!0,fullWidth:!0,placeholder:t.locations.length?"+ Locations":"Select Locations",value:t.locations,onChange:(n,y)=>p(y)})]}),K=()=>e.jsxs(b,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1},children:"Benefits"}),d.benefits.map(n=>e.jsx(P,{control:e.jsx(W,{checked:t.benefits.includes(n),onClick:()=>m(n)}),label:n},n))]});return e.jsxs(e.Fragment,{children:[e.jsx(J,{disableRipple:!0,color:"inherit",endIcon:e.jsx(_,{color:"error",variant:"dot",invisible:!h,children:e.jsx(u,{icon:"ic:round-filter-list"})}),onClick:i,children:"Filters"}),e.jsxs(ae,{anchor:"right",open:s,onClose:l,slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:320}},children:[w(),e.jsx(ce,{sx:{px:2.5,py:3},children:e.jsxs(Y,{spacing:3,children:[I(),L(),T(),O(),K()]})})]})]})}function Ae({filters:s,totalResults:h,sx:i}){const{state:l,setState:r,resetState:d}=s,t=a.useCallback(o=>{const p=l.employmentTypes.filter(m=>m!==o);r({employmentTypes:p})},[r,l.employmentTypes]),c=a.useCallback(()=>{r({experience:"all"})},[r]),x=a.useCallback(o=>{const p=l.roles.filter(m=>m!==o);r({roles:p})},[r,l.roles]),f=a.useCallback(o=>{const p=l.locations.filter(m=>m!==o);r({locations:p})},[r,l.locations]),g=a.useCallback(o=>{const p=l.benefits.filter(m=>m!==o);r({benefits:p})},[r,l.benefits]);return e.jsxs(we,{totalResults:h,onReset:()=>d(),sx:i,children:[e.jsx(v,{label:"Employment types:",isShow:!!l.employmentTypes.length,children:l.employmentTypes.map(o=>a.createElement(k,{...E,key:o,label:o,onDelete:()=>t(o)}))}),e.jsx(v,{label:"Experience:",isShow:l.experience!=="all",children:e.jsx(k,{...E,label:l.experience,onDelete:c})}),e.jsx(v,{label:"Roles:",isShow:!!l.roles.length,children:l.roles.map(o=>a.createElement(k,{...E,key:o,label:o,onDelete:()=>x(o)}))}),e.jsx(v,{label:"Locations:",isShow:!!l.locations.length,children:l.locations.map(o=>a.createElement(k,{...E,key:o,label:o,onDelete:()=>f(o)}))}),e.jsx(v,{label:"Benefits:",isShow:!!l.benefits.length,children:l.benefits.map(o=>a.createElement(k,{...E,key:o,label:o,onDelete:()=>g(o)}))})]})}function Je(){const s=he(),[h,i]=a.useState("latest"),l=me({roles:[],locations:[],benefits:[],experience:"all",employmentTypes:[]}),{state:r}=l,d=Ne({inputData:q,filters:r,sortBy:h}),t=r.roles.length>0||r.locations.length>0||r.benefits.length>0||r.employmentTypes.length>0||r.experience!=="all",c=!d.length&&t,x=a.useCallback(o=>{i(o)},[]),f=()=>e.jsxs(b,{sx:{gap:3,display:"flex",justifyContent:"space-between",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"flex-end",sm:"center"}},children:[e.jsx(Oe,{redirectPath:o=>S.dashboard.job.details(o)}),e.jsxs(b,{sx:{gap:1,flexShrink:0,display:"flex"},children:[e.jsx(Be,{filters:l,canReset:t,open:s.value,onOpen:s.onTrue,onClose:s.onFalse,options:{roles:ge,benefits:je.map(o=>o.label),employmentTypes:ye.map(o=>o.label),experiences:["all",...be.map(o=>o.label)]}}),e.jsx(Le,{sort:h,onSort:x,sortOptions:Ce})]})]}),g=()=>e.jsx(Ae,{filters:l,totalResults:d.length});return e.jsxs(ue,{children:[e.jsx(fe,{heading:"List",links:[{name:"Dashboard",href:S.dashboard.root},{name:"Job",href:S.dashboard.job.root},{name:"List"}],action:e.jsx(J,{component:F,href:S.dashboard.job.new,variant:"contained",startIcon:e.jsx(u,{icon:"mingcute:add-line"}),children:"New job"}),sx:{mb:{xs:3,md:5}}}),e.jsxs(Y,{spacing:2.5,sx:{mb:{xs:3,md:5}},children:[f(),t&&g()]}),c&&e.jsx(Te,{filled:!0,sx:{py:10}}),e.jsx(Ie,{jobs:d})]})}function Ne({inputData:s,filters:h,sortBy:i}){const{employmentTypes:l,experience:r,roles:d,locations:t,benefits:c}=h;return i==="latest"&&(s=B(s,["createdAt"],["desc"])),i==="oldest"&&(s=B(s,["createdAt"],["asc"])),i==="popular"&&(s=B(s,["totalViews"],["desc"])),l.length&&(s=s.filter(x=>x.employmentTypes.some(f=>l.includes(f)))),r!=="all"&&(s=s.filter(x=>x.experience===r)),d.length&&(s=s.filter(x=>d.includes(x.role))),t.length&&(s=s.filter(x=>x.locations.some(f=>t.includes(f)))),c.length&&(s=s.filter(x=>x.benefits.some(f=>c.includes(f)))),s}const _e={title:`Job list | Dashboard - ${Se.appName}`};function Qe(){return e.jsxs(e.Fragment,{children:[e.jsx(ke,{children:e.jsxs("title",{children:[" ",_e.title]})}),e.jsx(Je,{})]})}export{Qe as default};
