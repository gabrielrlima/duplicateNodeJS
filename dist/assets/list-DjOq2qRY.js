import{j as e,aZ as W,B as f,aP as w,I as P,a_ as I,az as B,S as A,L as T,R as L,a$ as O,p as E,b0 as U,f as z,b1 as G,b2 as M,b3 as H,V as q,r as g,b4 as V,b5 as Q,b6 as k,b7 as K,b8 as Y,b9 as Z,ba as J,A as X,T as $,au as D,a0 as ee,bb as se,bc as C,U as te,Y as re,bd as ne,c as oe,H as ae,C as le}from"./index-cNRh_qft.js";import{P as ie,u as ce,C as de,a as pe,b as he}from"./product-review-new-form-CstTKEkU.js";import{E as ue}from"./empty-content-BzM3Az2z.js";import{C as xe}from"./color-preview-C96dy_lS.js";import{u as N}from"./use-checkout-context-D9kefmWb.js";import{C as me}from"./Card-C_-31fGp.js";import{F as ge}from"./Fab-Dt3-pcZY.js";import{P as fe,p as be}from"./Pagination-tgO33XKK.js";import{F as je,a as S,c as F}from"./filters-result-BTXXEhsP.js";import{o as R}from"./orderBy-BP_idRMj.js";import"./carousel-arrow-buttons-DjkKkmSg.js";import"./html-to-markdown-wPkGdeP1.js";import"./index-ChnT1xRF.js";import"./index-BDJJM9HW.js";import"./schema-helper-D18en8Wv.js";import"./Skeleton-XGh2Uz0E.js";import"./ListItemIcon-blO7VIGp.js";import"./LastPage-ChYIEhQh.js";const ye=[{label:"Men",value:"Men"},{label:"Women",value:"Women"},{label:"Kids",value:"Kids"}],Ce=["Shose","Apparel","Accessories"],Se=["up4Star","up3Star","up2Star","up1Star"],Fe=["#FF4842","#1890FF","#FFC0CB","#00AB55","#FFC107","#7F00FF","#000000","#FFFFFF"],Re=[{value:"featured",label:"Featured"},{value:"newest",label:"Newest"},{value:"priceDesc",label:"Price: High - Low"},{value:"priceAsc",label:"Price: Low - High"}];function Pe({product:s,detailsHref:d}){const{onAddToCart:l}=N(),{id:t,name:r,coverUrl:u,price:i,colors:o,available:x,sizes:m,priceSale:c,newLabel:a,saleLabel:p}=s,n=async()=>{const j={id:t,name:r,coverUrl:u,available:x,price:i,colors:[o[0]],size:m[0],quantity:1};try{l(j)}catch(y){console.error(y)}},h=()=>(a.enabled||p.enabled)&&e.jsxs(f,{sx:{gap:1,top:16,zIndex:9,right:16,display:"flex",position:"absolute",alignItems:"center"},children:[a.enabled&&e.jsx(w,{variant:"filled",color:"info",children:a.content}),p.enabled&&e.jsx(w,{variant:"filled",color:"error",children:p.content})]}),b=()=>e.jsxs(f,{sx:{position:"relative",p:1},children:[!!x&&e.jsx(ge,{size:"medium",color:"warning",onClick:n,sx:[j=>({right:16,zIndex:9,bottom:16,opacity:0,position:"absolute",transform:"scale(0)",transition:j.transitions.create(["opacity","transform"],{easing:j.transitions.easing.easeInOut,duration:j.transitions.duration.shorter})})],children:e.jsx(P,{icon:"solar:cart-plus-bold",width:24})}),e.jsx(I,{title:!x&&"Out of stock",placement:"bottom-end",children:e.jsx(B,{alt:r,src:u,ratio:"1/1",sx:{borderRadius:1.5,...!x&&{opacity:.48,filter:"grayscale(1)"}}})})]}),v=()=>e.jsxs(A,{spacing:2.5,sx:{p:3,pt:2},children:[e.jsx(T,{component:L,href:d,color:"inherit",variant:"subtitle2",noWrap:!0,children:r}),e.jsxs(f,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(I,{title:"Color",children:e.jsx(xe,{colors:o})}),e.jsxs(f,{sx:{gap:.5,display:"flex",typography:"subtitle1"},children:[c&&e.jsx(f,{component:"span",sx:{color:"text.disabled",textDecoration:"line-through"},children:O(c)}),e.jsx(f,{component:"span",children:O(i)})]})]})]});return e.jsxs(me,{sx:{"&:hover":{[`& .${W.root}`]:{opacity:1,transform:"scale(1)"}}},children:[h(),b(),v()]})}function ve({products:s,loading:d,sx:l,...t}){const r=()=>e.jsx(ie,{}),u=()=>s.map(i=>e.jsx(Pe,{product:i,detailsHref:E.product.details(i.id)},i.id));return e.jsxs(e.Fragment,{children:[e.jsx(f,{sx:[()=>({gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"}}),...Array.isArray(l)?l:[l]],...t,children:d?r():u()}),s.length>8&&e.jsx(fe,{count:8,sx:{mt:{xs:5,md:8},[`& .${be.ul}`]:{justifyContent:"center"}}})]})}function we({sort:s,onSort:d,sortOptions:l}){var i;const t=U(),r=(i=l.find(o=>o.value===s))==null?void 0:i.label,u=()=>e.jsx(G,{open:t.open,anchorEl:t.anchorEl,onClose:t.onClose,children:e.jsx(M,{children:l.map(o=>e.jsx(H,{selected:o.value===s,onClick:()=>{t.onClose(),d(o.value)},children:o.label},o.value))})});return e.jsxs(e.Fragment,{children:[e.jsxs(z,{disableRipple:!0,color:"inherit",onClick:t.onOpen,endIcon:e.jsx(P,{icon:t.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold"},children:["Sort by:",e.jsx(f,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:r})]}),u()]})}function Ie({redirectPath:s,sx:d}){const l=q(),[t,r]=g.useState(""),[u,i]=g.useState(null),o=V(t),{searchResults:x,searchLoading:m}=ce(o),c=g.useCallback(n=>{i(n),n&&l.push(s(n.id))},[s,l]),a=Q({matchFrom:"any",stringify:n=>`${n.name} ${n.sku}`}),p={width:320,[` .${k.listbox}`]:{[` .${k.option}`]:{p:0,[` .${K.root}`]:{p:.75,gap:1.5,width:1,display:"flex",alignItems:"center"}}}};return e.jsx(Y,{autoHighlight:!0,popupIcon:null,loading:m,options:x,value:u,filterOptions:a,onChange:(n,h)=>c(h),onInputChange:(n,h)=>r(h),getOptionLabel:n=>n.name,noOptionsText:e.jsx(se,{query:o}),isOptionEqualToValue:(n,h)=>n.id===h.id,slotProps:{paper:{sx:p}},sx:[{width:{xs:1,sm:260}},...Array.isArray(d)?d:[d]],renderInput:n=>e.jsx(D,{...n,placeholder:"Pesquisar...",slotProps:{input:{...n.InputProps,startAdornment:e.jsx(ee,{position:"start",children:e.jsx(P,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(e.Fragment,{children:[m?e.jsx(P,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,n.InputProps.endAdornment]})}}}),renderOption:(n,h,{inputValue:b})=>{const v=Z(h.name,b),j=J(h.name,v);return g.createElement("li",{...n,key:h.id},e.jsxs(T,{component:L,href:s(h.id),color:"inherit",underline:"none",children:[e.jsx(X,{alt:h.name,src:h.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,borderRadius:1}},h.id),e.jsx("div",{children:j.map((y,_)=>e.jsx($,{component:"span",color:y.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:y.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:y.text},_))},b)]}))}})}function Oe({filters:s,totalResults:d,sx:l}){const{state:t,setState:r,resetState:u}=s,i=g.useCallback(a=>{const p=t.gender.filter(n=>n!==a);r({gender:p})},[r,t.gender]),o=g.useCallback(()=>{r({category:"all"})},[r]),x=g.useCallback(a=>{const p=t.colors.filter(n=>n!==a);r({colors:p})},[r,t.colors]),m=g.useCallback(()=>{r({priceRange:[0,200]})},[r]),c=g.useCallback(()=>{r({rating:""})},[r]);return e.jsxs(je,{totalResults:d,onReset:()=>u(),sx:l,children:[e.jsx(S,{label:"Gender:",isShow:!!t.gender.length,children:t.gender.map(a=>g.createElement(C,{...F,key:a,label:a,onDelete:()=>i(a)}))}),e.jsx(S,{label:"Category:",isShow:t.category!=="all",children:e.jsx(C,{...F,label:t.category,onDelete:o})}),e.jsx(S,{label:"Colors:",isShow:!!t.colors.length,children:t.colors.map(a=>g.createElement(C,{...F,key:a,label:e.jsx(f,{sx:[p=>({ml:-.5,width:18,height:18,bgcolor:a,borderRadius:"50%",border:`solid 1px ${te(p.vars.palette.common.whiteChannel,.24)}`})]}),onDelete:()=>x(a)}))}),e.jsx(S,{label:"Price:",isShow:t.priceRange[0]!==0||t.priceRange[1]!==200,children:e.jsx(C,{...F,label:`$${t.priceRange[0]} - ${t.priceRange[1]}`,onDelete:m})}),e.jsx(S,{label:"Rating:",isShow:!!t.rating,children:e.jsx(C,{...F,label:t.rating,onDelete:c})})]})}function ke({products:s,loading:d}){const{state:l}=N(),t=re(),[r,u]=g.useState("featured"),i=ne({gender:[],colors:[],rating:"",category:"all",priceRange:[0,200]}),{state:o}=i,x=Ae({inputData:s,filters:o,sortBy:r}),m=o.gender.length>0||o.colors.length>0||o.rating!==""||o.category!=="all"||o.priceRange[0]!==0||o.priceRange[1]!==200,c=!x.length&&m,a=!d&&!s.length,p=()=>e.jsxs(f,{sx:{gap:3,display:"flex",justifyContent:"space-between",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"flex-end",sm:"center"}},children:[e.jsx(Ie,{redirectPath:b=>E.product.details(b)}),e.jsxs(f,{sx:{gap:1,flexShrink:0,display:"flex"},children:[e.jsx(pe,{filters:i,canReset:m,open:t.value,onOpen:t.onTrue,onClose:t.onFalse,options:{colors:Fe,ratings:Se,genders:ye,categories:["all",...Ce]}}),e.jsx(we,{sort:r,onSort:b=>u(b),sortOptions:Re})]})]}),n=()=>e.jsx(Oe,{filters:i,totalResults:x.length}),h=()=>e.jsx(ue,{filled:!0,sx:{py:10}});return e.jsxs(oe,{sx:{mb:15},children:[e.jsx(de,{totalItems:l.totalItems}),e.jsx($,{variant:"h4",sx:{my:{xs:3,md:5}},children:"Shop"}),e.jsxs(A,{spacing:2.5,sx:{mb:{xs:3,md:5}},children:[p(),m&&n()]}),(c||a)&&h(),e.jsx(ve,{products:x,loading:d})]})}function Ae({inputData:s,filters:d,sortBy:l}){const{gender:t,category:r,colors:u,priceRange:i,rating:o}=d,x=i[0],m=i[1];return l==="featured"&&(s=R(s,["totalSold"],["desc"])),l==="newest"&&(s=R(s,["createdAt"],["desc"])),l==="priceDesc"&&(s=R(s,["price"],["desc"])),l==="priceAsc"&&(s=R(s,["price"],["asc"])),t.length&&(s=s.filter(c=>c.gender.some(a=>t.includes(a)))),r!=="all"&&(s=s.filter(c=>c.category===r)),u.length&&(s=s.filter(c=>c.colors.some(a=>u.includes(a)))),(x!==0||m!==200)&&(s=s.filter(c=>c.price>=x&&c.price<=m)),o&&(s=s.filter(c=>{const a=p=>p==="up4Star"?4:p==="up3Star"?3:p==="up2Star"?2:1;return c.totalRatings>a(o)})),s}const Te={title:`Product shop - ${le.appName}`};function Je(){const{products:s,productsLoading:d}=he();return e.jsxs(e.Fragment,{children:[e.jsx(ae,{children:e.jsxs("title",{children:[" ",Te.title]})}),e.jsx(ke,{products:s,loading:d})]})}export{Je as default};
