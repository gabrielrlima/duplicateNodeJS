import{V as P,y as v,z as T,O as S,c5 as q,p as z,j as e,F as w,G as g,aP as F,B as x,K as s,T as o,de as k,a$ as D,e0 as U,aQ as V,S as C,f as A,N,bH as R,Q as a,a3 as E,aS as G,aT as I,aU as B,aq as Q,ek as W,cd as L,aV as Z}from"./index-D82XrlGq.js";import{s as m}from"./schema-helper-BcHhi0sG.js";import{C as f}from"./Card-Bw-3A9ev.js";const O=S({avatarUrl:m.file({message:"Avatar is required!"}),name:a().min(1,{message:"Name is required!"}),email:a().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),phoneNumber:m.phoneNumber({isValid:E}),country:m.nullableInput(a().min(1,{message:"Country is required!"}),{message:"Country is required!"}),address:a().min(1,{message:"Address is required!"}),company:a().min(1,{message:"Company is required!"}),state:a().min(1,{message:"State is required!"}),city:a().min(1,{message:"City is required!"}),role:a().min(1,{message:"Role is required!"}),zipCode:a().min(1,{message:"Zip code is required!"}),status:a(),isVerified:R()});function $({currentUser:t}){const p=P(),n={status:"",avatarUrl:null,isVerified:!0,name:"",email:"",phoneNumber:"",country:"",state:"",city:"",address:"",zipCode:"",company:"",role:""},d=v({mode:"onSubmit",resolver:T(O),defaultValues:n,values:t}),{reset:c,watch:h,control:b,handleSubmit:j,formState:{isSubmitting:y}}=d,i=h(),u=j(async r=>{try{await new Promise(l=>setTimeout(l,500)),c(),q.success(t?"Update success!":"Create success!"),p.push(z.dashboard.user.list),console.info("DATA",r)}catch(l){console.error(l)}});return e.jsx(w,{methods:d,onSubmit:u,children:e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{size:{xs:12,md:4},children:e.jsxs(f,{sx:{pt:10,pb:5,px:3},children:[t&&e.jsx(F,{color:i.status==="active"&&"success"||i.status==="banned"&&"error"||"warning",sx:{position:"absolute",top:24,right:24},children:i.status}),e.jsx(x,{sx:{mb:5},children:e.jsx(s.UploadAvatar,{name:"avatarUrl",maxSize:3145728,helperText:e.jsxs(o,{variant:"caption",sx:{mt:3,mx:"auto",display:"block",textAlign:"center",color:"text.disabled"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",e.jsx("br",{})," max size of ",k(3145728)]})})}),t&&e.jsx(D,{labelPlacement:"start",control:e.jsx(U,{name:"status",control:b,render:({field:r})=>e.jsx(V,{...r,checked:r.value!=="active",onChange:l=>r.onChange(l.target.checked?"banned":"active")})}),label:e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),e.jsx(o,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}}),e.jsx(s.Switch,{name:"isVerified",labelPlacement:"start",label:e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"subtitle2",sx:{mb:.5},children:"Email verified"}),e.jsx(o,{variant:"body2",sx:{color:"text.secondary"},children:"Disabling this will automatically send the user a verification email"})]}),sx:{mx:0,width:1,justifyContent:"space-between"}}),t&&e.jsx(C,{sx:{mt:3,alignItems:"center",justifyContent:"center"},children:e.jsx(A,{variant:"soft",color:"error",children:"Delete user"})})]})}),e.jsx(g,{size:{xs:12,md:8},children:e.jsxs(f,{sx:{p:3},children:[e.jsxs(x,{sx:{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[e.jsx(s.Text,{name:"name",label:"Full name"}),e.jsx(s.Text,{name:"email",label:"Email address"}),e.jsx(s.Phone,{name:"phoneNumber",label:"Phone number",country:t?void 0:"DE"}),e.jsx(s.CountrySelect,{fullWidth:!0,name:"country",label:"Country",placeholder:"Choose a country"}),e.jsx(s.Text,{name:"state",label:"State/region"}),e.jsx(s.Text,{name:"city",label:"City"}),e.jsx(s.Text,{name:"address",label:"Address"}),e.jsx(s.Text,{name:"zipCode",label:"Zip/code"}),e.jsx(s.Text,{name:"company",label:"Company"}),e.jsx(s.Text,{name:"role",label:"Role"})]}),e.jsx(C,{sx:{mt:3,alignItems:"flex-end"},children:e.jsx(N,{type:"submit",variant:"contained",loading:y,children:t?"Save changes":"Create user"})})]})})]})})}const H=S({name:a().min(1,{message:"Name is required!"}),email:a().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),phoneNumber:m.phoneNumber({isValid:E}),country:m.nullableInput(a().min(1,{message:"Country is required!"}),{message:"Country is required!"}),state:a().min(1,{message:"State is required!"}),city:a().min(1,{message:"City is required!"}),address:a().min(1,{message:"Address is required!"}),zipCode:a().min(1,{message:"Zip code is required!"}),company:a().min(1,{message:"Company is required!"}),role:a().min(1,{message:"Role is required!"}),status:a()});function J({currentUser:t,open:p,onClose:n}){const d={name:"",email:"",phoneNumber:"",address:"",country:"",state:"",city:"",zipCode:"",status:"",company:"",role:""},c=v({mode:"all",resolver:T(H),defaultValues:d,values:t}),{reset:h,handleSubmit:b,formState:{isSubmitting:j}}=c,y=b(async i=>{const u=new Promise(r=>setTimeout(r,1e3));try{h(),n(),q.promise(u,{loading:"Loading...",success:"Update success!",error:"Update error!"}),await u,console.info("DATA",i)}catch(r){console.error(r)}});return e.jsxs(G,{fullWidth:!0,maxWidth:!1,open:p,onClose:n,PaperProps:{sx:{maxWidth:720}},children:[e.jsx(I,{children:"Quick update"}),e.jsxs(w,{methods:c,onSubmit:y,children:[e.jsxs(B,{children:[e.jsx(Q,{variant:"outlined",severity:"info",sx:{mb:3},children:"Account is waiting for confirmation"}),e.jsxs(x,{sx:{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[e.jsx(s.Select,{name:"status",label:"Status",children:W.map(i=>e.jsx(L,{value:i.value,children:i.label},i.value))}),e.jsx(x,{sx:{display:{xs:"none",sm:"block"}}}),e.jsx(s.Text,{name:"name",label:"Full name"}),e.jsx(s.Text,{name:"email",label:"Email address"}),e.jsx(s.Phone,{name:"phoneNumber",label:"Phone number"}),e.jsx(s.CountrySelect,{fullWidth:!0,name:"country",label:"Country",placeholder:"Choose a country"}),e.jsx(s.Text,{name:"state",label:"State/region"}),e.jsx(s.Text,{name:"city",label:"City"}),e.jsx(s.Text,{name:"address",label:"Address"}),e.jsx(s.Text,{name:"zipCode",label:"Zip/code"}),e.jsx(s.Text,{name:"company",label:"Company"}),e.jsx(s.Text,{name:"role",label:"Role"})]})]}),e.jsxs(Z,{children:[e.jsx(A,{variant:"outlined",onClick:n,children:"Cancel"}),e.jsx(N,{type:"submit",variant:"contained",loading:j,children:"Update"})]})]})]})}export{J as U,$ as a};
