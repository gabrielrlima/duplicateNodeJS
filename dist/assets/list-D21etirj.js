import{cU as je,a9 as Ee,bk as ve,r,b0 as xe,j as e,a1 as se,I as S,B as g,T as j,aJ as Ce,aK as Se,D as he,a$ as ke,b1 as fe,b2 as be,b3 as te,R as ge,p as ae,f as ne,bo as me,ax as Me,bp as Ae,S as U,a_ as ye,b8 as ue,bc as v,au as w,bq as T,br as I,Y as De,bd as Pe,f5 as Te,f6 as Ie,f7 as Oe,f8 as Re,cV as ie,eG as Fe,bj as we,a0 as Ne,f9 as $e,fa as Le,fb as _e,fc as Ue,fd as Be,fe as We,H as ze,C as Ge}from"./index-cNRh_qft.js";import{E as He}from"./empty-content-BzM3Az2z.js";import{u as Ve}from"./index-ChnT1xRF.js";import{C as Je}from"./Card-C_-31fGp.js";import{P as qe,p as Ke}from"./Pagination-tgO33XKK.js";import{F as Ye,a as A,c as C}from"./filters-result-BTXXEhsP.js";import"./empreendimento-new-edit-form-xY2RBQ4E.js";import"./carousel-arrow-buttons-DjkKkmSg.js";import"./html-to-markdown-wPkGdeP1.js";import"./index-BDJJM9HW.js";import"./LastPage-ChYIEhQh.js";import"./schema-helper-D18en8Wv.js";import"./CardHeader-CZZHKPlX.js";import"./AccordionDetails-C25973Gc.js";const Xe={revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1};function Ze(){const{currentRealEstate:o}=je(),h=o?`${Ee.empreendimento.list}?real_estate_id=${o.id}`:null,{data:f,isLoading:s,error:n,isValidating:E}=Ve(h,ve,Xe);return r.useMemo(()=>({empreendimentos:(f==null?void 0:f.empreendimentos)||[],empreendimentosLoading:s,empreendimentosError:n,empreendimentosValidating:E,empreendimentosEmpty:!s&&!E&&(!(f!=null&&f.empreendimentos)||f.empreendimentos.length===0)}),[f==null?void 0:f.empreendimentos,n,s,E])}function Qe({empreendimento:o,editHref:h,sx:f,...s}){var d,y,k;const n=xe(),{totalUnidades:E,unidadesVendidas:l}=r.useMemo(()=>{const u=()=>{var D;const M=((D=o.tipoEmpreendimento)==null?void 0:D.toLowerCase())||"";return M.includes("comercial")?Math.floor(Math.random()*50)+30:M.includes("misto")?Math.floor(Math.random()*100)+80:Math.floor(Math.random()*120)+60},O=()=>{var D;const M=((D=o.status)==null?void 0:D.toLowerCase())||"";return M.includes("lançamento")?Math.random()*.2+.1:M.includes("construção")?Math.random()*.3+.4:M.includes("pronto")?Math.random()*.2+.7:M.includes("entregue")?Math.random()*.05+.95:Math.random()*.3+.3},P=u(),R=O(),F=Math.floor(P*R);return{totalUnidades:P,unidadesVendidas:F}},[o.tipoEmpreendimento,o.status]),i=()=>e.jsx(fe,{open:n.open,anchorEl:n.anchorEl,onClose:n.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(be,{children:[e.jsxs(te,{onClick:()=>{n.onClose(),o.book&&window.open(o.book,"_blank")},disabled:!o.book,children:[e.jsx(S,{icon:"solar:download-bold"}),"Baixar book"]}),e.jsxs(te,{component:ge,href:h,onClick:()=>n.onClose(),children:[e.jsx(S,{icon:"solar:pen-bold"}),"Editar"]})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(Je,{sx:f,...s,children:[e.jsx(se,{onClick:n.onOpen,sx:{position:"absolute",top:8,right:8},children:e.jsx(S,{icon:"eva:more-vertical-fill"})}),e.jsxs(g,{sx:{p:3,pb:2},children:[e.jsx(j,{variant:"overline",sx:{display:"block",mb:2,color:"text.secondary",fontWeight:600,letterSpacing:1.2},children:((d=o.construtora)==null?void 0:d.name)||"Construtora"}),e.jsx(Ce,{sx:{mb:1},primary:e.jsx(j,{variant:"subtitle1",color:"inherit",sx:{height:"2.5rem",lineHeight:1.25,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:o.nome}),secondary:`Iniciado em: ${Se(o.criadoEm)}`,slotProps:{secondary:{sx:{mt:1,typography:"caption",color:"text.secondary"}}}}),e.jsxs(g,{sx:{gap:.5,display:"flex",alignItems:"center",color:"success.main",typography:"caption"},children:[e.jsx(S,{width:16,icon:"solar:cart-check-bold"}),`Vendidas ${l} de ${E} disponíveis`]})]}),e.jsx(he,{sx:{borderStyle:"dashed"}}),e.jsx(g,{sx:{p:3,rowGap:1.5,display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:[{label:`${((y=o.plantas)==null?void 0:y.length)||0} ${(((k=o.plantas)==null?void 0:k.length)||0)===1?"planta":"plantas"}`,icon:e.jsx(S,{width:16,icon:"solar:buildings-3-bold",sx:{flexShrink:0}})},{label:"Entrega 2026",icon:e.jsx(S,{width:16,icon:"solar:clock-circle-bold",sx:{flexShrink:0}})},{label:`m² ${ke(8312)}`,icon:e.jsx(S,{width:16,icon:"solar:banknote-2-bold",sx:{flexShrink:0}})},{label:`${o.cidade||"São Paulo"}, ${o.estado||"SP"}`,icon:e.jsx(S,{width:16,icon:"solar:map-point-bold",sx:{flexShrink:0}})}].map(u=>e.jsxs(g,{sx:{gap:.5,minWidth:0,flexShrink:0,display:"flex",alignItems:"center",color:"text.secondary"},children:[u.icon,e.jsx(j,{variant:"caption",noWrap:!0,children:u.label})]},u.label))})]}),i()]})}function ea({empreendimentos:o}){return e.jsxs(e.Fragment,{children:[e.jsx(g,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},children:o.map(h=>e.jsx(Qe,{empreendimento:h,editHref:ae.dashboard.empreendimentos.edit(h.id)},h.id))}),o.length>8&&e.jsx(qe,{count:8,sx:{mt:{xs:8,md:8},[`& .${Ke.ul}`]:{justifyContent:"center"}}})]})}function aa({sort:o,onSort:h,sortOptions:f}){const s=xe(),n=f.find(i=>i.value===o),E=(n==null?void 0:n.label)||o,l=()=>e.jsx(fe,{open:s.open,anchorEl:s.anchorEl,onClose:s.onClose,children:e.jsx(be,{children:f.map(i=>e.jsx(te,{selected:i.value===o,onClick:()=>{s.onClose(),h(i.value)},children:i.label},i.value))})});return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{disableRipple:!0,color:"inherit",onClick:s.onOpen,endIcon:e.jsx(S,{icon:s.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold"},children:["Ordenar por:",e.jsx(g,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold",textTransform:"capitalize"},children:E})]}),l()]})}function ia({open:o,canReset:h,onOpen:f,onClose:s,onResetSearch:n,filters:E,options:l}){const{state:i,setState:d,resetState:y}=E,k=()=>{let a=0;return i.tipos.length>0&&a++,i.status!=="all"&&a++,i.caracteristicas.length>0&&a++,i.cidade.length>0&&a++,i.estado.length>0&&a++,i.diferenciaisEdificio.length>0&&a++,i.diferenciaisApartamento.length>0&&a++,(i.areaMinima!==null||i.areaMaxima!==null)&&a++,(i.precoMinimo!==null||i.precoMaximo!==null)&&a++,i.tipoApartamento.length>0&&a++,i.tipoSacada.length>0&&a++,i.oportunidadesDisponiveis.length>0&&a++,i.tiposUnidade.length>0&&a++,i.beneficios.length>0&&a++,a},u=r.useCallback(a=>{d({status:a})},[d]),O=r.useCallback(a=>{d({cidade:a})},[d]),P=r.useCallback(a=>{d({estado:a})},[d]),R=r.useCallback(a=>{const c=i.tipos.includes(a)?i.tipos.filter(x=>x!==a):[...i.tipos,a];d({tipos:c})},[d,i.tipos]),F=r.useCallback(a=>{const c=i.caracteristicas.includes(a)?i.caracteristicas.filter(x=>x!==a):[...i.caracteristicas,a];d({caracteristicas:c})},[d,i.caracteristicas]),M=r.useCallback(a=>{const c=i.tiposUnidade.includes(a)?i.tiposUnidade.filter(x=>x!==a):[...i.tiposUnidade,a];d({tiposUnidade:c})},[d,i.tiposUnidade]),D=r.useCallback(a=>{const c=i.beneficios.includes(a)?i.beneficios.filter(x=>x!==a):[...i.beneficios,a];d({beneficios:c})},[d,i.beneficios]),N=r.useCallback(a=>{const c=i.diferenciaisEdificio.includes(a)?i.diferenciaisEdificio.filter(x=>x!==a):[...i.diferenciaisEdificio,a];d({diferenciaisEdificio:c})},[d,i.diferenciaisEdificio]),t=r.useCallback(a=>{const c=i.diferenciaisApartamento.includes(a)?i.diferenciaisApartamento.filter(x=>x!==a):[...i.diferenciaisApartamento,a];d({diferenciaisApartamento:c})},[d,i.diferenciaisApartamento]),b=r.useCallback(a=>{const c=i.tipoApartamento.includes(a)?i.tipoApartamento.filter(x=>x!==a):[...i.tipoApartamento,a];d({tipoApartamento:c})},[d,i.tipoApartamento]),m=r.useCallback(a=>{const c=i.tipoSacada.includes(a)?i.tipoSacada.filter(x=>x!==a):[...i.tipoSacada,a];d({tipoSacada:c})},[d,i.tipoSacada]),p=r.useCallback(a=>{const c=i.oportunidadesDisponiveis.includes(a)?i.oportunidadesDisponiveis.filter(x=>x!==a):[...i.oportunidadesDisponiveis,a];d({oportunidadesDisponiveis:c})},[d,i.oportunidadesDisponiveis]),L=r.useCallback((a,c)=>{const x=c===""?null:Number(c);d({[a]:x})},[d]),_=r.useCallback((a,c)=>{const x=c===""?null:Number(c.replace(/[^0-9]/g,""));d({[a]:x})},[d]),B=()=>e.jsxs(e.Fragment,{children:[e.jsxs(g,{sx:{py:2,pr:1,pl:2.5,display:"flex",alignItems:"center"},children:[e.jsx(j,{variant:"h6",sx:{flexGrow:1},children:"Filtros"}),e.jsx(ye,{title:"Limpar",children:e.jsx(se,{onClick:()=>{y(),n==null||n()},children:e.jsx(me,{color:"error",variant:"dot",invisible:!h,children:e.jsx(S,{icon:"solar:restart-bold"})})})}),e.jsx(se,{onClick:s,children:e.jsx(S,{icon:"mingcute:close-line"})})]}),e.jsx(he,{sx:{borderStyle:"dashed"}})]}),W=()=>e.jsxs(g,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1.5},children:"Localização"}),e.jsxs(U,{spacing:2,children:[e.jsx(ue,{multiple:!0,disableCloseOnSelect:!0,options:["São Paulo","Rio de Janeiro","Belo Horizonte","Brasília","Salvador","Fortaleza","Curitiba","Recife","Porto Alegre","Manaus"],value:i.cidade,onChange:(a,c)=>O(c),renderInput:a=>e.jsx(w,{...a,placeholder:i.cidade.length?"+ Cidades":"Selecionar cidades"}),renderOption:(a,c)=>r.createElement("li",{...a,key:c},c),renderTags:(a,c)=>a.map((x,$)=>r.createElement(v,{...c({index:$}),key:x,label:x,size:"small",color:"info",variant:"soft"}))}),e.jsx(ue,{multiple:!0,disableCloseOnSelect:!0,options:["SP","RJ","MG","DF","BA","CE","PR","PE","RS","AM","SC","GO","MA","PB","PA","ES","PI","AL","RN","MT","MS","SE","RO","AC","AP","RR","TO"],value:i.estado,onChange:(a,c)=>P(c),renderInput:a=>e.jsx(w,{...a,placeholder:i.estado.length?"+ Estados":"Selecionar estados"}),renderOption:(a,c)=>r.createElement("li",{...a,key:c},c),renderTags:(a,c)=>a.map((x,$)=>r.createElement(v,{...c({index:$}),key:x,label:x,size:"small",color:"info",variant:"soft"}))})]})]}),z=()=>e.jsxs(g,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1},children:"Diferenciais do edifício"}),l.diferenciaisEdificio.map(a=>e.jsx(T,{control:e.jsx(I,{checked:i.diferenciaisEdificio.includes(a),onClick:()=>N(a)}),label:a},a))]}),G=()=>e.jsxs(g,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1},children:"Diferenciais do apartamento"}),l.diferenciaisApartamento.map(a=>e.jsx(T,{control:e.jsx(I,{checked:i.diferenciaisApartamento.includes(a),onClick:()=>t(a)}),label:a},a))]}),H=()=>e.jsxs(g,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1.5},children:"Área"}),e.jsxs(U,{direction:"row",spacing:1,children:[e.jsx(w,{fullWidth:!0,label:"Área mínima",placeholder:"0 m²",type:"number",value:i.areaMinima||"",onChange:a=>L("areaMinima",a.target.value),InputProps:{endAdornment:e.jsx(j,{variant:"body2",sx:{color:"text.secondary"},children:"m²"})}}),e.jsx(w,{fullWidth:!0,label:"Área máxima",placeholder:"400 m²",type:"number",value:i.areaMaxima||"",onChange:a=>L("areaMaxima",a.target.value),InputProps:{endAdornment:e.jsx(j,{variant:"body2",sx:{color:"text.secondary"},children:"m²"})}})]})]}),V=()=>e.jsxs(g,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1.5},children:"Faixa de preço"}),e.jsxs(U,{direction:"row",spacing:1,children:[e.jsx(w,{fullWidth:!0,label:"Preço Mínimo",placeholder:"R$ 0",value:i.precoMinimo?`R$ ${i.precoMinimo.toLocaleString()}`:"",onChange:a=>_("precoMinimo",a.target.value)}),e.jsx(w,{fullWidth:!0,label:"Preço Máximo",placeholder:"R$ 5.000.000",value:i.precoMaximo?`R$ ${i.precoMaximo.toLocaleString()}`:"",onChange:a=>_("precoMaximo",a.target.value)})]})]}),J=()=>e.jsxs(g,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1},children:"Status do imóvel"}),l.status.map(a=>e.jsx(T,{control:e.jsx(I,{checked:a===i.status,onClick:()=>u(a)}),label:a,sx:{...a==="all"&&{textTransform:"capitalize"}}},a))]}),q=()=>e.jsxs(g,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1},children:"Oportunidades disponíveis"}),l.oportunidadesDisponiveis.map(a=>e.jsx(T,{control:e.jsx(I,{checked:i.oportunidadesDisponiveis.includes(a),onClick:()=>p(a)}),label:a},a))]}),K=()=>e.jsxs(g,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1},children:"Tipo de apartamento"}),l.tipoApartamento.map(a=>e.jsx(T,{control:e.jsx(I,{checked:i.tipoApartamento.includes(a),onClick:()=>b(a)}),label:a},a))]}),Y=()=>e.jsxs(g,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1},children:"Tipo de sacada (varanda)"}),l.tipoSacada.map(a=>e.jsx(T,{control:e.jsx(I,{checked:i.tipoSacada.includes(a),onClick:()=>m(a)}),label:a},a))]}),X=()=>e.jsxs(g,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1},children:"Tipo de empreendimento"}),l.tipos.map(a=>e.jsx(T,{control:e.jsx(I,{checked:i.tipos.includes(a),onClick:()=>R(a)}),label:a},a))]}),Z=()=>e.jsxs(g,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1},children:"Características"}),l.caracteristicas.map(a=>e.jsx(T,{control:e.jsx(I,{checked:i.caracteristicas.includes(a),onClick:()=>F(a)}),label:a},a))]}),Q=()=>e.jsxs(g,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1},children:"Tipos de unidade"}),l.tiposUnidade.map(a=>e.jsx(T,{control:e.jsx(I,{checked:i.tiposUnidade.includes(a),onClick:()=>M(a)}),label:a},a))]}),ee=()=>e.jsxs(g,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1},children:"Benefícios"}),l.beneficios.map(a=>e.jsx(T,{control:e.jsx(I,{checked:i.beneficios.includes(a),onClick:()=>D(a)}),label:a},a))]});return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{disableRipple:!0,color:h?"primary":"inherit",variant:h?"contained":"text",endIcon:e.jsx(me,{color:"error",variant:"dot",invisible:!h,children:e.jsx(S,{icon:"ic:round-filter-list"})}),onClick:f,sx:{...h&&{bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}}},children:["Filtros",h&&e.jsx(g,{component:"span",sx:{ml:1,px:1,py:.25,bgcolor:"rgba(255, 255, 255, 0.2)",borderRadius:1,fontSize:"0.75rem",fontWeight:600},children:k()})]}),e.jsxs(Me,{anchor:"right",open:o,onClose:s,slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:{xs:"100vw",sm:320},maxWidth:320}},children:[B(),e.jsx(Ae,{sx:{px:{xs:2,sm:2.5},py:{xs:2,sm:3}},children:e.jsxs(U,{spacing:{xs:2.5,sm:3},children:[W(),X(),J(),V(),H(),Q(),Z(),K(),Y(),ee(),q(),z(),G()]})})]})]})}function sa({filters:o,totalResults:h,sx:f}){const{state:s,setState:n,resetState:E}=o,l=r.useCallback(t=>{const b=s.tipos.filter(m=>m!==t);n({tipos:b})},[n,s.tipos]),i=r.useCallback(()=>{n({status:"all"})},[n]),d=r.useCallback(t=>{const b=s.caracteristicas.filter(m=>m!==t);n({caracteristicas:b})},[n,s.caracteristicas]),y=r.useCallback(t=>{const b=s.cidade.filter(m=>m!==t);n({cidade:b})},[n,s.cidade]),k=r.useCallback(t=>{const b=s.estado.filter(m=>m!==t);n({estado:b})},[n,s.estado]),u=r.useCallback(t=>{const b=s.faixaPreco.filter(m=>m!==t);n({faixaPreco:b})},[n,s.faixaPreco]),O=r.useCallback(t=>{const b=s.diferenciaisEdificio.filter(m=>m!==t);n({diferenciaisEdificio:b})},[n,s.diferenciaisEdificio]),P=r.useCallback(t=>{const b=s.diferenciaisApartamento.filter(m=>m!==t);n({diferenciaisApartamento:b})},[n,s.diferenciaisApartamento]),R=r.useCallback(t=>{const b=s.tipoApartamento.filter(m=>m!==t);n({tipoApartamento:b})},[n,s.tipoApartamento]),F=r.useCallback(t=>{const b=s.tipoSacada.filter(m=>m!==t);n({tipoSacada:b})},[n,s.tipoSacada]),M=r.useCallback(t=>{const b=s.oportunidadesDisponiveis.filter(m=>m!==t);n({oportunidadesDisponiveis:b})},[n,s.oportunidadesDisponiveis]),D=r.useCallback(t=>{n({[t]:null})},[n]),N=r.useCallback(t=>{n({[t]:null})},[n]);return e.jsxs(Ye,{totalResults:h,onReset:()=>E(),sx:f,children:[e.jsx(A,{label:"Tipos:",isShow:!!s.tipos.length,children:s.tipos.map(t=>r.createElement(v,{...C,key:t,label:t,onDelete:()=>l(t)}))}),e.jsx(A,{label:"Status:",isShow:s.status!=="all",children:e.jsx(v,{...C,label:s.status,onDelete:i})}),e.jsx(A,{label:"Características:",isShow:!!s.caracteristicas.length,children:s.caracteristicas.map(t=>r.createElement(v,{...C,key:t,label:t,onDelete:()=>d(t)}))}),e.jsx(A,{label:"Cidades:",isShow:!!s.cidade.length,children:s.cidade.map(t=>r.createElement(v,{...C,key:t,label:t,onDelete:()=>y(t)}))}),e.jsx(A,{label:"Estados:",isShow:!!s.estado.length,children:s.estado.map(t=>r.createElement(v,{...C,key:t,label:t,onDelete:()=>k(t)}))}),e.jsx(A,{label:"Faixa de preço:",isShow:!!s.faixaPreco.length,children:s.faixaPreco.map(t=>r.createElement(v,{...C,key:t,label:t,onDelete:()=>u(t)}))}),e.jsx(A,{label:"Diferenciais do edifício:",isShow:!!s.diferenciaisEdificio.length,children:s.diferenciaisEdificio.map(t=>r.createElement(v,{...C,key:t,label:t,onDelete:()=>O(t)}))}),e.jsx(A,{label:"Diferenciais do apartamento:",isShow:!!s.diferenciaisApartamento.length,children:s.diferenciaisApartamento.map(t=>r.createElement(v,{...C,key:t,label:t,onDelete:()=>P(t)}))}),e.jsx(A,{label:"Tipo de apartamento:",isShow:!!s.tipoApartamento.length,children:s.tipoApartamento.map(t=>r.createElement(v,{...C,key:t,label:t,onDelete:()=>R(t)}))}),e.jsx(A,{label:"Tipo de sacada:",isShow:!!s.tipoSacada.length,children:s.tipoSacada.map(t=>r.createElement(v,{...C,key:t,label:t,onDelete:()=>F(t)}))}),e.jsx(A,{label:"Oportunidades disponíveis:",isShow:!!s.oportunidadesDisponiveis.length,children:s.oportunidadesDisponiveis.map(t=>r.createElement(v,{...C,key:t,label:t,onDelete:()=>M(t)}))}),e.jsxs(A,{label:"Área:",isShow:s.areaMinima!==null||s.areaMaxima!==null,children:[s.areaMinima!==null&&e.jsx(v,{...C,label:`Área mín: ${s.areaMinima}m²`,onDelete:()=>D("areaMinima")}),s.areaMaxima!==null&&e.jsx(v,{...C,label:`Área máx: ${s.areaMaxima}m²`,onDelete:()=>D("areaMaxima")})]}),e.jsxs(A,{label:"Preço:",isShow:s.precoMinimo!==null||s.precoMaximo!==null,children:[s.precoMinimo!==null&&e.jsx(v,{...C,label:`Preço mín: R$ ${s.precoMinimo.toLocaleString()}`,onDelete:()=>N("precoMinimo")}),s.precoMaximo!==null&&e.jsx(v,{...C,label:`Preço máx: R$ ${s.precoMaximo.toLocaleString()}`,onDelete:()=>N("precoMaximo")})]})]})}function ta(){const o=De(),[h,f]=r.useState("latest"),[s,n]=r.useState(""),{empreendimentos:E,empreendimentosLoading:l,empreendimentosError:i}=Ze(),[d,y]=r.useState([]),k=Pe({tipos:[],status:"all",caracteristicas:[],cidade:[],estado:[],faixaPreco:[],diferenciaisEdificio:[],diferenciaisApartamento:[],areaMinima:null,areaMaxima:null,precoMinimo:null,precoMaximo:null,tipoApartamento:[],tipoSacada:[],oportunidadesDisponiveis:[],tiposUnidade:[],beneficios:[]}),{state:u}=k;r.useEffect(()=>{if(E&&E.length>0){const m=E.map(p=>{var L,_,B,W,z,G,H,V,J,q,K,Y,X,Z,Q,ee,a,c,x,$,oe,re,le,ce,de,pe;return{id:p.id,nome:p.name||"Empreendimento sem nome",titulo:p.name||"Empreendimento sem título",descricao:p.description||"Sem descrição",book:((L=p.media)==null?void 0:L.brochure)||"",avatar:((B=(_=p.media)==null?void 0:_.images)==null?void 0:B[0])||"",publish:p.createdAt||new Date().toISOString(),status:p.status==="planning"?"planejamento":p.status==="construction"?"construcao":p.status==="completed"?"concluido":p.status==="delivered"?"entregue":"inativo",caracteristicas:[...(W=p.amenities)!=null&&W.pool?["Piscina"]:[],...(z=p.amenities)!=null&&z.gym?["Academia"]:[],...(G=p.amenities)!=null&&G.playground?["Playground"]:[],...(H=p.amenities)!=null&&H.partyRoom?["Salão de festas"]:[],...(V=p.amenities)!=null&&V.barbecueArea?["Churrasqueira"]:[],...(J=p.amenities)!=null&&J.garden?["Jardim"]:[],...(q=p.amenities)!=null&&q.security?["Segurança"]:[]],totalVisualizacoes:((K=p.stats)==null?void 0:K.views)||0,tipoEmpreendimento:p.type==="residential"?"residencial":p.type==="commercial"?"comercial":p.type==="mixed"?"misto":"industrial",preco:{type:"venda",valor:((Y=p.pricing)==null?void 0:Y.averagePrice)||0,negociavel:!0},beneficios:((Z=(X=p.pricing)==null?void 0:X.financing)==null?void 0:Z.governmentPrograms)||[],cidade:((Q=p.location)==null?void 0:Q.city)||"Não informado",estado:((ee=p.location)==null?void 0:ee.state)||"Não informado",diferenciaisEdificio:[...(a=p.amenities)!=null&&a.concierge?["Portaria 24h"]:[],...(c=p.amenities)!=null&&c.security?["Segurança"]:[],...(x=p.amenities)!=null&&x.elevators?["Elevadores"]:[]],diferenciaisApartamento:[...($=p.amenities)!=null&&$.airConditioner?["Ar condicionado"]:[],...(oe=p.amenities)!=null&&oe.balcony?["Sacada"]:[]],tipoApartamento:["Padrão"],tipoSacada:["Comum"],oportunidadesDisponiveis:["Disponível"],construtora:{name:((re=p.developer)==null?void 0:re.name)||"Não informado",logo:"",phoneNumber:((le=p.developer)==null?void 0:le.phone)||"",fullAddress:((ce=p.location)==null?void 0:ce.address)||"Não informado"},criadoEm:p.createdAt,tiposUnidade:["Apartamento"],cronogramaEntrega:[`${((de=p.timeline)==null?void 0:de.constructionProgress)||0}% concluído`],dataEntrega:(pe=p.timeline)==null?void 0:pe.deliveryDate,interessados:[],plantas:[]}});y(m)}else y([])},[E]);const O=na({inputData:d,filters:u,sortBy:h,searchQuery:s}),P=!!s||!!u.tipos.length||u.status!=="all"||!!u.caracteristicas.length||!!u.cidade.length||!!u.estado.length||!!u.faixaPreco.length||!!u.diferenciaisEdificio.length||!!u.diferenciaisApartamento.length||u.areaMinima!==null||u.areaMaxima!==null||u.precoMinimo!==null||u.precoMaximo!==null||!!u.tipoApartamento.length||!!u.tipoSacada.length||!!u.oportunidadesDisponiveis.length||!!u.tiposUnidade.length||!!u.beneficios.length,R=!O.length&&P,F=!d.length&&!l&&!i,M=r.useCallback(m=>{f(m)},[]),D={tipos:Re.map(m=>m.value),caracteristicas:We,status:Oe.map(m=>m.value),faixaPreco:["Até R$ 300.000","R$ 300.000 - R$ 500.000","R$ 500.000 - R$ 1.000.000","Acima de R$ 1.000.000"],diferenciaisEdificio:Be,diferenciaisApartamento:Ue,tipoApartamento:_e,tipoSacada:Le,oportunidadesDisponiveis:$e,tiposUnidade:Ie.map(m=>m.value),beneficios:Te.map(m=>m.value)},N=[{value:"latest",label:"Mais recentes"},{value:"oldest",label:"Mais antigos"},{value:"nome",label:"Nome"},{value:"mais-barato",label:"Mais barato"},{value:"mais-caro",label:"Mais caro"},{value:"cidade",label:"Cidade"},{value:"status",label:"Status"}],t=()=>e.jsxs(g,{sx:{gap:3,display:"flex",justifyContent:"space-between",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"flex-end",sm:"center"}},children:[e.jsx(w,{placeholder:"Pesquisar empreendimentos...",value:s,onChange:m=>n(m.target.value),sx:{width:{xs:1,sm:260}},slotProps:{input:{startAdornment:e.jsx(Ne,{position:"start",children:e.jsx(S,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})})}}}),e.jsxs(g,{sx:{gap:1,flexShrink:0,display:"flex"},children:[e.jsx(ia,{filters:k,canReset:P,open:o.value,onOpen:o.onTrue,onClose:o.onFalse,onResetSearch:()=>n(""),options:D}),e.jsx(aa,{sort:h,onSort:M,sortOptions:N})]})]}),b=()=>e.jsx(sa,{filters:k,totalResults:O.length});return l?e.jsx(ie,{children:e.jsx(Fe,{})}):i?e.jsx(ie,{children:e.jsxs(j,{variant:"h6",color:"error",sx:{textAlign:"center",py:5},children:["Erro ao carregar empreendimentos: ",i.message]})}):e.jsxs(ie,{children:[e.jsx(we,{heading:"Todos os empreendimentos",links:[{name:"Dashboard",href:ae.dashboard.root},{name:"Empreendimentos",href:ae.dashboard.empreendimentos.root},{name:"Lista"}],action:e.jsx(ne,{component:ge,href:ae.dashboard.empreendimentos.new,variant:"contained",startIcon:e.jsx(S,{icon:"mingcute:add-line"}),children:"Novo empreendimento"}),sx:{mb:{xs:3,md:5}}}),e.jsxs(U,{spacing:2.5,sx:{mb:{xs:3,md:5}},children:[t(),P&&b()]}),(R||F)&&e.jsx(He,{filled:!0,title:"Nenhum empreendimento registrado",description:"Não há empreendimentos cadastrados no sistema ainda.",sx:{py:10}}),!R&&!F&&e.jsx(ea,{empreendimentos:O})]})}function na({inputData:o,filters:h,sortBy:f,searchQuery:s}){const{tipos:n,status:E}=h;return s&&(o=o.filter(l=>l.titulo.toLowerCase().includes(s.toLowerCase())||l.nome.toLowerCase().includes(s.toLowerCase())||l.cidade.toLowerCase().includes(s.toLowerCase())||l.estado.toLowerCase().includes(s.toLowerCase()))),n.length&&(o=o.filter(l=>n.includes(l.tipoEmpreendimento))),E!=="all"&&(o=o.filter(l=>l.status===E)),h.caracteristicas.length&&(o=o.filter(l=>h.caracteristicas.some(i=>l.caracteristicas.includes(i)))),h.tiposUnidade.length&&(o=o.filter(l=>h.tiposUnidade.some(i=>l.tiposUnidade.includes(i)))),h.beneficios.length&&(o=o.filter(l=>h.beneficios.some(i=>l.beneficios.includes(i)))),o=o.sort((l,i)=>{var d,y,k,u;switch(f){case"latest":return new Date(i.criadoEm||"").getTime()-new Date(l.criadoEm||"").getTime();case"oldest":return new Date(l.criadoEm||"").getTime()-new Date(i.criadoEm||"").getTime();case"nome":return l.nome.localeCompare(i.nome);case"mais-barato":return(((d=l.preco)==null?void 0:d.valor)||0)-(((y=i.preco)==null?void 0:y.valor)||0);case"mais-caro":return(((k=i.preco)==null?void 0:k.valor)||0)-(((u=l.preco)==null?void 0:u.valor)||0);case"cidade":return l.cidade.localeCompare(i.cidade);case"status":return l.status.localeCompare(i.status);default:return 0}}),o}const oa={title:`Empreendimentos | Dashboard - ${Ge.appName}`};function va(){return e.jsxs(e.Fragment,{children:[e.jsx(ze,{children:e.jsxs("title",{children:[" ",oa.title]})}),e.jsx(ta,{})]})}export{va as default};
