import{ca as M,j as s,aj as A,B as x,I as l,aP as F,T as S,a1 as G,cb as L,cc as H,cd as w,r as p,aS as z,f as h,S as P,au as R,a0 as W,ck as _,Y as f,G as n,D as T,aM as $,aN as O,aO as q,aT as J,aU as K,aV as U,aJ as V,aK as Y,cG as Q,L as X,eE as Z,eF as ss,eG as es,eH as rs,H as ns,C as is}from"./index-D82XrlGq.js";import{C as I}from"./Card-Bw-3A9ev.js";import{C as k}from"./CardHeader-BbCWHGKm.js";import{P as as}from"./payment-new-card-form-B2KsxaNe.js";import"./account-change-password-BSSBb4mp.js";import"./schema-helper-BcHhi0sG.js";function B({card:i,sx:a,...o}){const e=M(),t=()=>s.jsx(L,{open:e.open,anchorEl:e.anchorEl,onClose:e.onClose,children:s.jsxs(H,{children:[s.jsxs(w,{onClick:e.onClose,children:[s.jsx(l,{icon:"eva:star-fill"}),"Selecionar como padrão"]}),s.jsxs(w,{onClick:e.onClose,children:[s.jsx(l,{icon:"solar:pen-bold"}),"Editar"]}),s.jsxs(w,{onClick:e.onClose,sx:{color:"error.main"},children:[s.jsx(l,{icon:"solar:trash-bin-trash-bold"}),"Excluir"]})]})});return s.jsxs(s.Fragment,{children:[s.jsxs(A,{variant:"outlined",sx:[{p:2.5,width:1,position:"relative"},...Array.isArray(a)?a:[a]],...o,children:[s.jsxs(x,{sx:{mb:1,gap:1,display:"flex",alignItems:"center"},children:[s.jsx(l,{width:36,icon:i.cardType==="visa"&&"logos:visa"||"logos:mastercard"}),i.primary&&s.jsx(F,{color:"info",children:"Padrão"})]}),s.jsx(S,{variant:"subtitle2",children:i.cardNumber}),s.jsx(G,{onClick:e.onOpen,sx:{top:8,right:8,position:"absolute"},children:s.jsx(l,{icon:"eva:more-vertical-fill"})})]}),t()]})}function os({open:i,list:a,onClose:o,selected:e,onSelect:t}){const[m,j]=p.useState(""),y=ts({inputData:a,query:m}),b=!y.length&&!!m,u=p.useCallback(d=>{j(d.target.value)},[]),C=p.useCallback(d=>{t(d),j(""),o()},[o,t]),c=()=>s.jsx(P,{spacing:2.5,sx:{p:3},children:y.map(d=>s.jsx(B,{card:d,onClick:()=>C(d),sx:[v=>({cursor:"pointer",...e(d.id)&&{boxShadow:`0 0 0 2px ${v.vars.palette.text.primary}`}})]},d.id))});return s.jsxs(z,{fullWidth:!0,maxWidth:"xs",open:i,onClose:o,children:[s.jsxs(x,{sx:{p:3,pr:1.5,display:"flex",alignItems:"center"},children:[s.jsx(S,{variant:"h6",sx:{flexGrow:1},children:"Cartões"}),s.jsx(h,{size:"small",startIcon:s.jsx(l,{icon:"mingcute:add-line"}),sx:{alignSelf:"flex-end"},children:"Novo"})]}),s.jsx(P,{sx:{px:3},children:s.jsx(R,{value:m,onChange:u,placeholder:"Buscar...",slotProps:{input:{startAdornment:s.jsx(W,{position:"start",children:s.jsx(l,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}})}),b?s.jsx(_,{query:m,sx:{px:3,pt:5,pb:10}}):c()]})}function ts({inputData:i,query:a}){return a?i.filter(({cardNumber:o})=>[o].some(e=>e==null?void 0:e.toLowerCase().includes(a.toLowerCase()))):i}function ls({cardList:i,addressBook:a,plans:o}){const e=f(),t=f(),m=i.find(r=>r.primary)||null,j=a.find(r=>r.primary)||null,[y,b]=p.useState(""),[u,C]=p.useState(m),[c,d]=p.useState(j);p.useEffect(()=>{d(j)},[j]);const v=p.useCallback(r=>{const g=o.find(E=>E.primary);(g==null?void 0:g.subscription)!==r&&b(r)},[o]),D=p.useCallback(r=>{C(r)},[]),N=()=>o.map(r=>s.jsx(n,{size:{xs:12,md:4},children:s.jsxs(A,{variant:"outlined",onClick:()=>v(r.subscription),sx:[g=>({p:2.5,borderRadius:1.5,cursor:"pointer",position:"relative",...r.primary&&{opacity:.48,cursor:"default"},...r.subscription===y&&{boxShadow:`0 0 0 2px ${g.vars.palette.text.primary}`}})],children:[r.primary&&s.jsx(F,{color:"info",startIcon:s.jsx(l,{icon:"eva:star-fill"}),sx:{position:"absolute",top:8,right:8},children:"Current"}),r.subscription==="basic"&&s.jsx($,{}),r.subscription==="starter"&&s.jsx(O,{}),r.subscription==="premium"&&s.jsx(q,{}),s.jsx(x,{sx:{typography:"subtitle2",mt:2,mb:.5,textTransform:"capitalize"},children:r.subscription}),s.jsxs(x,{sx:{display:"flex",typography:"h4",alignItems:"center"},children:["R$ "+r.price||"Grátis",!!r.price&&s.jsx(x,{component:"span",sx:{typography:"body2",color:"text.disabled",ml:.5},children:"/mês"})]})]})},r.subscription));return s.jsxs(s.Fragment,{children:[s.jsxs(I,{children:[s.jsx(k,{title:"Plano"}),s.jsx(n,{container:!0,spacing:2,sx:{p:3},children:N()}),s.jsxs(P,{spacing:2,sx:{p:3,pt:0,typography:"body2"},children:[s.jsxs(n,{container:!0,spacing:{xs:.5,md:2},children:[s.jsx(n,{sx:{color:"text.secondary"},size:{xs:12,md:4},children:"Plano"}),s.jsx(n,{sx:{typography:"subtitle2",textTransform:"capitalize"},size:{xs:12,md:8},children:y||"-"})]}),s.jsxs(n,{container:!0,spacing:{xs:.5,md:2},children:[s.jsx(n,{sx:{color:"text.secondary"},size:{xs:12,md:4},children:"Cobrança em nome de"}),s.jsx(n,{size:{xs:12,md:8},children:s.jsx(h,{onClick:e.onTrue,endIcon:s.jsx(l,{width:16,icon:"eva:arrow-ios-downward-fill"}),sx:{typography:"subtitle2",p:0,borderRadius:0},children:c==null?void 0:c.name})})]}),s.jsxs(n,{container:!0,spacing:{xs:.5,md:2},children:[s.jsx(n,{sx:{color:"text.secondary"},size:{xs:12,md:4},children:"Endereço de cobrança"}),s.jsx(n,{sx:{color:"text.secondary"},size:{xs:12,md:8},children:c==null?void 0:c.fullAddress})]}),s.jsxs(n,{container:!0,spacing:{xs:.5,md:2},children:[s.jsx(n,{sx:{color:"text.secondary"},size:{xs:12,md:4},children:"Telefone"}),s.jsx(n,{sx:{color:"text.secondary"},size:{xs:12,md:8},children:c==null?void 0:c.phoneNumber})]}),s.jsxs(n,{container:!0,spacing:{xs:.5,md:2},children:[s.jsx(n,{sx:{color:"text.secondary"},size:{xs:12,md:4},children:"Método de pagamento"}),s.jsx(n,{size:{xs:12,md:8},children:s.jsx(h,{onClick:t.onTrue,endIcon:s.jsx(l,{width:16,icon:"eva:arrow-ios-downward-fill"}),sx:{typography:"subtitle2",p:0,borderRadius:0},children:u==null?void 0:u.cardNumber})})]})]}),s.jsx(T,{sx:{borderStyle:"dashed"}}),s.jsxs(x,{sx:{p:3,gap:1.5,display:"flex",justifyContent:"flex-end"},children:[s.jsx(h,{variant:"outlined",children:"Cancelar plano"}),s.jsx(h,{variant:"contained",children:"Ampliar plano"})]})]}),s.jsx(os,{list:i,open:t.value,onClose:t.onFalse,selected:r=>(u==null?void 0:u.id)===r,onSelect:D})]})}function cs({cards:i,sx:a,...o}){const e=f();return s.jsxs(s.Fragment,{children:[s.jsxs(I,{sx:[{my:3},...Array.isArray(a)?a:[a]],...o,children:[s.jsx(k,{title:"Método de pagamento",action:s.jsx(h,{size:"small",color:"primary",startIcon:s.jsx(l,{icon:"mingcute:add-line"}),onClick:e.onTrue,children:"Novo cartão"})}),s.jsx(x,{sx:{p:3,rowGap:2.5,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"}},children:i.map(t=>s.jsx(B,{card:t},t.id))})]}),s.jsxs(z,{fullWidth:!0,maxWidth:"xs",open:e.value,onClose:e.onFalse,children:[s.jsx(J,{children:"Adicionar novo cartão"}),s.jsx(K,{sx:{overflow:"unset"},children:s.jsx(as,{})}),s.jsxs(U,{children:[s.jsx(h,{color:"inherit",variant:"outlined",onClick:e.onFalse,children:"Cancelar"}),s.jsx(h,{color:"inherit",variant:"contained",onClick:e.onFalse,children:"Adicionar"})]})]})]})}function ds({invoices:i,sx:a,...o}){const e=f();return s.jsxs(I,{sx:a,...o,children:[s.jsx(k,{title:"Histórico de cobrança"}),s.jsxs(x,{sx:{px:3,pt:3,gap:1.5,display:"flex",flexDirection:"column"},children:[(e.value?i:i.slice(0,8)).map(t=>s.jsxs(x,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(V,{primary:t.invoiceNumber,secondary:Y(t.createdAt),slotProps:{primary:{sx:{typography:"body2"}},secondary:{sx:{mt:.5,typography:"caption",color:"text.disabled"}}}}),s.jsx(S,{variant:"body2",sx:{mr:5},children:Q(t.price)}),s.jsx(X,{color:"inherit",underline:"always",variant:"body2",href:"#",children:"PDF"})]},t.id)),s.jsx(T,{sx:{borderStyle:"dashed"}})]}),s.jsx(x,{sx:{p:2},children:s.jsxs(h,{size:"small",color:"inherit",startIcon:s.jsx(l,{width:16,icon:e.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{mr:-.5}}),onClick:e.onToggle,children:["Mostrar ",e.value?"menos":"mais"]})})]})}function xs({cards:i,plans:a,invoices:o,addressBook:e}){return s.jsxs(n,{container:!0,spacing:5,children:[s.jsxs(n,{size:{xs:12,md:8},children:[s.jsx(ls,{plans:a,cardList:i,addressBook:e}),s.jsx(cs,{cards:i})]}),s.jsx(n,{size:{xs:12,md:4},children:s.jsx(ds,{invoices:o})})]})}function ps(){return s.jsx(xs,{plans:rs,cards:es,invoices:ss,addressBook:Z})}const hs={title:`Minha Assinatura | Dashboard - ${is.appName}`};function bs(){return s.jsxs(s.Fragment,{children:[s.jsx(ns,{children:s.jsxs("title",{children:[" ",hs.title]})}),s.jsx(ps,{})]})}export{bs as default};
