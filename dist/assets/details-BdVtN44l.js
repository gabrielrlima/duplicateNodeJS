import{j as e,B as i,A as ie,aJ as oe,aK as le,S as u,o as D,I as m,T as d,be as F,Y as ce,D as S,bf as P,aB as xe,f,V as de,y as he,p as R,r as G,F as me,bg as pe,K as ue,b3 as je,bh as ye,L as b,bi as ge,b7 as be,aP as A,a$ as W,az as fe,k as ve,c as k,R as we,bj as Ce,G as I,l as ke,U as Ie,n as Se,H as Pe,C as Re}from"./index-cNRh_qft.js";import{u as De}from"./use-params-DYuE92tD.js";import{c as Le,d as ze,C as Be,e as Fe}from"./product-review-new-form-CstTKEkU.js";import{E as Ae}from"./empty-content-BzM3Az2z.js";import{a as We}from"./color-preview-C96dy_lS.js";import"./filters-result-BTXXEhsP.js";import{d as Ge,C as $e,e as Te,f as Me}from"./carousel-arrow-buttons-DjkKkmSg.js";import"./html-to-markdown-wPkGdeP1.js";import{u as Oe}from"./use-checkout-context-D9kefmWb.js";import{P as Ee,p as Ne}from"./Pagination-tgO33XKK.js";import{s as qe}from"./sumBy-ofy1HSRF.js";import{u as Ve,L as He}from"./use-light-box-Bxjny2_T.js";import{u as Ue}from"./use-carousel-CqeMadty.js";import{M as Qe}from"./markdown-sdGgeBYa.js";import{C as Ye}from"./Card-C_-31fGp.js";import"./index-ChnT1xRF.js";import"./index-BDJJM9HW.js";import"./schema-helper-D18en8Wv.js";import"./Skeleton-XGh2Uz0E.js";import"./ListItemIcon-blO7VIGp.js";import"./LastPage-ChYIEhQh.js";function Je({review:s}){const t=()=>e.jsxs(i,{sx:{gap:2,display:"flex",width:{md:240},alignItems:"center",textAlign:{md:"center"},flexDirection:{xs:"row",md:"column"}},children:[e.jsx(ie,{src:s.avatarUrl,sx:{width:{xs:48,md:64},height:{xs:48,md:64}}}),e.jsx(oe,{primary:s.name,secondary:le(s.postedAt),slotProps:{primary:{noWrap:!0},secondary:{noWrap:!0,sx:{mt:.5,typography:"caption"}}}})]}),a=()=>{var r;return e.jsxs(u,{spacing:1,flexGrow:1,children:[e.jsx(D,{size:"small",value:s.rating,precision:.1,readOnly:!0}),s.isPurchased&&e.jsxs(i,{sx:{display:"flex",alignItems:"center",color:"success.main",typography:"caption"},children:[e.jsx(m,{icon:"ic:round-verified",width:16,sx:{mr:.5}}),"Verified purchase"]}),e.jsx(d,{variant:"body2",children:s.comment}),!!((r=s.attachments)!=null&&r.length)&&e.jsx(i,{sx:{pt:1,gap:1,display:"flex",flexWrap:"wrap"},children:s.attachments.map(c=>e.jsx(i,{component:"img",alt:c,src:c,sx:{width:64,height:64,borderRadius:1.5}},c))}),e.jsxs(i,{sx:{gap:2,pt:1.5,display:"flex"},children:[e.jsxs(F,{disableRipple:!0,sx:{gap:.5,typography:"caption"},children:[e.jsx(m,{icon:"solar:like-outline",width:16}),"123"]}),e.jsxs(F,{disableRipple:!0,sx:{gap:.5,typography:"caption"},children:[e.jsx(m,{icon:"solar:dislike-outline",width:16}),"34"]})]})]})};return e.jsxs(i,{sx:{mt:5,gap:2,display:"flex",px:{xs:2.5,md:0},flexDirection:{xs:"column",md:"row"}},children:[t(),a()]})}function Ke({reviews:s}){return e.jsxs(e.Fragment,{children:[s.map(t=>e.jsx(Je,{review:t},t.id)),e.jsx(Ee,{count:10,sx:{mx:"auto",[`& .${Ne.ul}`]:{my:5,mx:"auto",justifyContent:"center"}}})]})}function Xe({totalRatings:s,totalReviews:t,ratings:a=[],reviews:r=[]}){const c=ce(),n=qe(a,h=>h.starCount),x=()=>e.jsxs(u,{spacing:1,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(d,{variant:"subtitle2",children:"Average rating"}),e.jsxs(d,{variant:"h2",children:[s,"/5"]}),e.jsx(D,{readOnly:!0,value:s,precision:.1}),e.jsxs(d,{variant:"caption",sx:{color:"text.secondary"},children:["(",P(t)," reviews)"]})]}),l=()=>e.jsx(u,{spacing:1.5,sx:[h=>({py:5,px:{xs:3,md:5},borderLeft:{md:`dashed 1px ${h.vars.palette.divider}`},borderRight:{md:`dashed 1px ${h.vars.palette.divider}`}})],children:a.slice(0).reverse().map(h=>e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{variant:"subtitle2",component:"span",sx:{width:42},children:h.name}),e.jsx(xe,{color:"inherit",variant:"determinate",value:h.starCount/n*100,sx:{mx:2,flexGrow:1}}),e.jsx(d,{variant:"body2",component:"span",sx:{minWidth:48,color:"text.secondary"},children:P(h.reviewCount)})]},h.name))}),g=()=>e.jsx(u,{sx:{alignItems:"center",justifyContent:"center"},children:e.jsx(f,{size:"large",variant:"soft",color:"inherit",onClick:c.onTrue,startIcon:e.jsx(m,{icon:"solar:pen-bold"}),children:"Write your review"})});return e.jsxs(e.Fragment,{children:[e.jsxs(i,{sx:{display:"grid",py:{xs:5,md:0},gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(3, 1fr)"}},children:[x(),l(),g()]}),e.jsx(S,{sx:{borderStyle:"dashed"}}),e.jsx(Ke,{reviews:r}),e.jsx(Le,{open:c.value,onClose:c.onFalse})]})}function Ze({items:s,product:t,onAddToCart:a,disableActions:r,...c}){const n=de(),{id:x,name:l,sizes:g,price:h,colors:L,coverUrl:$,newLabel:v,available:j,priceSale:z,saleLabel:w,totalRatings:T,totalReviews:M,inventoryType:C,subDescription:O}=t,E=!!(s!=null&&s.length)&&s.map(o=>o.id).includes(x),N=!!(s!=null&&s.length)&&s.filter(o=>o.id===x).map(o=>o.quantity)[0]>=j,q={id:x,name:l,coverUrl:$,available:j,price:h,colors:L[0],size:g[4],quantity:j<1?0:1},B=he({defaultValues:q}),{watch:V,control:H,setValue:U,handleSubmit:Q}=B,p=V(),Y=Q(async o=>{console.info("DATA",JSON.stringify(o,null,2));try{E||a==null||a({...o,colors:[p.colors]}),n.push(R.product.checkout)}catch(y){console.error(y)}}),J=G.useCallback(()=>{try{a==null||a({...p,colors:[p.colors],subtotal:p.price*p.quantity})}catch(o){console.error(o)}},[a,p]),K=()=>e.jsxs(i,{sx:{typography:"h5"},children:[z&&e.jsx(i,{component:"span",sx:{color:"text.disabled",textDecoration:"line-through",mr:.5},children:W(z)}),W(h)]}),X=()=>e.jsxs(i,{sx:{gap:3,display:"flex",justifyContent:"center",[`& .${be.root}`]:{gap:1,alignItems:"center",display:"inline-flex",color:"text.secondary",typography:"subtitle2"}},children:[e.jsxs(b,{children:[e.jsx(m,{icon:"mingcute:add-line",width:16}),"Compare"]}),e.jsxs(b,{children:[e.jsx(m,{icon:"solar:heart-bold",width:16}),"Favorite"]}),e.jsxs(b,{children:[e.jsx(m,{icon:"solar:share-bold",width:16}),"Share"]})]}),Z=()=>e.jsxs(i,{sx:{display:"flex"},children:[e.jsx(d,{variant:"subtitle2",sx:{flexGrow:1},children:"Color"}),e.jsx(pe,{name:"colors",control:H,render:({field:o})=>e.jsx(We,{options:L,value:o.value,onChange:y=>o.onChange(y),limit:4})})]}),_=()=>e.jsxs(i,{sx:{display:"flex"},children:[e.jsx(d,{variant:"subtitle2",sx:{flexGrow:1},children:"Size"}),e.jsx(ue.Select,{name:"size",size:"small",helperText:e.jsx(b,{underline:"always",color:"text.primary",children:"Size chart"}),sx:{maxWidth:88,[`& .${ye.root}`]:{mx:0,mt:1,textAlign:"right"}},children:g.map(o=>e.jsx(je,{value:o,children:o},o))})]}),ee=()=>e.jsxs(i,{sx:{display:"flex"},children:[e.jsx(d,{variant:"subtitle2",sx:{flexGrow:1},children:"Quantity"}),e.jsxs(u,{spacing:1,children:[e.jsx(ge,{hideDivider:!0,value:p.quantity,onChange:(o,y)=>U("quantity",y),max:j,sx:{maxWidth:112}}),e.jsxs(d,{variant:"caption",component:"div",sx:{textAlign:"right",color:"text.secondary"},children:["Available: ",j]})]})]}),se=()=>e.jsxs(i,{sx:{gap:2,display:"flex"},children:[e.jsx(f,{fullWidth:!0,disabled:N||r,size:"large",color:"warning",variant:"contained",startIcon:e.jsx(m,{icon:"solar:cart-plus-bold",width:24}),onClick:J,sx:{whiteSpace:"nowrap"},children:"Add to cart"}),e.jsx(f,{fullWidth:!0,size:"large",type:"submit",variant:"contained",disabled:r,children:"Buy now"})]}),te=()=>e.jsx(d,{variant:"body2",sx:{color:"text.secondary"},children:O}),re=()=>e.jsxs(i,{sx:{display:"flex",typography:"body2",alignItems:"center",color:"text.disabled"},children:[e.jsx(D,{size:"small",value:T,precision:.1,readOnly:!0,sx:{mr:1}}),`(${P(M)} reviews)`]}),ne=()=>(v.enabled||w.enabled)&&e.jsxs(i,{sx:{gap:1,display:"flex",alignItems:"center"},children:[v.enabled&&e.jsx(A,{color:"info",children:v.content}),w.enabled&&e.jsx(A,{color:"error",children:w.content})]}),ae=()=>e.jsx(i,{component:"span",sx:{typography:"overline",color:C==="out of stock"&&"error.main"||C==="low stock"&&"warning.main"||"success.main"},children:C});return e.jsx(me,{methods:B,onSubmit:Y,children:e.jsxs(u,{spacing:3,sx:{pt:3},...c,children:[e.jsxs(u,{spacing:2,alignItems:"flex-start",children:[ne(),ae(),e.jsx(d,{variant:"h5",children:l}),re(),K(),te()]}),e.jsx(S,{sx:{borderStyle:"dashed"}}),Z(),_(),ee(),e.jsx(S,{sx:{borderStyle:"dashed"}}),se(),X()]})})}function _e({images:s}){var c;const t=Ue({thumbs:{slidesToShow:"auto"}}),a=(s==null?void 0:s.map(n=>({src:n})))||[],r=Ve(a);return G.useEffect(()=>{var n;r.open&&((n=t.mainApi)==null||n.scrollTo(r.selected,!0))},[t.mainApi,r.open,r.selected]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs(i,{sx:{mb:2.5,position:"relative"},children:[e.jsx(Ge,{...t.arrows,options:t.options,totalSlides:t.dots.dotCount,selectedIndex:t.dots.selectedIndex+1,sx:{right:16,bottom:16,position:"absolute"}}),e.jsx($e,{carousel:t,sx:{borderRadius:2},children:a.map(n=>e.jsx(fe,{alt:n.src,src:n.src,ratio:"1/1",onClick:()=>r.onOpen(n.src),sx:{cursor:"zoom-in",minWidth:320}},n.src))})]}),e.jsx(Te,{ref:t.thumbs.thumbsRef,options:(c=t.options)==null?void 0:c.thumbs,slotProps:{disableMask:!0},sx:{width:360},children:a.map((n,x)=>e.jsx(Me,{index:x,src:n.src,selected:x===t.thumbs.selectedIndex,onClick:()=>t.thumbs.onClickThumb(x)},n.src))})]}),e.jsx(He,{index:r.selected,slides:a,open:r.open,close:r.onClose,onGetCurrentIndex:n=>r.setSelected(n)})]})}function es({description:s,sx:t}){return e.jsx(Qe,{children:s,sx:[()=>({p:3,"& p, li, ol, table":{typography:"body2"},"& table":{mt:2,maxWidth:640,"& td":{px:2},"& td:first-of-type":{color:"text.secondary"},"tbody tr:nth-of-type(odd)":{bgcolor:"transparent"}}}),...Array.isArray(t)?t:[t]]})}const ss=[{title:"100% original",description:"Chocolate bar candy canes ice cream toffee cookie halvah.",icon:"solar:verified-check-bold"},{title:"10 days replacement",description:"Marshmallow biscuit donut drag√©e fruitcake wafer.",icon:"solar:clock-circle-bold"},{title:"Year warranty",description:"Cotton candy gingerbread cake I love sugar sweet.",icon:"solar:shield-check-bold"}];function ts({product:s,error:t,loading:a}){const{state:r,onAddToCart:c}=Oe(),n={mt:5,mb:10},x=ve("description");return a?e.jsx(k,{sx:n,children:e.jsx(ze,{})}):t?e.jsx(k,{sx:n,children:e.jsx(Ae,{filled:!0,title:"Product not found!",action:e.jsx(f,{component:we,href:R.product.root,startIcon:e.jsx(m,{width:16,icon:"eva:arrow-ios-back-fill"}),sx:{mt:3},children:"Back to list"}),sx:{py:10}})}):e.jsxs(k,{sx:n,children:[e.jsx(Be,{totalItems:r.totalItems}),e.jsx(Ce,{links:[{name:"Home",href:"/"},{name:"Shop",href:R.product.root},{name:s==null?void 0:s.name}],sx:{mb:5}}),e.jsxs(I,{container:!0,spacing:{xs:3,md:5,lg:8},children:[e.jsx(I,{size:{xs:12,md:6,lg:7},children:e.jsx(_e,{images:s==null?void 0:s.images})}),e.jsx(I,{size:{xs:12,md:6,lg:5},children:s&&e.jsx(Ze,{product:s,items:r.items,onAddToCart:c,disableActions:!(s!=null&&s.available)})})]}),e.jsx(i,{sx:{gap:5,my:10,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(3, 1fr)"}},children:ss.map(l=>e.jsxs(i,{sx:{textAlign:"center",px:5},children:[e.jsx(m,{icon:l.icon,width:32,sx:{color:"primary.main"}}),e.jsx(d,{variant:"subtitle1",sx:{mb:1,mt:2},children:l.title}),e.jsx(d,{variant:"body2",sx:{color:"text.secondary"},children:l.description})]},l.title))}),e.jsxs(Ye,{children:[e.jsx(ke,{value:x.value,onChange:x.onChange,sx:[l=>({px:3,boxShadow:`inset 0 -2px 0 0 ${Ie(l.vars.palette.grey["500Channel"],.08)}`})],children:[{value:"description",label:"Description"},{value:"reviews",label:`Reviews (${s==null?void 0:s.reviews.length})`}].map(l=>e.jsx(Se,{value:l.value,label:l.label},l.value))}),x.value==="description"&&e.jsx(es,{description:s==null?void 0:s.description}),x.value==="reviews"&&e.jsx(Xe,{ratings:s==null?void 0:s.ratings,reviews:s==null?void 0:s.reviews,totalRatings:s==null?void 0:s.totalRatings,totalReviews:s==null?void 0:s.totalReviews})]})]})}const rs={title:`Product details - ${Re.appName}`};function Is(){const{id:s=""}=De(),{product:t,productLoading:a,productError:r}=Fe(s);return e.jsxs(e.Fragment,{children:[e.jsx(Pe,{children:e.jsxs("title",{children:[" ",rs.title]})}),e.jsx(ts,{product:t,loading:a,error:r})]})}export{Is as default};
