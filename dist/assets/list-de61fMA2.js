import{ca as C,j as s,S as b,B as a,aP as y,aK as P,L as w,R as p,T as I,a1 as v,I as d,b0 as f,A as S,az as L,cb as k,cc as A,cd as j,p as x,r as g,dC as T,b8 as z,aZ as B,f as F,l as O,n as E,H as G,C as H}from"./index-D82XrlGq.js";import{P as N}from"./_blog-C6iFTPs4.js";import{u as R}from"./blog-BxyGPj51.js";import{P as M,a as V}from"./post-search-DAjXoHaQ.js";import{P as U}from"./post-skeleton-DV3cXjQg.js";import{C as _}from"./Card-Bw-3A9ev.js";import{P as $,p as K}from"./Pagination-CXHPyE06.js";import{o as u}from"./orderBy-BP_idRMj.js";import"./post-comment-form-BNiYvAYb.js";import"./html-to-markdown-ClkW1E93.js";import"./empty-content-CAmd9egU.js";import"./index-nX3EE7Rc.js";import"./index-AY8D22yG.js";import"./Skeleton-B8_s61tm.js";import"./LastPage-xOhVKZvt.js";import"./schema-helper-BcHhi0sG.js";import"./markdown-BDXCiwMU.js";import"./Zoom-CFlw_obW.js";import"./Fab-CjGO5Ngr.js";import"./CardHeader-BbCWHGKm.js";function W({sx:e,post:t,editHref:n,detailsHref:l,...o}){const r=C(),m=()=>s.jsx(k,{open:r.open,anchorEl:r.anchorEl,onClose:r.onClose,slotProps:{arrow:{placement:"bottom-center"}},children:s.jsxs(A,{children:[s.jsx("li",{children:s.jsxs(j,{component:p,href:l,onClick:()=>r.onClose(),children:[s.jsx(d,{icon:"solar:eye-bold"}),"View"]})}),s.jsx("li",{children:s.jsxs(j,{component:p,href:n,onClick:()=>r.onClose(),children:[s.jsx(d,{icon:"solar:pen-bold"}),"Edit"]})}),s.jsxs(j,{onClick:()=>r.onClose(),sx:{color:"error.main"},children:[s.jsx(d,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})});return s.jsxs(s.Fragment,{children:[s.jsxs(_,{sx:[{display:"flex"},...Array.isArray(e)?e:[e]],...o,children:[s.jsxs(b,{spacing:1,sx:[c=>({flexGrow:1,p:c.spacing(3,3,2,3)})],children:[s.jsxs(a,{sx:{mb:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsx(y,{variant:"soft",color:t.publish==="published"&&"info"||"default",children:t.publish}),s.jsx(a,{component:"span",sx:{typography:"caption",color:"text.disabled"},children:P(t.createdAt)})]}),s.jsxs(b,{spacing:1,sx:{flexGrow:1},children:[s.jsx(w,{component:p,href:l,color:"inherit",variant:"subtitle2",sx:[c=>({...c.mixins.maxLine({line:2})})],children:t.title}),s.jsx(I,{variant:"body2",sx:[c=>({...c.mixins.maxLine({line:2}),color:"text.secondary"})],children:t.description})]}),s.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(v,{color:r.open?"inherit":"default",onClick:r.onOpen,children:s.jsx(d,{icon:"eva:more-horizontal-fill"})}),s.jsxs(a,{sx:{gap:1.5,flexGrow:1,display:"flex",flexWrap:"wrap",typography:"caption",color:"text.disabled",justifyContent:"flex-end"},children:[s.jsxs(a,{sx:{gap:.5,display:"flex",alignItems:"center"},children:[s.jsx(d,{icon:"eva:message-circle-fill",width:16}),f(t.totalComments)]}),s.jsxs(a,{sx:{gap:.5,display:"flex",alignItems:"center"},children:[s.jsx(d,{icon:"solar:eye-bold",width:16}),f(t.totalViews)]}),s.jsxs(a,{sx:{gap:.5,display:"flex",alignItems:"center"},children:[s.jsx(d,{icon:"solar:share-bold",width:16}),f(t.totalShares)]})]})]})]}),s.jsxs(a,{sx:{p:1,width:180,height:240,flexShrink:0,position:"relative",display:{xs:"none",sm:"block"}},children:[s.jsx(S,{alt:t.author.name,src:t.author.avatarUrl,sx:{top:16,right:16,zIndex:9,position:"absolute"}}),s.jsx(L,{alt:t.title,src:t.coverUrl,sx:{height:1,borderRadius:1.5}})]})]}),m()]})}function Z({posts:e,loading:t}){const n=()=>s.jsx(U,{variant:"horizontal"}),l=()=>e.map(o=>s.jsx(W,{post:o,detailsHref:x.dashboard.post.details(o.title),editHref:x.dashboard.post.edit(o.title)},o.id));return s.jsxs(s.Fragment,{children:[s.jsx(a,{sx:{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"}},children:t?n():l()}),e.length>8&&s.jsx($,{count:8,sx:{mt:{xs:5,md:8},[`& .${K.ul}`]:{justifyContent:"center"}}})]})}function q(){const{posts:e,postsLoading:t}=R(),[n,l]=g.useState("latest"),{state:o,setState:r}=T({publish:"all"}),m=J({inputData:e,filters:o,sortBy:n}),c=g.useCallback((i,h)=>{r({publish:h})},[r]);return s.jsxs(z,{children:[s.jsx(B,{heading:"List",links:[{name:"Dashboard",href:x.dashboard.root},{name:"Blog",href:x.dashboard.post.root},{name:"List"}],action:s.jsx(F,{component:p,href:x.dashboard.post.new,variant:"contained",startIcon:s.jsx(d,{icon:"mingcute:add-line"}),children:"New post"}),sx:{mb:{xs:3,md:5}}}),s.jsxs(a,{sx:{gap:3,display:"flex",mb:{xs:3,md:5},justifyContent:"space-between",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"flex-end",sm:"center"}},children:[s.jsx(M,{redirectPath:i=>x.dashboard.post.details(i)}),s.jsx(V,{sort:n,onSort:i=>l(i),sortOptions:N})]}),s.jsx(O,{value:o.publish,onChange:c,sx:{mb:{xs:3,md:5}},children:["all","published","draft"].map(i=>s.jsx(E,{iconPosition:"end",value:i,label:i,icon:s.jsxs(y,{variant:(i==="all"||i===o.publish)&&"filled"||"soft",color:i==="published"&&"info"||"default",children:[i==="all"&&e.length,i==="published"&&e.filter(h=>h.publish==="published").length,i==="draft"&&e.filter(h=>h.publish==="draft").length]}),sx:{textTransform:"capitalize"}},i))}),s.jsx(Z,{posts:m,loading:t})]})}function J({inputData:e,filters:t,sortBy:n}){const{publish:l}=t;return n==="latest"&&(e=u(e,["createdAt"],["desc"])),n==="oldest"&&(e=u(e,["createdAt"],["asc"])),n==="popular"&&(e=u(e,["totalViews"],["desc"])),l!=="all"&&(e=e.filter(o=>o.publish===l)),e}const Q={title:`Post list | Dashboard - ${H.appName}`};function us(){return s.jsxs(s.Fragment,{children:[s.jsx(G,{children:s.jsxs("title",{children:[" ",Q.title]})}),s.jsx(q,{})]})}export{us as default};
