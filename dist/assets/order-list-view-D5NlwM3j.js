import{Y as P,ca as O,j as e,b1 as H,L as K,R as k,B as f,A as R,S as G,aJ as A,d0 as Q,aK as V,cG as F,aP as L,a1 as D,I as g,bw as q,aj as J,cb as N,cc as U,cd as C,f as W,r as m,dy as I,dz as Y,au as Z,a0 as X,a_ as w,dA as ee,dB as se,dC as te,dD as ae,c5 as E,b8 as le,aZ as ne,p as v,l as oe,dE as re,U as ie,n as ce,c3 as de,c4 as he,dF as xe}from"./index-D82XrlGq.js";import{C as _}from"./confirm-dialog-rvtuH5TT.js";import{u as ue,g as me,r as pe,e as ge,T as je}from"./table-no-data-DH7CjOyR.js";import{T as be}from"./table-empty-rows-Vu5FyjZw.js";import{T as fe}from"./table-head-custom-CuFVaOdc.js";import{T as Ce}from"./table-selected-action-B1DH3GwP.js";import{T as ye}from"./table-pagination-custom-D5_o9sKp.js";import{b as B,T as De,a as we}from"./TableHead-RMfhpLqX.js";import{T as j}from"./TableCell-9zzJlMjB.js";import{F as ve,a as T,c as S}from"./filters-result-BUC8QtIh.js";import{C as Te}from"./Card-Bw-3A9ev.js";function Se({row:s,selected:c,onSelectRow:l,onDeleteRow:h,detailsHref:o}){const t=P(),d=O(),x=P(),r=()=>e.jsxs(B,{hover:!0,selected:c,children:[e.jsx(j,{padding:"checkbox",children:e.jsx(H,{checked:c,onClick:l,inputProps:{id:`${s.id}-checkbox`,"aria-label":`${s.id} checkbox`}})}),e.jsx(j,{children:e.jsx(K,{component:k,href:o,color:"inherit",underline:"always",children:s.orderNumber})}),e.jsx(j,{children:e.jsxs(f,{sx:{gap:2,display:"flex",alignItems:"center"},children:[e.jsx(R,{alt:s.customer.name,src:s.customer.avatarUrl}),e.jsxs(G,{sx:{typography:"body2",flex:"1 1 auto",alignItems:"flex-start"},children:[e.jsx(f,{component:"span",children:s.customer.name}),e.jsx(f,{component:"span",sx:{color:"text.disabled"},children:s.customer.email})]})]})}),e.jsx(j,{children:e.jsx(A,{primary:V(s.createdAt),secondary:Q(s.createdAt),slotProps:{primary:{noWrap:!0,sx:{typography:"body2"}},secondary:{sx:{mt:.5,typography:"caption"}}}})}),e.jsxs(j,{align:"center",children:[" ",s.totalQuantity," "]}),e.jsxs(j,{children:[" ",F(s.subtotal)," "]}),e.jsx(j,{children:e.jsx(L,{variant:"soft",color:s.status==="completed"&&"success"||s.status==="pending"&&"warning"||s.status==="cancelled"&&"error"||"default",children:s.status})}),e.jsxs(j,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:[e.jsx(D,{color:x.value?"inherit":"default",onClick:x.onToggle,sx:{...x.value&&{bgcolor:"action.hover"}},children:e.jsx(g,{icon:"eva:arrow-ios-downward-fill"})}),e.jsx(D,{color:d.open?"inherit":"default",onClick:d.onOpen,children:e.jsx(g,{icon:"eva:more-vertical-fill"})})]})]}),n=()=>e.jsx(B,{children:e.jsx(j,{sx:{p:0,border:"none"},colSpan:8,children:e.jsx(q,{in:x.value,timeout:"auto",unmountOnExit:!0,sx:{bgcolor:"background.neutral"},children:e.jsx(J,{sx:{m:1.5},children:s.items.map(b=>e.jsxs(f,{sx:y=>({display:"flex",alignItems:"center",p:y.spacing(1.5,2,1.5,1.5),"&:not(:last-of-type)":{borderBottom:`solid 2px ${y.vars.palette.background.neutral}`}}),children:[e.jsx(R,{src:b.coverUrl,variant:"rounded",sx:{width:48,height:48,mr:2}}),e.jsx(A,{primary:b.name,secondary:b.sku,slotProps:{primary:{sx:{typography:"body2"}},secondary:{sx:{mt:.5,color:"text.disabled"}}}}),e.jsxs("div",{children:["x",b.quantity," "]}),e.jsx(f,{sx:{width:110,textAlign:"right"},children:F(b.price)})]},b.id))})})})}),i=()=>e.jsx(N,{open:d.open,anchorEl:d.anchorEl,onClose:d.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(U,{children:[e.jsxs(C,{onClick:()=>{t.onTrue(),d.onClose()},sx:{color:"error.main"},children:[e.jsx(g,{icon:"solar:trash-bin-trash-bold"}),"Delete"]}),e.jsx("li",{children:e.jsxs(C,{component:k,href:o,onClick:()=>d.onClose(),children:[e.jsx(g,{icon:"solar:eye-bold"}),"View"]})})]})}),p=()=>e.jsx(_,{open:t.value,onClose:t.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(W,{variant:"contained",color:"error",onClick:h,children:"Delete"})});return e.jsxs(e.Fragment,{children:[r(),n(),i(),p()]})}function Pe({filters:s,onResetPage:c,dateError:l}){const h=O(),{state:o,setState:t}=s,d=m.useCallback(i=>{c(),t({name:i.target.value})},[c,t]),x=m.useCallback(i=>{c(),t({startDate:i})},[c,t]),r=m.useCallback(i=>{c(),t({endDate:i})},[c,t]),n=()=>e.jsx(N,{open:h.open,anchorEl:h.anchorEl,onClose:h.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(U,{children:[e.jsxs(C,{onClick:()=>h.onClose(),children:[e.jsx(g,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(C,{onClick:()=>h.onClose(),children:[e.jsx(g,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(C,{onClick:()=>h.onClose(),children:[e.jsx(g,{icon:"solar:export-bold"}),"Export"]})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(f,{sx:{p:2.5,gap:2,display:"flex",pr:{xs:2.5,md:1},flexDirection:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"}},children:[e.jsx(I,{label:"Start date",value:o.startDate,onChange:x,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:200}}}),e.jsx(I,{label:"End date",value:o.endDate,onChange:r,slotProps:{textField:{fullWidth:!0,error:l,helperText:l?"End date must be later than start date":null}},sx:{maxWidth:{md:200},[`& .${Y.root}`]:{position:{md:"absolute"},bottom:{md:-40}}}}),e.jsxs(f,{sx:{gap:2,width:1,flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(Z,{fullWidth:!0,value:o.name,onChange:d,placeholder:"Search customer or order number...",slotProps:{input:{startAdornment:e.jsx(X,{position:"start",children:e.jsx(g,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}}),e.jsx(D,{onClick:h.onOpen,children:e.jsx(g,{icon:"eva:more-vertical-fill"})})]})]}),n()]})}function ke({filters:s,totalResults:c,onResetPage:l,sx:h}){const{state:o,setState:t,resetState:d}=s,x=m.useCallback(()=>{l(),t({name:""})},[l,t]),r=m.useCallback(()=>{l(),t({status:"all"})},[l,t]),n=m.useCallback(()=>{l(),t({startDate:null,endDate:null})},[l,t]),i=m.useCallback(()=>{l(),d()},[l,d]);return e.jsxs(ve,{totalResults:c,onReset:i,sx:h,children:[e.jsx(T,{label:"Status:",isShow:o.status!=="all",children:e.jsx(w,{...S,label:o.status,onDelete:r,sx:{textTransform:"capitalize"}})}),e.jsx(T,{label:"Date:",isShow:!!(o.startDate&&o.endDate),children:e.jsx(w,{...S,label:ee(o.startDate,o.endDate),onDelete:n})}),e.jsx(T,{label:"Keyword:",isShow:!!o.name,children:e.jsx(w,{...S,label:o.name,onDelete:x})})]})}const Re=[{value:"all",label:"All"},...re],Ae=[{id:"orderNumber",label:"Order",width:88},{id:"name",label:"Customer"},{id:"createdAt",label:"Date",width:140},{id:"totalQuantity",label:"Items",width:120,align:"center"},{id:"totalAmount",label:"Price",width:140},{id:"status",label:"Status",width:110},{id:"",width:88}];function $e(){const s=ue({defaultOrderBy:"orderNumber"}),c=P(),[l,h]=m.useState(se),o=te({name:"",status:"all",startDate:null,endDate:null}),{state:t,setState:d}=o,x=ae(t.startDate,t.endDate),r=Fe({inputData:l,comparator:me(s.order,s.orderBy),filters:t,dateError:x}),n=pe(r,s.page,s.rowsPerPage),i=!!t.name||t.status!=="all"||!!t.startDate&&!!t.endDate,p=!r.length&&i||!r.length,b=m.useCallback(a=>{const u=l.filter($=>$.id!==a);E.success("Apagado com sucesso!"),h(u),s.onUpdatePageDeleteRow(n.length)},[n.length,s,l]),y=m.useCallback(()=>{const a=l.filter(u=>!s.selected.includes(u.id));E.success("Apagado com sucesso!"),h(a),s.onUpdatePageDeleteRows(n.length,r.length)},[r.length,n.length,s,l]),z=m.useCallback((a,u)=>{s.onResetPage(),d({status:u})},[d,s]),M=()=>e.jsx(_,{open:c.value,onClose:c.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",s.selected.length," "]})," items?"]}),action:e.jsx(W,{variant:"contained",color:"error",onClick:()=>{y(),c.onFalse()},children:"Delete"})});return e.jsxs(e.Fragment,{children:[e.jsxs(le,{children:[e.jsx(ne,{heading:"List",links:[{name:"Dashboard",href:v.dashboard.root},{name:"Order",href:v.dashboard.order.root},{name:"List"}],sx:{mb:{xs:3,md:5}}}),e.jsxs(Te,{children:[e.jsx(oe,{value:t.status,onChange:z,sx:[a=>({px:2.5,boxShadow:`inset 0 -2px 0 0 ${ie(a.vars.palette.grey["500Channel"],.08)}`})],children:Re.map(a=>e.jsx(ce,{iconPosition:"end",value:a.value,label:a.label,icon:e.jsx(L,{variant:(a.value==="all"||a.value===t.status)&&"filled"||"soft",color:a.value==="completed"&&"success"||a.value==="pending"&&"warning"||a.value==="cancelled"&&"error"||"default",children:["completed","pending","cancelled","refunded"].includes(a.value)?l.filter(u=>u.status===a.value).length:l.length})},a.value))}),e.jsx(Pe,{filters:o,onResetPage:s.onResetPage,dateError:x}),i&&e.jsx(ke,{filters:o,totalResults:r.length,onResetPage:s.onResetPage,sx:{p:2.5,pt:0}}),e.jsxs(f,{sx:{position:"relative"},children:[e.jsx(Ce,{dense:s.dense,numSelected:s.selected.length,rowCount:r.length,onSelectAllRows:a=>s.onSelectAllRows(a,r.map(u=>u.id)),action:e.jsx(de,{title:"Delete",children:e.jsx(D,{color:"primary",onClick:c.onTrue,children:e.jsx(g,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(he,{sx:{minHeight:444},children:e.jsxs(De,{size:s.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(fe,{order:s.order,orderBy:s.orderBy,headCells:Ae,rowCount:r.length,numSelected:s.selected.length,onSort:s.onSort,onSelectAllRows:a=>s.onSelectAllRows(a,r.map(u=>u.id))}),e.jsxs(we,{children:[r.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map(a=>e.jsx(Se,{row:a,selected:s.selected.includes(a.id),onSelectRow:()=>s.onSelectRow(a.id),onDeleteRow:()=>b(a.id),detailsHref:v.dashboard.order.details(a.id)},a.id)),e.jsx(be,{height:s.dense?56:76,emptyRows:ge(s.page,s.rowsPerPage,r.length)}),e.jsx(je,{notFound:p})]})]})})]}),e.jsx(ye,{page:s.page,dense:s.dense,count:r.length,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onChangeDense:s.onChangeDense,onRowsPerPageChange:s.onChangeRowsPerPage})]})]}),M()]})}function Fe({inputData:s,comparator:c,filters:l,dateError:h}){const{status:o,name:t,startDate:d,endDate:x}=l,r=s.map((n,i)=>[n,i]);return r.sort((n,i)=>{const p=c(n[0],i[0]);return p!==0?p:n[1]-i[1]}),s=r.map(n=>n[0]),t&&(s=s.filter(({orderNumber:n,customer:i})=>[n,i.name,i.email].some(p=>p==null?void 0:p.toLowerCase().includes(t.toLowerCase())))),o!=="all"&&(s=s.filter(n=>n.status===o)),h||d&&x&&(s=s.filter(n=>xe(n.createdAt,d,x))),s}export{$e as O};
