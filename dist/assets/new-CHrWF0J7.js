import{V as T,y as E,z as N,O as w,cN as P,p as d,j as e,F as S,G as l,aP as F,B as x,K as a,T as n,dt as V,bq as z,bg as A,aQ as B,S as b,f as k,N as D,bn as G,Q as s,a3 as I,cV as U,bj as H,H as L,C as R}from"./index-cNRh_qft.js";import{s as m}from"./schema-helper-D18en8Wv.js";import{C as u}from"./Card-C_-31fGp.js";const O=w({avatarUrl:m.file({message:"Avatar é obrigatório!"}),name:s().min(1,{message:"Nome é obrigatório!"}),email:s().min(1,{message:"Email é obrigatório!"}).email({message:"Email deve ser um endereço de email válido!"}),phoneNumber:m.phoneNumber({isValid:I}),country:m.nullableInput(s().min(1,{message:"País é obrigatório!"}),{message:"País é obrigatório!"}),address:s().min(1,{message:"Endereço é obrigatório!"}),company:s().min(1,{message:"Empresa é obrigatória!"}),state:s().min(1,{message:"Estado é obrigatório!"}),city:s().min(1,{message:"Cidade é obrigatória!"}),role:s().min(1,{message:"Cargo é obrigatório!"}),zipCode:s().min(1,{message:"CEP é obrigatório!"}),status:s(),isVerified:G()});function Q({currentClient:t}){const h=T(),p={status:"",avatarUrl:null,isVerified:!0,name:"",email:"",phoneNumber:"",country:"",state:"",city:"",address:"",zipCode:"",company:"",role:""},c=E({mode:"onSubmit",resolver:N(O),defaultValues:p,values:t}),{reset:j,watch:g,control:v,handleSubmit:y,formState:{isSubmitting:f}}=c,r=g(),C=y(async i=>{try{await new Promise(o=>setTimeout(o,500)),j(),P.success(t?"Atualizado com sucesso!":"Criado com sucesso!"),h.push(d.dashboard.client.list),console.info("DATA",i)}catch(o){console.error(o)}});return e.jsx(S,{methods:c,onSubmit:C,children:e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{size:{xs:12,md:4},children:e.jsxs(u,{sx:{pt:10,pb:5,px:3},children:[t&&e.jsx(F,{color:r.status==="active"&&"success"||r.status==="banned"&&"error"||"warning",sx:{position:"absolute",top:24,right:24},children:r.status==="active"?"Ativo":r.status==="banned"?"Banido":r.status}),e.jsx(x,{sx:{mb:5},children:e.jsx(a.UploadAvatar,{name:"avatarUrl",maxSize:3145728,helperText:e.jsxs(n,{variant:"caption",sx:{mt:3,mx:"auto",display:"block",textAlign:"center",color:"text.disabled"},children:["Permitido *.jpeg, *.jpg, *.png, *.gif",e.jsx("br",{})," tamanho máximo de ",V(3145728)]})})}),t&&e.jsx(z,{labelPlacement:"start",control:e.jsx(A,{name:"status",control:v,render:({field:i})=>e.jsx(B,{...i,checked:i.value!=="active",onChange:o=>i.onChange(o.target.checked?"banned":"active")})}),label:e.jsxs(e.Fragment,{children:[e.jsx(n,{variant:"subtitle2",sx:{mb:.5},children:"Banido"}),e.jsx(n,{variant:"body2",sx:{color:"text.secondary"},children:"Aplicar desativação da conta"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}}),e.jsx(a.Switch,{name:"isVerified",labelPlacement:"start",label:e.jsxs(e.Fragment,{children:[e.jsx(n,{variant:"subtitle2",sx:{mb:.5},children:"Email verificado"}),e.jsx(n,{variant:"body2",sx:{color:"text.secondary"},children:"Desativar isto enviará automaticamente um email de verificação para o cliente"})]}),sx:{mx:0,width:1,justifyContent:"space-between"}}),t&&e.jsx(b,{sx:{mt:3,alignItems:"center",justifyContent:"center"},children:e.jsx(k,{variant:"soft",color:"error",children:"Excluir cliente"})})]})}),e.jsx(l,{size:{xs:12,md:8},children:e.jsxs(u,{sx:{p:3},children:[e.jsxs(x,{sx:{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[e.jsx(a.Text,{name:"name",label:"Nome completo"}),e.jsx(a.Text,{name:"email",label:"Endereço de email"}),e.jsx(a.Phone,{name:"phoneNumber",label:"Número de telefone",country:t?void 0:"BR"}),e.jsx(a.CountrySelect,{fullWidth:!0,name:"country",label:"País",placeholder:"Escolha um país"}),e.jsx(a.Text,{name:"state",label:"Estado"}),e.jsx(a.Text,{name:"city",label:"Cidade"}),e.jsx(a.Text,{name:"address",label:"Endereço"}),e.jsx(a.Text,{name:"zipCode",label:"CEP"}),e.jsx(a.Text,{name:"company",label:"Empresa"}),e.jsx(a.Text,{name:"role",label:"Cargo"})]}),e.jsx(b,{sx:{mt:3,alignItems:"flex-end"},children:e.jsx(D,{type:"submit",variant:"contained",loading:f,children:t?"Salvar alterações":"Criar cliente"})})]})})]})})}function q(){return e.jsxs(U,{children:[e.jsx(H,{heading:"Criar novo cliente",links:[{name:"Painel",href:d.dashboard.root},{name:"Clientes",href:d.dashboard.user.root},{name:"Novo cliente"}],sx:{mb:{xs:3,md:5}}}),e.jsx(Q,{})]})}const K={title:`Criar novo cliente | Dashboard - ${R.appName}`};function M(){return e.jsxs(e.Fragment,{children:[e.jsx(L,{children:e.jsxs("title",{children:[" ",K.title]})}),e.jsx(q,{})]})}export{M as default};
