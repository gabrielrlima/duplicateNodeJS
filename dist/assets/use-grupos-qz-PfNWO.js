import{r as a,a8 as i,a9 as f}from"./index-D82XrlGq.js";function k(){const[d,u]=a.useState([]),[m,E]=a.useState(!1),[w,o]=a.useState(null),l=a.useCallback(async()=>{var n,c,s;try{E(!0),o(null);const r=await i.get(`${f.grupo.list}?real_estate_id=68b1df705757655b21fc5210`);if(r.data.success){const t=r.data.data.data||[];u(t)}else u([])}catch(e){((n=e.response)==null?void 0:n.status)!==401&&(console.error("Erro ao buscar grupos:",e),o(((s=(c=e.response)==null?void 0:c.data)==null?void 0:s.message)||"Erro ao carregar grupos")),u([])}finally{E(!1)}},[]),g=a.useCallback(async n=>{var c,s;try{o(null);const e=await i.post(f.grupo.create,n);if(e.data.success){const r=e.data.data;return u(t=>[...t,r]),r}throw new Error(e.data.message||"Erro ao criar grupo")}catch(e){const r=((s=(c=e.response)==null?void 0:c.data)==null?void 0:s.message)||"Erro ao criar grupo";throw o(r),new Error(r)}},[]),h=a.useCallback(async(n,c)=>{var s,e;try{o(null);const r=await i.put(`${f.grupo.update}/${n}`,c);if(r.data.success){const t=r.data.data;return u(b=>b.map(y=>y.id===n?t:y)),t}throw new Error(r.data.message||"Erro ao atualizar grupo")}catch(r){const t=((e=(s=r.response)==null?void 0:s.data)==null?void 0:e.message)||"Erro ao atualizar grupo";throw o(t),new Error(t)}},[]),G=a.useCallback(async n=>{var c,s;try{o(null);const e=await i.delete(`${f.grupo.delete}/${n}`);if(e.data.success)u(r=>r.filter(t=>t.id!==n));else throw new Error(e.data.message||"Erro ao deletar grupo")}catch(e){const r=((s=(c=e.response)==null?void 0:c.data)==null?void 0:s.message)||"Erro ao deletar grupo";throw o(r),new Error(r)}},[]),p=a.useCallback(()=>{l()},[l]);return a.useEffect(()=>{l()},[l]),{grupos:d,loading:m,error:w,refetch:p,createGrupo:g,updateGrupo:h,deleteGrupo:G}}function C(d){const[u,m]=a.useState(null),[E,w]=a.useState(!1),[o,l]=a.useState(null),g=a.useCallback(async()=>{var h,G;if(d)try{w(!0),l(null);const p=await i.get(`${f.grupo.details}/${d}`);p.data.success?m(p.data.data):l(p.data.message||"Grupo nÃ£o encontrado")}catch(p){console.error("Erro ao buscar grupo:",p),l(((G=(h=p.response)==null?void 0:h.data)==null?void 0:G.message)||"Erro ao carregar grupo")}finally{w(!1)}},[d]);return a.useEffect(()=>{g()},[g]),{grupo:u,loading:E,error:o,refetch:g}}export{C as a,k as u};
