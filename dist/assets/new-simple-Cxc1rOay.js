import{V as S,Y as P,cU as D,y,z as N,O as h,cN as j,p,r as F,j as e,F as q,T as t,S as n,K as a,b3 as i,f as b,bm as I,Q as s,bn as g,ee as u,c3 as v,eJ as A,cV as B,bj as R,H as w}from"./index-cNRh_qft.js";import{c as z}from"./terreno-B_nrSajh.js";import{C as U}from"./Card-C_-31fGp.js";import{G as o}from"./Grid-BAAHJ7js.js";import"./index-ChnT1xRF.js";import"./index-BDJJM9HW.js";const V=h({titulo:s().min(1,"Título é obrigatório"),descricao:s().optional(),preco:v.number().min(.01,"Preço deve ser maior que zero"),precoNegociavel:g().optional(),area:v.number().optional(),status:u(["available","sold","reserved"]).default("available"),tipo:u(["residential","commercial","industrial","rural"]).default("residential"),endereco:h({rua:s().min(1,"Rua é obrigatória"),numero:s().min(1,"Número é obrigatório"),bairro:s().min(1,"Bairro é obrigatório"),cidade:s().min(1,"Cidade é obrigatória"),estado:s().min(2,"Estado é obrigatório").max(2,"Use a sigla do estado"),cep:s().min(8,"CEP deve ter 8 dígitos")}),topografia:u(["flat","sloped","irregular"]).default("flat"),tipoAcesso:u(["paved","dirt","cobblestone"]).default("paved"),temDocumentacao:g().default(!1),dimensoes:s().optional(),imagens:I(A(File)).optional(),proprietario:h({nome:s().min(1,"Nome do proprietário é obrigatório"),email:s().email("Email inválido").min(1,"Email é obrigatório"),telefone:s().min(1,"Telefone é obrigatório"),documento:s().min(1,"CPF/CNPJ é obrigatório")})});function k(){const x=S(),c=P(),{currentRealEstate:l}=D(),d=y({resolver:N(V),defaultValues:{titulo:"",descricao:"",preco:0,precoNegociavel:!1,area:0,status:"available",tipo:"residential",endereco:{rua:"",numero:"",bairro:"",cidade:"",estado:"",cep:""},topografia:"flat",tipoAcesso:"paved",temDocumentacao:!1,dimensoes:"",imagens:[],proprietario:{nome:"",email:"",telefone:"",documento:""}}}),{handleSubmit:f,reset:T}=d,C=f(async r=>{console.log("🎯 onSubmit chamado!"),console.log("📋 Dados do formulário:",r),c.onTrue();try{console.log("🚀 Criando terreno simples:",r),console.log("Imobiliária atual:",l),l!=null&&l.id||console.log("⚠️ Nenhuma imobiliária selecionada. Usando ID padrão para teste.");const m={name:r.titulo,title:r.titulo,description:r.descricao||"Terreno criado via formulário expandido",totalArea:r.area,value:r.preco,status:r.status,type:r.tipo,acceptsFinancing:r.precoNegociavel||!1,address:{street:r.endereco.rua,number:r.endereco.numero,neighborhood:r.endereco.bairro,city:r.endereco.cidade,state:r.endereco.estado,zipCode:r.endereco.cep},owner:{name:r.proprietario.nome,email:r.proprietario.email,phone:r.proprietario.telefone,document:r.proprietario.documento},topography:r.topografia,dimensions:r.dimensoes||"",accessType:r.tipoAcesso,hasDocumentation:r.temDocumentacao,imagens:r.imagens||[],realEstateId:(l==null?void 0:l.id)||"test-real-estate-id"};console.log("Dados para API:",m),await z(m),j.success("Terreno criado com sucesso!"),T(),x.push(p.dashboard.terrenos.root)}catch(m){console.error("Erro ao criar terreno:",m),j.error("Erro ao criar terreno. Verifique os dados e tente novamente.")}finally{c.onFalse()}}),E=F.useCallback(()=>{x.push(p.dashboard.terrenos.root)},[x]);return e.jsx(q,{methods:d,onSubmit:C,children:e.jsxs(U,{sx:{p:3},children:[e.jsx(t,{variant:"h6",sx:{mb:3},children:"Criar Terreno - Formulário Completo"}),e.jsxs(n,{spacing:4,children:[e.jsxs(n,{spacing:3,children:[e.jsx(t,{variant:"h6",children:"Informações Básicas"}),e.jsx(a.Text,{name:"titulo",label:"Título do Terreno",placeholder:"Ex: Terreno Residencial Vila Nova",required:!0}),e.jsx(a.Text,{name:"descricao",label:"Descrição",placeholder:"Descreva as características do terreno...",multiline:!0,rows:3}),e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(a.Number,{name:"preco",label:"Preço (R$)",placeholder:"Ex: 150000",formatThousands:!0,required:!0})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(a.Number,{name:"area",label:"Área (m²)",placeholder:"Ex: 500",formatThousands:!0})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(a.Switch,{name:"precoNegociavel",label:"Preço Negociável"})})]}),e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{item:!0,xs:12,md:6,children:e.jsxs(a.Select,{name:"status",label:"Status",children:[e.jsx(i,{value:"available",children:"Disponível"}),e.jsx(i,{value:"sold",children:"Vendido"}),e.jsx(i,{value:"reserved",children:"Reservado"})]})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsxs(a.Select,{name:"tipo",label:"Tipo",children:[e.jsx(i,{value:"residential",children:"Residencial"}),e.jsx(i,{value:"commercial",children:"Comercial"}),e.jsx(i,{value:"industrial",children:"Industrial"}),e.jsx(i,{value:"rural",children:"Rural"})]})})]})]}),e.jsxs(n,{spacing:3,children:[e.jsx(t,{variant:"h6",children:"Localização"}),e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{item:!0,xs:12,md:8,children:e.jsx(a.Text,{name:"endereco.rua",label:"Rua",placeholder:"Ex: Rua das Flores",required:!0})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(a.Text,{name:"endereco.numero",label:"Número",placeholder:"Ex: 123",required:!0})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(a.Text,{name:"endereco.bairro",label:"Bairro",placeholder:"Ex: Centro",required:!0})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(a.Text,{name:"endereco.cidade",label:"Cidade",placeholder:"Ex: São Paulo",required:!0})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(a.Text,{name:"endereco.estado",label:"Estado (UF)",placeholder:"Ex: SP",inputProps:{maxLength:2},required:!0})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(a.Cep,{name:"endereco.cep",label:"CEP",placeholder:"Ex: 01234-567",required:!0})})]})]}),e.jsxs(n,{spacing:3,children:[e.jsx(t,{variant:"h6",children:"Características"}),e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{item:!0,xs:12,md:4,children:e.jsxs(a.Select,{name:"topografia",label:"Topografia",children:[e.jsx(i,{value:"flat",children:"Plano"}),e.jsx(i,{value:"sloped",children:"Inclinado"}),e.jsx(i,{value:"irregular",children:"Irregular"})]})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsxs(a.Select,{name:"tipoAcesso",label:"Tipo de Acesso",children:[e.jsx(i,{value:"paved",children:"Asfaltado"}),e.jsx(i,{value:"dirt",children:"Terra"}),e.jsx(i,{value:"cobblestone",children:"Paralelepípedo"})]})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(a.Switch,{name:"temDocumentacao",label:"Tem Documentação"})})]}),e.jsx(a.Text,{name:"dimensoes",label:"Dimensões",placeholder:"Ex: 20m x 25m"})]}),e.jsxs(n,{spacing:3,children:[e.jsx(t,{variant:"h6",children:"Imagens do Terreno"}),e.jsx(a.Upload,{name:"imagens",multiple:!0,accept:{"image/*":[]},maxSize:3145728,onUpload:()=>console.info("ON UPLOAD"),helperText:"Tamanho máximo: 3MB por arquivo • Formatos aceitos: JPG, PNG, WEBP • Múltiplas imagens permitidas"})]}),e.jsxs(n,{spacing:3,children:[e.jsx(t,{variant:"h6",children:"Dados do Proprietário"}),e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(a.Text,{name:"proprietario.nome",label:"Nome do Proprietário",placeholder:"Ex: João Silva",required:!0})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(a.Text,{name:"proprietario.email",label:"Email",placeholder:"Ex: joao@email.com",required:!0})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(a.Text,{name:"proprietario.telefone",label:"Telefone",placeholder:"Ex: (11) 99999-9999",required:!0})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(a.Text,{name:"proprietario.documento",label:"CPF/CNPJ",placeholder:"Ex: 123.456.789-00",required:!0})})]})]}),e.jsxs(n,{direction:"row",spacing:2,sx:{mt:3},children:[e.jsx(b,{type:"submit",variant:"contained",size:"large",loading:c.value,sx:{minWidth:200},onClick:()=>{console.log("🖱️ Botão Criar Terreno clicado!"),console.log("📊 Estado do formulário:",d.formState),console.log("❌ Erros de validação:",d.formState.errors)},children:"Criar Terreno"}),e.jsx(b,{variant:"outlined",size:"large",onClick:E,disabled:c.value,children:"Cancelar"})]})]})]})})}function J(){return e.jsxs(B,{children:[e.jsx(R,{heading:"Criar Terreno - Formulário Simples",links:[{name:"Dashboard",href:p.dashboard.root},{name:"Terrenos",href:p.dashboard.terrenos.root},{name:"Criar Terreno Simples"}],sx:{mb:{xs:3,md:5}}}),e.jsx(k,{})]})}const G={title:"Criar Terreno Simples | Dashboard"};function Q(){return e.jsxs(e.Fragment,{children:[e.jsx(w,{children:e.jsxs("title",{children:[" ",G.title]})}),e.jsx(J,{})]})}export{Q as default};
