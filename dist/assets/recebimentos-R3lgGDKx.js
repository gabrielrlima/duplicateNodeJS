import{j as e,aP as u,V as C,r as g,c8 as w,ec as R,b8 as p,T as r,B as c,a1 as y,I as T,p as v,c4 as D,H as S}from"./index-D82XrlGq.js";import{u as B}from"./use-params-BTd0VUeQ.js";import{u as V,g as F,e as E,T as I}from"./table-no-data-DH7CjOyR.js";import{T as L}from"./table-empty-rows-Vu5FyjZw.js";import{T as H}from"./table-head-custom-CuFVaOdc.js";import{T as k}from"./table-pagination-custom-D5_o9sKp.js";import{b as $,T as z,a as A}from"./TableHead-RMfhpLqX.js";import{T as l}from"./TableCell-9zzJlMjB.js";import{C as b}from"./Card-Bw-3A9ev.js";import{C as N}from"./config-global-DAqS2tYC.js";import"./empty-content-CAmd9egU.js";import"./TablePagination-DsJAP4En.js";import"./LastPage-xOhVKZvt.js";import"./Toolbar-CnhKmG_y.js";function _({row:d,onViewRow:m}){const{parcela:a,valor:o,vencimento:n,status:t,dataPagamento:h,formaPagamento:i}=d,x=e.jsx(u,{variant:"soft",color:t==="Pago"&&"success"||t==="Pendente"&&"warning"||t==="Vencido"&&"error"||"default",children:t});return e.jsxs($,{hover:!0,children:[e.jsxs(l,{sx:{whiteSpace:"nowrap"},children:[a,"ª parcela"]}),e.jsxs(l,{children:["R$ ",o.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx(l,{children:new Date(n).toLocaleDateString("pt-BR")}),e.jsx(l,{children:x}),e.jsx(l,{children:h?new Date(h).toLocaleDateString("pt-BR"):"-"}),e.jsx(l,{sx:{whiteSpace:"nowrap"},children:i||"-"})]})}const G=[{id:"parcela",label:"Parcela"},{id:"valor",label:"Valor"},{id:"vencimento",label:"Vencimento"},{id:"status",label:"Status"},{id:"dataPagamento",label:"Data Pagamento"},{id:"formaPagamento",label:"Forma Pagamento"}];function O(){const d=C(),{id:m}=B(),a=V(),[o,n]=g.useState([]),[t,h]=g.useState(null);w.useEffect(()=>{const s=R.find(f=>f.id===m);s&&(h(s),n(s.recebimentos||[]))},[m]);const i=W({inputData:o,comparator:F(a.order,a.orderBy)}),x=i.slice(a.page*a.rowsPerPage,a.page*a.rowsPerPage+a.rowsPerPage),j=!i.length&&!1||!i.length,P=g.useCallback(s=>{console.log("Ver recebimento:",s)},[]);return t?e.jsxs(p,{children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:{xs:3,md:5}},children:[e.jsx(y,{onClick:()=>d.push(v.dashboard.cobranca.root),sx:{bgcolor:"action.hover","&:hover":{bgcolor:"action.selected"}},children:e.jsx(T,{icon:"eva:arrow-back-fill"})}),e.jsx(r,{variant:"h6",children:"Recebimentos da Cobrança"})]}),e.jsxs(b,{sx:{mb:3,p:3},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Detalhes da Cobrança"}),e.jsxs(c,{sx:{display:"grid",gap:2,gridTemplateColumns:"repeat(2, 1fr)"},children:[e.jsxs(c,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Cliente"}),e.jsx(r,{variant:"body1",children:t.cliente})]}),e.jsxs(c,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Produto"}),e.jsx(r,{variant:"body1",children:t.produto})]}),e.jsxs(c,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Valor Total"}),e.jsxs(r,{variant:"body1",children:["R$ ",t.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs(c,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Status"}),e.jsx(u,{variant:"soft",color:t.status==="Pago"&&"success"||t.status==="Pendente"&&"warning"||t.status==="Vencido"&&"error"||"default",children:t.status})]})]})]}),e.jsxs(b,{children:[e.jsx(D,{children:e.jsxs(z,{size:a.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(H,{order:a.order,orderBy:a.orderBy,headCells:G,onSort:a.onSort}),e.jsxs(A,{children:[x.map(s=>e.jsx(_,{row:s,onViewRow:()=>P(s.id)},s.id)),e.jsx(L,{height:a.dense?52:72,emptyRows:E(a.page,a.rowsPerPage,i.length)}),e.jsx(I,{notFound:j})]})]})}),e.jsx(k,{count:i.length,page:a.page,rowsPerPage:a.rowsPerPage,onPageChange:a.onChangePage,onRowsPerPageChange:a.onChangeRowsPerPage,dense:a.dense,onChangeDense:a.onChangeDense})]})]}):e.jsx(p,{children:e.jsx(r,{variant:"h6",children:"Cobrança não encontrada"})})}function W({inputData:d,comparator:m}){const a=d.map((o,n)=>[o,n]);return a.sort((o,n)=>{const t=m(o[0],n[0]);return t!==0?t:o[1]-n[1]}),a.map(o=>o[0])}const q={title:`Recebimentos - ${N.site.name}`};function ie(){return e.jsxs(e.Fragment,{children:[e.jsx(S,{children:e.jsxs("title",{children:[" ",q.title," "]})}),e.jsx(O,{})]})}export{ie as default};
