import{b0 as A,Y as R,j as e,br as I,B as f,A as M,S as z,L as H,R as F,aP as E,a_ as U,a1 as w,I as x,b1 as L,b2 as B,b3 as b,f as y,r as m,dW as V,dX as $,dU as Q,dY as W,au as G,a0 as K,bc as k,ef as Y,bd as q,cN as D,cV as X,bj as J,p as C,l as Z,er as ee,U as se,n as le,et as te,bp as ne,H as oe,C as ae}from"./index-cNRh_qft.js";import{U as re}from"./user-quick-edit-form-CPBdrFAC.js";import{C as N}from"./confirm-dialog-V5NQjZtL.js";import{u as ie,g as ce,r as de,e as he,T as ue}from"./table-no-data-CeEeU6Ls.js";import{T as xe}from"./table-empty-rows-BTCIE_YQ.js";import{T as me}from"./table-head-custom-DSpcVu4-.js";import{T as pe}from"./table-selected-action-DJkdQzwk.js";import{T as je}from"./table-pagination-custom-xTp1jojO.js";import{T as ge,a as be,b as fe}from"./TableHead-DBnjkyMB.js";import{T as g}from"./TableCell-CGwO8Re3.js";import{F as Ce,a as T,c as P}from"./filters-result-BTXXEhsP.js";import{C as we}from"./Card-C_-31fGp.js";import"./schema-helper-D18en8Wv.js";import"./empty-content-BzM3Az2z.js";import"./TablePagination-CNNZgEcm.js";import"./LastPage-ChYIEhQh.js";import"./Toolbar-BaRJzfzK.js";function ve({row:s,selected:a,editHref:i,onSelectRow:c,onDeleteRow:r}){const t=A(),h=R(),l=R(),d=()=>e.jsx(re,{currentUser:s,open:l.value,onClose:l.onFalse}),o=()=>e.jsx(L,{open:t.open,anchorEl:t.anchorEl,onClose:t.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(B,{children:[e.jsx("li",{children:e.jsxs(b,{component:F,href:i,onClick:()=>t.onClose(),children:[e.jsx(x,{icon:"solar:pen-bold"}),"Edit"]})}),e.jsxs(b,{onClick:()=>{h.onTrue(),t.onClose()},sx:{color:"error.main"},children:[e.jsx(x,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),p=()=>e.jsx(N,{open:h.value,onClose:h.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(y,{variant:"contained",color:"error",onClick:r,children:"Delete"})});return e.jsxs(e.Fragment,{children:[e.jsxs(ge,{hover:!0,selected:a,"aria-checked":a,tabIndex:-1,children:[e.jsx(g,{padding:"checkbox",children:e.jsx(I,{checked:a,onClick:c,inputProps:{id:`${s.id}-checkbox`,"aria-label":`${s.id} checkbox`}})}),e.jsx(g,{children:e.jsxs(f,{sx:{gap:2,display:"flex",alignItems:"center"},children:[e.jsx(M,{alt:s.name,src:s.avatarUrl}),e.jsxs(z,{sx:{typography:"body2",flex:"1 1 auto",alignItems:"flex-start"},children:[e.jsx(H,{component:F,href:i,color:"inherit",sx:{cursor:"pointer"},children:s.name}),e.jsx(f,{component:"span",sx:{color:"text.disabled"},children:s.email})]})]})}),e.jsx(g,{sx:{whiteSpace:"nowrap"},children:s.phoneNumber}),e.jsx(g,{sx:{whiteSpace:"nowrap"},children:s.company}),e.jsx(g,{sx:{whiteSpace:"nowrap"},children:s.role}),e.jsx(g,{children:e.jsx(E,{variant:"soft",color:s.status==="active"&&"success"||s.status==="pending"&&"warning"||s.status==="banned"&&"error"||"default",children:s.status})}),e.jsx(g,{children:e.jsxs(f,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(U,{title:"Quick Edit",placement:"top",arrow:!0,children:e.jsx(w,{color:l.value?"inherit":"default",onClick:l.onTrue,children:e.jsx(x,{icon:"solar:pen-bold"})})}),e.jsx(w,{color:t.open?"inherit":"default",onClick:t.onOpen,children:e.jsx(x,{icon:"eva:more-vertical-fill"})})]})})]}),d(),o(),p()]})}function Se({filters:s,options:a,onResetPage:i}){const c=A(),{state:r,setState:t}=s,h=m.useCallback(o=>{i(),t({name:o.target.value})},[i,t]),l=m.useCallback(o=>{const p=typeof o.target.value=="string"?o.target.value.split(","):o.target.value;i(),t({role:p})},[i,t]),d=()=>e.jsx(L,{open:c.open,anchorEl:c.anchorEl,onClose:c.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(B,{children:[e.jsxs(b,{onClick:()=>c.onClose(),children:[e.jsx(x,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(b,{onClick:()=>c.onClose(),children:[e.jsx(x,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(b,{onClick:()=>c.onClose(),children:[e.jsx(x,{icon:"solar:export-bold"}),"Export"]})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(f,{sx:{p:2.5,gap:2,display:"flex",pr:{xs:2.5,md:1},flexDirection:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"}},children:[e.jsxs(V,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx($,{htmlFor:"filter-role-select",children:"Role"}),e.jsx(Q,{multiple:!0,value:r.role,onChange:l,input:e.jsx(W,{label:"Role"}),renderValue:o=>o.map(p=>p).join(", "),inputProps:{id:"filter-role-select"},MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:a.roles.map(o=>e.jsxs(b,{value:o,children:[e.jsx(I,{disableRipple:!0,size:"small",checked:r.role.includes(o)}),o]},o))})]}),e.jsxs(f,{sx:{gap:2,width:1,flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(G,{fullWidth:!0,value:r.name,onChange:h,placeholder:"Search...",slotProps:{input:{startAdornment:e.jsx(K,{position:"start",children:e.jsx(x,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}}),e.jsx(w,{onClick:c.onOpen,children:e.jsx(x,{icon:"eva:more-vertical-fill"})})]})]}),d()]})}function ke({filters:s,onResetPage:a,totalResults:i,sx:c}){const{state:r,setState:t,resetState:h}=s,l=m.useCallback(()=>{a(),t({name:""})},[a,t]),d=m.useCallback(()=>{a(),t({status:"todos"})},[a,t]),o=m.useCallback(j=>{const v=r.role.filter(S=>S!==j);a(),t({role:v})},[a,t,r.role]),p=m.useCallback(()=>{a(),h()},[a,h]);return e.jsxs(Ce,{totalResults:i,onReset:p,sx:c,children:[e.jsx(T,{label:"Status:",isShow:r.status!=="todos",children:e.jsx(k,{...P,label:r.status,onDelete:d,sx:{textTransform:"capitalize"}})}),e.jsx(T,{label:"Role:",isShow:!!r.role.length,children:r.role.map(j=>m.createElement(k,{...P,key:j,label:j,onDelete:()=>o(j)}))}),e.jsx(T,{label:"Keyword:",isShow:!!r.name,children:e.jsx(k,{...P,label:r.name,onDelete:l})})]})}const Te=[{value:"all",label:"All"},...ee],Pe=[{id:"name",label:"Name"},{id:"phoneNumber",label:"Phone number",width:180},{id:"company",label:"Company",width:220},{id:"role",label:"Role",width:180},{id:"status",label:"Status",width:100},{id:"",width:88}];function Re(){const s=ie(),a=R(),[i,c]=m.useState(Y),r=q({name:"",role:[],status:"all"}),{state:t,setState:h}=r,l=Fe({inputData:i,comparator:ce(s.order,s.orderBy),filters:t}),d=de(l,s.page,s.rowsPerPage),o=!!t.name||t.role.length>0||t.status!=="all",p=!l.length&&o||!l.length,j=m.useCallback(n=>{const u=i.filter(_=>_.id!==n);D.success("Delete success!"),c(u),s.onUpdatePageDeleteRow(d.length)},[d.length,s,i]),v=m.useCallback(()=>{const n=i.filter(u=>!s.selected.includes(u.id));D.success("Delete success!"),c(n),s.onUpdatePageDeleteRows(d.length,l.length)},[l.length,d.length,s,i]),S=m.useCallback((n,u)=>{s.onResetPage(),h({status:u})},[h,s]),O=()=>e.jsx(N,{open:a.value,onClose:a.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",s.selected.length," "]})," items?"]}),action:e.jsx(y,{variant:"contained",color:"error",onClick:()=>{v(),a.onFalse()},children:"Delete"})});return e.jsxs(e.Fragment,{children:[e.jsxs(X,{children:[e.jsx(J,{heading:"List",links:[{name:"Dashboard",href:C.dashboard.root},{name:"User",href:C.dashboard.user.root},{name:"List"}],action:e.jsx(y,{component:F,href:C.dashboard.user.new,variant:"contained",startIcon:e.jsx(x,{icon:"mingcute:add-line"}),children:"New user"}),sx:{mb:{xs:3,md:5}}}),e.jsxs(we,{children:[e.jsx(Z,{value:t.status,onChange:S,sx:[n=>({px:2.5,boxShadow:`inset 0 -2px 0 0 ${se(n.vars.palette.grey["500Channel"],.08)}`})],children:Te.map(n=>e.jsx(le,{iconPosition:"end",value:n.value,label:n.label,icon:e.jsx(E,{variant:(n.value==="all"||n.value===t.status)&&"filled"||"soft",color:n.value==="active"&&"success"||n.value==="pending"&&"warning"||n.value==="banned"&&"error"||"default",children:["active","pending","banned","rejected"].includes(n.value)?i.filter(u=>u.status===n.value).length:i.length})},n.value))}),e.jsx(Se,{filters:r,onResetPage:s.onResetPage,options:{roles:te}}),o&&e.jsx(ke,{filters:r,totalResults:l.length,onResetPage:s.onResetPage,sx:{p:2.5,pt:0}}),e.jsxs(f,{sx:{position:"relative"},children:[e.jsx(pe,{dense:s.dense,numSelected:s.selected.length,rowCount:l.length,onSelectAllRows:n=>s.onSelectAllRows(n,l.map(u=>u.id)),action:e.jsx(U,{title:"Delete",children:e.jsx(w,{color:"primary",onClick:a.onTrue,children:e.jsx(x,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(ne,{children:e.jsxs(be,{size:s.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(me,{order:s.order,orderBy:s.orderBy,headCells:Pe,rowCount:l.length,numSelected:s.selected.length,onSort:s.onSort,onSelectAllRows:n=>s.onSelectAllRows(n,l.map(u=>u.id))}),e.jsxs(fe,{children:[l.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map(n=>e.jsx(ve,{row:n,selected:s.selected.includes(n.id),onSelectRow:()=>s.onSelectRow(n.id),onDeleteRow:()=>j(n.id),editHref:C.dashboard.user.edit(n.id)},n.id)),e.jsx(xe,{height:s.dense?56:76,emptyRows:he(s.page,s.rowsPerPage,l.length)}),e.jsx(ue,{notFound:p})]})]})})]}),e.jsx(je,{page:s.page,dense:s.dense,count:l.length,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onChangeDense:s.onChangeDense,onRowsPerPageChange:s.onChangeRowsPerPage})]})]}),O()]})}function Fe({inputData:s,comparator:a,filters:i}){const{name:c,status:r,role:t}=i,h=s.map((l,d)=>[l,d]);return h.sort((l,d)=>{const o=a(l[0],d[0]);return o!==0?o:l[1]-d[1]}),s=h.map(l=>l[0]),c&&(s=s.filter(l=>l.name.toLowerCase().includes(c.toLowerCase()))),r!=="all"&&(s=s.filter(l=>l.status===r)),t.length&&(s=s.filter(l=>t.includes(l.role))),s}const ye={title:`Lista de | Dashboard - ${ae.appName}`};function Ge(){return e.jsxs(e.Fragment,{children:[e.jsx(oe,{children:e.jsxs("title",{children:[" ",ye.title]})}),e.jsx(Re,{})]})}export{Ge as default};
