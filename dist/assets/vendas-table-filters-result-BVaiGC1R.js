import{j as e,B as y,S as T,I as d,dV as F,U,T as g,bf as $,a$ as L,V as w,b0 as M,r as c,A as K,aJ as k,L as q,R as S,df as I,aK as A,aP as P,a1 as z,b1 as B,b2 as O,b3 as m,D as R,aS as G,aT as J,aU as X,aV as Y,f as W,dW as _,dX as H,dU as Q,br as Z,dY as ee,dL as E,c5 as V,bh as se,au as ae,a0 as te,bc as v,dM as re}from"./index-cNRh_qft.js";import{T as ne}from"./TableHead-DBnjkyMB.js";import{T as p}from"./TableCell-CGwO8Re3.js";import{F as le,a as C,c as D}from"./filters-result-BTXXEhsP.js";function xe({title:r,total:u,icon:l,color:n,percent:a,price:s}){return e.jsxs(y,{sx:{width:1,gap:2.5,minWidth:200,display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsxs(T,{alignItems:"center",justifyContent:"center",sx:{position:"relative"},children:[e.jsx(d,{icon:l,width:32,sx:{color:n,position:"absolute"}}),e.jsx(F,{size:56,thickness:2,value:a,variant:"determinate",sx:{color:n,opacity:.48}}),e.jsx(F,{size:56,value:100,thickness:3,variant:"determinate",sx:[o=>({top:0,left:0,opacity:.48,position:"absolute",color:U(o.vars.palette.grey["500Channel"],.16)})]})]}),e.jsxs(T,{spacing:.5,children:[e.jsx(g,{variant:"subtitle1",children:r}),e.jsxs(y,{component:"span",sx:{color:"text.disabled",typography:"body2"},children:[$(u)," vendas"]}),e.jsx(g,{variant:"subtitle2",children:L(s)})]})]})}function he({row:r,editHref:u,onDeleteRow:l,detailsHref:n}){var x;const a=w(),s=M(),[o,h]=c.useState(!1),j=N=>{N.target.closest("button, a")||a.push(n)},b=()=>e.jsx(B,{open:s.open,anchorEl:s.anchorEl,onClose:s.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(O,{children:[e.jsx("li",{children:e.jsxs(m,{component:S,href:n,onClick:s.onClose,children:[e.jsx(d,{icon:"solar:eye-bold"}),"Ver"]})}),e.jsx(R,{sx:{borderStyle:"dashed"}}),e.jsxs(m,{onClick:()=>{h(!0),s.onClose()},sx:{color:"error.main"},children:[e.jsx(d,{icon:"solar:trash-bin-trash-bold"}),"Desistiu"]})]})}),f=()=>{h(!1),l()},i=()=>{h(!1)},t=()=>e.jsxs(G,{open:o,onClose:i,maxWidth:"sm",fullWidth:!0,children:[e.jsx(J,{children:"Confirmar Desistência"}),e.jsxs(X,{children:[e.jsx(g,{variant:"body1",sx:{mb:2},children:"Tem certeza que deseja marcar este atendimento como desistente?"}),e.jsxs(g,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Atenção:"}),' Esta ação não poderá ser desfeita. O atendimento passará para o status "Cancelado" e não será mais possível alterar o status.']})]}),e.jsxs(Y,{children:[e.jsx(W,{onClick:i,color:"inherit",children:"Cancelar"}),e.jsx(W,{onClick:f,color:"error",variant:"contained",children:"Confirmar Desistência"})]})]});return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{hover:!0,onClick:j,sx:{cursor:"pointer"},children:[e.jsx(p,{children:e.jsxs(y,{sx:{gap:2,display:"flex",alignItems:"center"},children:[e.jsx(K,{alt:r.invoiceTo.name,children:r.invoiceTo.name.charAt(0).toUpperCase()}),e.jsx(k,{primary:r.invoiceTo.name,secondary:e.jsx(q,{component:S,href:n,color:"inherit",children:r.invoiceNumber}),slotProps:{primary:{noWrap:!0,sx:{typography:"body2"}},secondary:{sx:{color:"text.disabled","&:hover":{color:"text.secondary"}}}}})]})}),e.jsx(p,{children:e.jsx(k,{primary:A(r.createDate),secondary:I(r.createDate),slotProps:{primary:{noWrap:!0,sx:{typography:"body2"}},secondary:{sx:{mt:.5,typography:"caption"}}}})}),e.jsx(p,{children:e.jsx(k,{primary:A(r.dueDate),secondary:I(r.dueDate),slotProps:{primary:{noWrap:!0,sx:{typography:"body2"}},secondary:{sx:{mt:.5,typography:"caption"}}}})}),e.jsx(p,{children:L(r.totalAmount)}),e.jsx(p,{align:"center",children:((x=r.formData)==null?void 0:x.propertyName)||"-"}),e.jsx(p,{children:e.jsx(P,{variant:"soft",color:r.status==="atendimento"&&"warning"||r.status==="visita"&&"info"||r.status==="interesse"&&"primary"||r.status==="proposta"&&"secondary"||r.status==="assinatura_pagamento"&&"success"||"default",children:r.status})}),e.jsx(p,{align:"right",sx:{px:1},children:e.jsx(z,{color:s.open?"inherit":"default",onClick:s.onOpen,children:e.jsx(d,{icon:"eva:more-vertical-fill"})})})]}),b(),t()]})}function pe({filters:r,options:u,dateError:l,onResetPage:n}){const a=M(),{state:s,setState:o}=r,h=c.useCallback(t=>{n(),o({name:t.target.value})},[n,o]),j=c.useCallback(t=>{const x=typeof t.target.value=="string"?t.target.value.split(","):t.target.value;n(),o({service:x})},[n,o]),b=c.useCallback(t=>{n(),o({startDate:t?t.toDate():null})},[n,o]),f=c.useCallback(t=>{n(),o({endDate:t?t.toDate():null})},[n,o]),i=()=>e.jsx(B,{open:a.open,anchorEl:a.anchorEl,onClose:a.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(O,{children:[e.jsxs(m,{onClick:()=>a.onClose(),children:[e.jsx(d,{icon:"solar:printer-minimalistic-bold"}),"Imprimir"]}),e.jsxs(m,{onClick:()=>a.onClose(),children:[e.jsx(d,{icon:"solar:import-bold"}),"Importar"]}),e.jsxs(m,{onClick:()=>a.onClose(),children:[e.jsx(d,{icon:"solar:export-bold"}),"Exportar"]})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(y,{sx:{p:2.5,gap:2,display:"flex",pr:{xs:2.5,md:1},flexDirection:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"}},children:[e.jsxs(_,{sx:{flexShrink:0,width:{xs:1,md:180}},children:[e.jsx(H,{htmlFor:"filter-service-select",children:"Filtrar por"}),e.jsx(Q,{multiple:!0,value:s.service,onChange:j,input:e.jsx(ee,{label:"Filtrar por"}),renderValue:t=>t.map(x=>x).join(", "),inputProps:{id:"filter-service-select"},sx:{textTransform:"capitalize"},children:u.services.map(t=>e.jsxs(m,{value:t,children:[e.jsx(Z,{disableRipple:!0,size:"small",checked:s.service.includes(t),inputProps:{id:`${t}-checkbox`,"aria-label":`${t} checkbox`}}),t]},t))})]}),e.jsx(E,{label:"Data inicial",value:s.startDate?V(s.startDate):null,onChange:b,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:180}}}),e.jsx(E,{label:"Data final",value:s.endDate?V(s.endDate):null,onChange:f,slotProps:{textField:{fullWidth:!0,error:l,helperText:l?"End date must be later than start date":null}},sx:{maxWidth:{md:180},[`& .${se.root}`]:{bottom:{md:-40},position:{md:"absolute"}}}}),e.jsxs(y,{sx:{gap:2,width:1,flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(ae,{fullWidth:!0,value:s.name,onChange:h,placeholder:"Pesquisar número ou nome do cliente",slotProps:{input:{startAdornment:e.jsx(te,{position:"start",children:e.jsx(d,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}}),e.jsx(z,{onClick:a.onOpen,children:e.jsx(d,{icon:"eva:more-vertical-fill"})})]})]}),i()]})}function ue({filters:r,totalResults:u,onResetPage:l,sx:n}){const{state:a,setState:s,resetState:o}=r,h=c.useCallback(()=>{l(),s({name:""})},[l,s]),j=c.useCallback(i=>{const t=a.service.filter(x=>x!==i);l(),s({service:t})},[l,s,a.service]),b=c.useCallback(()=>{l(),s({status:"all"})},[l,s]),f=c.useCallback(()=>{l(),s({startDate:null,endDate:null})},[l,s]);return e.jsxs(le,{totalResults:u,onReset:()=>o(),sx:n,children:[e.jsx(C,{label:"Service:",isShow:!!a.service.length,children:a.service.map(i=>c.createElement(v,{...D,key:i,label:i,onDelete:()=>j(i)}))}),e.jsx(C,{label:"Status:",isShow:a.status!=="all",children:e.jsx(v,{...D,label:a.status,onDelete:b,sx:{textTransform:"capitalize"}})}),e.jsx(C,{label:"Date:",isShow:!!(a.startDate&&a.endDate),children:e.jsx(v,{...D,label:re(a.startDate,a.endDate),onDelete:f})}),e.jsx(C,{label:"Keyword:",isShow:!!a.name,children:e.jsx(v,{...D,label:a.name,onDelete:h})})]})}export{xe as V,pe as a,ue as b,he as c};
