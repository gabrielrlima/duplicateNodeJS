import{j as e,B as l,T as B,L as S,R as L,I as C,y as I,E as _,F,p as E,z as D,K as m,N as V,O as N,Q as p,V as O,W as $,X as M,C as G,Y as z,r as j,Z as J,$ as Y,a0 as k,a1 as T,a2 as K,a3 as X,a4 as Z,a5 as ee,a6 as re,a7 as se}from"./index-D82XrlGq.js";import{s as ae}from"./schema-helper-BcHhi0sG.js";function R({sx:r,icon:s,title:i,description:a,...o}){return e.jsxs(e.Fragment,{children:[s&&e.jsx(l,{component:"span",sx:{mb:3,mx:"auto",display:"inline-flex"},children:s}),e.jsxs(l,{sx:[()=>({mb:5,gap:1.5,display:"flex",textAlign:"center",whiteSpace:"pre-line",flexDirection:"column"}),...Array.isArray(r)?r:[r]],...o,children:[e.jsx(B,{variant:"h5",children:i}),a&&e.jsx(B,{variant:"body2",sx:{color:"text.primary"},children:a})]})]})}function oe({value:r,disabled:s,onResendCode:i,sx:a,...o}){return e.jsxs(l,{sx:[()=>({mt:3,typography:"body2",alignSelf:"center"}),...Array.isArray(a)?a:[a]],...o,children:["Não recebeu o código? ",e.jsxs(S,{variant:"subtitle2",onClick:i,sx:{cursor:"pointer",...s&&{color:"text.disabled",pointerEvents:"none"}},children:["Reenviar ",s&&r&&r>0&&`(${r}s)`]})]})}function q({sx:r,href:s,label:i,icon:a,children:o,...t}){return e.jsxs(S,{component:L,href:s,variant:"subtitle2",sx:[{mt:3,gap:.5,mx:"auto",alignItems:"center",display:"inline-flex",color:"primary.main",textDecoration:"underline","&:hover":{color:"primary.dark",textDecoration:"underline"}},...Array.isArray(r)?r:[r]],...t,children:[a||e.jsx(C,{width:16,icon:"eva:arrow-ios-back-fill"}),i||"Voltar ao início",o]})}const ne=N({code:p().min(1,{message:"O código é obrigatório!"}).min(6,{message:"O código deve ter 6 caracteres."}),email:p().min(1,{message:"Email é obrigatório!"}).email({message:"Email deve ser válido!"})});function pe(){const r={code:"",email:""},s=I({resolver:D(ne),defaultValues:r}),{handleSubmit:i,formState:{isSubmitting:a}}=s,o=i(async u=>{try{await new Promise(d=>setTimeout(d,500)),console.info("DATA",u)}catch(d){console.error(d)}}),t=()=>e.jsxs(l,{sx:{gap:3,display:"flex",flexDirection:"column"},children:[e.jsx(m.Text,{name:"email",label:"Email",placeholder:"example@gmail.com",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(m.Code,{name:"code"}),e.jsx(V,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:a,loadingIndicator:"Confirmando...",children:"Confirmar código"})]});return e.jsxs(e.Fragment,{children:[e.jsx(R,{icon:e.jsx(_,{}),title:"Por favor, verifique seu email",description:`Enviamos um código de verificação de 6 dígitos para o email ${r.email}. 
Insira-o no campo abaixo para confirmar sua conta.`}),e.jsx(F,{methods:s,onSubmit:o,children:t()}),e.jsx(oe,{onResendCode:()=>{},value:0,disabled:!1}),e.jsx(q,{href:E.auth.signIn})]})}const ie=N({email:p().min(1,{message:"Email é obrigatório!"}).email({message:"Email deve ser um endereço válido!"}),password:p().min(1,{message:"Senha é obrigatória!"}).min(6,{message:"Senha deve ter pelo menos 6 caracteres!"})});function he(){const r=O(),{checkUserSession:s}=$(),a=M().get("returnTo")||G.auth.redirectPath,o=z(),[t,u]=j.useState(""),[d,g]=j.useState(!1),f={email:"",password:""},b=I({resolver:D(ie),defaultValues:f}),{handleSubmit:y,formState:{isSubmitting:c}}=b;j.useEffect(()=>{if(t){g(!0);const n=setTimeout(()=>{g(!1),u("")},5e3);return()=>clearTimeout(n)}},[t]);const P=y(async n=>{try{u(""),g(!1),await J({email:n.email,password:n.password}),s&&await s(),r.push(a)}catch(h){console.error("Erro no login:",h);let x="Erro interno do servidor. Tente novamente.";h.message==="Email ainda não verificado."?x="Email ainda não verificado. Verifique sua caixa de entrada.":h.message==="Credenciais inválidas."?x="Email ou senha incorretos. Verifique suas credenciais.":h.message&&(x=h.message),setTimeout(()=>{u(x)},300)}}),w=()=>e.jsxs(l,{sx:{gap:3,display:"flex",flexDirection:"column"},children:[e.jsx(m.Text,{name:"email",label:"Email",placeholder:"Digite seu email",slotProps:{inputLabel:{shrink:!0}}}),e.jsxs(l,{sx:{gap:1.5,display:"flex",flexDirection:"column"},children:[e.jsx(S,{component:L,href:E.auth.resetPassword,variant:"body2",sx:{alignSelf:"flex-end",color:n=>n.palette.mode==="dark"?"#ffffff":"primary.main",textDecoration:"underline","&:hover":{color:n=>n.palette.mode==="dark"?"#e0e0e0":"primary.dark",textDecoration:"underline"}},children:"Esqueceu sua senha?"}),e.jsx(m.Text,{name:"password",label:"Senha",placeholder:"Digite sua senha",type:o.value?"text":"password",slotProps:{inputLabel:{shrink:!0},input:{endAdornment:e.jsx(k,{position:"end",children:e.jsx(T,{onClick:o.onToggle,edge:"end",children:e.jsx(C,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}})]}),d&&t&&e.jsx(l,{sx:{color:"error.main",textAlign:"center",mt:1,mb:1,p:2,bgcolor:"error.lighter",borderRadius:1,typography:"body2",animation:"fadeIn 0.3s ease-in","@keyframes fadeIn":{from:{opacity:0,transform:"translateY(-10px)"},to:{opacity:1,transform:"translateY(0)"}}},children:t}),e.jsx(V,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:c,loadingIndicator:"Entrando...",children:"Entrar"})]});return e.jsxs(e.Fragment,{children:[e.jsx(Y,{sx:{mb:3,mx:"auto"}}),e.jsx(R,{title:"Entre na sua conta",description:e.jsxs(e.Fragment,{children:["Não possui uma conta? ",e.jsx(S,{component:L,href:E.auth.signUp,variant:"subtitle2",sx:{color:n=>n.palette.mode==="dark"?"#ffffff":"primary.main",fontWeight:600,textDecoration:"underline","&:hover":{color:n=>n.palette.mode==="dark"?"#e0e0e0":"primary.dark",textDecoration:"underline"}},children:"Cadastre-se"})]})}),e.jsx(F,{methods:b,onSubmit:P,children:w()})]})}function te({sx:r,...s}){return e.jsxs(l,{component:"span",sx:[()=>({mt:3,display:"block",textAlign:"center",typography:"caption",color:"text.secondary"}),...Array.isArray(r)?r:[r]],...s,children:["Ao me inscrever, concordo com os ",e.jsx(S,{underline:"always",color:"text.primary",children:"termos de uso"})," e a ",e.jsx(S,{underline:"always",color:"text.primary",children:"política de privacidade"}),"."]})}const le=N({firstName:p().min(1,{message:"Nome é obrigatório!"}),lastName:p().min(1,{message:"Sobrenome é obrigatório!"}),email:p().min(1,{message:"Email é obrigatório!"}).email({message:"Email deve ser um endereço válido!"}),phone:ae.phoneNumber({isValid:X,message:{required:"Telefone é obrigatório!",invalid_type:"Formato de telefone inválido!"}}),password:p().min(1,{message:"Senha é obrigatória!"}).min(6,{message:"Senha deve ter pelo menos 6 caracteres!"}),confirmPassword:p().min(1,{message:"Confirmação de senha é obrigatória!"})}).refine(r=>r.password===r.confirmPassword,{message:"As senhas não coincidem",path:["confirmPassword"]});function xe(){const r=O(),{checkUserSession:s}=$(),i=z(),a=z(),[o,t]=j.useState(""),u={firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""},d=I({resolver:D(le),defaultValues:u}),{handleSubmit:g,formState:{isSubmitting:f}}=d,b=g(async c=>{var P,w,n;try{t(""),await K({name:c.firstName,lastName:c.lastName,email:c.email,phone:c.phone,password:c.password,passwordConfirmation:c.confirmPassword,role:"admin"}),s&&await s(),r.push(E.dashboard.root)}catch(h){console.error(h);let x="Erro ao criar conta";if(((P=h.response)==null?void 0:P.status)===422){const A=((n=(w=h.response)==null?void 0:w.data)==null?void 0:n.errors)||{};if(A.email){const U=Array.isArray(A.email)?A.email:[A.email];U.some(v=>v.toLowerCase().includes("já")||v.toLowerCase().includes("already")||v.toLowerCase().includes("exists")||v.toLowerCase().includes("taken"))?x="Este email já está cadastrado. Tente fazer login ou use outro email.":x=U.join(", ")}else x=Object.entries(A).map(([v,W])=>{const H={name:"Nome",last_name:"Sobrenome",email:"Email",phone:"Telefone",password:"Senha"}[v]||v,Q=Array.isArray(W)?W:[W];return`${H}: ${Q.join(", ")}`}).join(`
`)||"Erro de validação. Verifique os dados informados."}else h.message&&(x=h.message);t(x)}}),y=()=>e.jsxs(l,{sx:{gap:3,display:"flex",flexDirection:"column"},children:[e.jsx(m.Text,{name:"firstName",label:"Nome",placeholder:"Seu nome"}),e.jsx(m.Text,{name:"lastName",label:"Sobrenome",placeholder:"Seu sobrenome"}),e.jsx(m.Text,{name:"email",label:"Seu e-mail",placeholder:"Seu e-mail"}),e.jsx(m.Phone,{name:"phone",label:"Telefone",country:"BR",placeholder:"Celular"}),e.jsx(m.Text,{name:"password",label:"Crie uma senha",placeholder:"Senha",type:i.value?"text":"password",slotProps:{input:{endAdornment:e.jsx(k,{position:"end",children:e.jsx(T,{onClick:i.onToggle,edge:"end",children:e.jsx(C,{icon:i.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}}),e.jsx(m.Text,{name:"confirmPassword",label:"Confirme a senha",placeholder:"Reescreva a senha",type:a.value?"text":"password",slotProps:{input:{endAdornment:e.jsx(k,{position:"end",children:e.jsx(T,{onClick:a.onToggle,edge:"end",children:e.jsx(C,{icon:a.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}}),o&&e.jsx(l,{sx:{color:"error.main",textAlign:"center",mt:1,mb:1,p:2,bgcolor:"error.lighter",borderRadius:1,typography:"body2"},children:o}),e.jsx(V,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:f,loadingIndicator:"Criando conta...",children:"Criar conta"})]});return e.jsxs(e.Fragment,{children:[e.jsx(Y,{sx:{mb:3,mx:"auto"}}),e.jsx(R,{title:"Comece totalmente grátis",description:e.jsxs(e.Fragment,{children:["Já possui uma conta? ",e.jsx(S,{component:L,href:E.auth.signIn,variant:"subtitle2",sx:{color:c=>c.palette.mode==="dark"?"#ffffff":"primary.main",fontWeight:600,textDecoration:"underline","&:hover":{color:c=>c.palette.mode==="dark"?"#e0e0e0":"primary.dark",textDecoration:"underline"}},children:"Entrar"})]})}),e.jsx(F,{methods:d,onSubmit:b,children:y()}),e.jsx(te,{})]})}const ce=N({email:p().min(1,{message:"Email é obrigatório!"}).email({message:"Email deve ser um endereço válido!"})});function ge(){const[r,s]=j.useState(!1),[i,a]=j.useState(""),o={email:""},t=I({resolver:D(ce),defaultValues:o}),{handleSubmit:u,formState:{isSubmitting:d}}=t,g=u(async b=>{try{a(""),await Z(b.email),s(!0)}catch(y){console.error(y),a(y.message||"Erro ao solicitar redefinição de senha.")}}),f=()=>e.jsxs(l,{sx:{gap:3,display:"flex",flexDirection:"column"},children:[e.jsx(m.Text,{name:"email",label:"Email",placeholder:"example@gmail.com",autoFocus:!0,slotProps:{inputLabel:{shrink:!0}}}),i&&e.jsx(l,{sx:{color:"error.main",textAlign:"center",mt:1,mb:1,p:2,bgcolor:"error.lighter",borderRadius:1,typography:"body2"},children:i}),r&&e.jsx(l,{sx:{color:"success.main",textAlign:"center",mt:1,mb:1,p:2,bgcolor:"success.lighter",borderRadius:1,typography:"body2"},children:"Verifique seu email e siga as instruções para redefinir a senha."}),e.jsx(V,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:d,loadingIndicator:"Enviando solicitação...",children:"Enviar solicitação"})]});return e.jsxs(e.Fragment,{children:[e.jsx(R,{icon:e.jsx(ee,{}),title:"Esqueceu sua senha?",description:"Digite seu email e enviaremos um link para você redefinir sua senha."}),e.jsx(F,{methods:t,onSubmit:g,children:f()}),e.jsx(q,{href:E.auth.signIn})]})}const de=N({password:p().min(1,{message:"Senha é obrigatória!"}).min(6,{message:"Senha deve ter 6 caracteres."}),confirmPassword:p().min(1,{message:"Confirme a senha!"})}).refine(r=>r.password===r.confirmPassword,{message:"As senhas não coincidem",path:["confirmPassword"]});function fe(){const r=z(),s=M(),i=s.get("token")||"",a=s.get("email")||"",[o,t]=j.useState(!1),[u,d]=j.useState(""),g={password:"",confirmPassword:""},f=I({resolver:D(de),defaultValues:g}),{handleSubmit:b,formState:{isSubmitting:y}}=f,c=b(async w=>{try{d(""),await re({email:a,token:i,password:w.password,passwordConfirmation:w.confirmPassword}),t(!0)}catch(n){console.error(n),d(n.message||"Erro ao atualizar senha.")}}),P=()=>e.jsxs(l,{sx:{gap:3,display:"flex",flexDirection:"column"},children:[u&&e.jsx(l,{sx:{color:"error.main",textAlign:"center",mt:1,mb:1,p:2,bgcolor:"error.lighter",borderRadius:1,typography:"body2"},children:u}),o&&e.jsx(l,{sx:{color:"success.main",textAlign:"center",mt:1,mb:1,p:2,bgcolor:"success.lighter",borderRadius:1,typography:"body2"},children:"Senha atualizada com sucesso!"}),e.jsx(m.Text,{name:"password",label:"Senha",placeholder:"6+ caracteres",type:r.value?"text":"password",slotProps:{inputLabel:{shrink:!0},input:{endAdornment:e.jsx(k,{position:"end",children:e.jsx(T,{onClick:r.onToggle,edge:"end",children:e.jsx(C,{icon:r.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}}),e.jsx(m.Text,{name:"confirmPassword",label:"Confirme a senha",type:r.value?"text":"password",slotProps:{inputLabel:{shrink:!0},input:{endAdornment:e.jsx(k,{position:"end",children:e.jsx(T,{onClick:r.onToggle,edge:"end",children:e.jsx(C,{icon:r.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}}),e.jsx(V,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:y,loadingIndicator:"Atualizando...",children:"Atualizar senha"})]});return e.jsxs(e.Fragment,{children:[e.jsx(R,{icon:e.jsx(se,{}),title:"Atualize sua senha",description:"Defina uma nova senha para acessar sua conta."}),e.jsx(F,{methods:f,onSubmit:c,children:P()}),e.jsx(q,{href:E.auth.signIn})]})}export{he as C,xe as a,pe as b,ge as c,fe as d};
