<!DOCTYPE html>
<html>
<head>
    <title>Test Auth Status</title>
</head>
<body>
    <h1>Test Authentication Status</h1>
    <div id="results"></div>
    
    <script>
        // Verificar se h√° token no sessionStorage
        const token = sessionStorage.getItem('sanctum_access_token');
        const results = document.getElementById('results');
        
        if (token) {
            results.innerHTML += `<p>‚úÖ Token encontrado: ${token.substring(0, 20)}...</p>`;
            
            // Testar requisi√ß√£o autenticada
            fetch('http://localhost:5000/api/auth/me', {
                headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json'
                }
            })
            .then(response => {
                results.innerHTML += `<p>Status da requisi√ß√£o /auth/me: ${response.status}</p>`;
                return response.json();
            })
            .then(data => {
                results.innerHTML += `<p>Dados do usu√°rio: ${JSON.stringify(data, null, 2)}</p>`;
            })
            .catch(error => {
                results.innerHTML += `<p>‚ùå Erro na requisi√ß√£o: ${error.message}</p>`;
            });
            
        } else {
            results.innerHTML += '<p>‚ùå Nenhum token encontrado no sessionStorage</p>';
            results.innerHTML += '<p>Voc√™ precisa fazer login primeiro</p>';
        }
        
        // Verificar localStorage tamb√©m
        const localToken = localStorage.getItem('sanctum_access_token');
        if (localToken) {
            results.innerHTML += `<p>üì¶ Token no localStorage: ${localToken.substring(0, 20)}...</p>`;
        }
    </script>
</body>
</html>