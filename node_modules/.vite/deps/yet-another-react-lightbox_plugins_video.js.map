{
  "version": 3,
  "sources": ["../../.pnpm/yet-another-react-lightbox@3.25.0_@types+react-dom@18.3.7_@types+react@18.3.23__@types+_34ceeceb0aa817bcb830345a7e0cb667/node_modules/yet-another-react-lightbox/dist/plugins/video/index.js"],
  "sourcesContent": ["import * as React from 'react';\nimport { useLightboxProps, useEvents, useContainerRect, useDocumentContext, useEventCallback, reflow, clsx, cssClass } from '../../index.js';\nimport { ACTIVE_SLIDE_LOADING, CLASS_FLEX_CENTER, CLASS_SLIDE_WRAPPER, ACTIVE_SLIDE_COMPLETE, ACTIVE_SLIDE_PLAYING } from '../../types.js';\n\nconst defaultVideoProps = {\n    controls: true,\n    playsInline: true,\n};\nconst resolveVideoProps = (video) => ({\n    ...defaultVideoProps,\n    ...video,\n});\nfunction useVideoProps() {\n    const { video } = useLightboxProps();\n    return resolveVideoProps(video);\n}\n\nfunction isChromium() {\n    var _a;\n    return (((_a = navigator.userAgentData) === null || _a === void 0 ? void 0 : _a.brands.some(({ brand }) => brand === \"Chromium\")) || !!window.chrome);\n}\nfunction isWebKit() {\n    return /^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent);\n}\n\nfunction VideoSlide({ slide, offset }) {\n    const video = useVideoProps();\n    const { publish } = useEvents();\n    const { setContainerRef, containerRect, containerRef } = useContainerRect();\n    const { getOwnerDocument } = useDocumentContext();\n    const { animation } = useLightboxProps();\n    const videoRef = React.useRef(null);\n    const freezeNavigation = React.useRef(false);\n    React.useEffect(() => {\n        if (offset !== 0 && videoRef.current && !videoRef.current.paused) {\n            videoRef.current.pause();\n        }\n    }, [offset]);\n    React.useEffect(() => {\n        if (offset === 0 && videoRef.current && (slide.autoPlay || video.autoPlay)) {\n            publish(ACTIVE_SLIDE_LOADING);\n            videoRef.current.play().catch(() => { });\n        }\n    }, [offset, video.autoPlay, slide.autoPlay, publish]);\n    const fixupPlayerControls = useEventCallback(() => {\n        const timeoutId = setTimeout(() => {\n            if (containerRef.current) {\n                const borderStyle = containerRef.current.style.border;\n                containerRef.current.style.border = \"1px solid transparent\";\n                reflow(containerRef.current);\n                containerRef.current.style.border = borderStyle;\n            }\n        }, Math.max(animation.swipe, animation.navigation || 0) + 50);\n        return () => clearTimeout(timeoutId);\n    });\n    React.useEffect(() => {\n        if (isChromium() && offset === 0) {\n            return fixupPlayerControls();\n        }\n    }, [offset, fixupPlayerControls]);\n    const handleVideoRef = useEventCallback((node) => {\n        if (offset === 0 && (video.autoPlay || slide.autoPlay) && node.paused) {\n            node.play().catch(() => { });\n        }\n    });\n    const setVideoRef = React.useCallback((node) => {\n        videoRef.current = node;\n        if (node) {\n            handleVideoRef(node);\n        }\n    }, [handleVideoRef]);\n    React.useEffect(() => {\n        if (offset === 0) {\n            let fullscreen = false;\n            const onFullscreenChange = () => {\n                fullscreen = getOwnerDocument().fullscreenElement === videoRef.current;\n                freezeNavigation.current = fullscreen;\n            };\n            getOwnerDocument().addEventListener(\"fullscreenchange\", onFullscreenChange);\n            return () => {\n                getOwnerDocument().removeEventListener(\"fullscreenchange\", onFullscreenChange);\n                if (fullscreen) {\n                    freezeNavigation.current = false;\n                    getOwnerDocument()\n                        .exitFullscreen()\n                        .catch(() => { });\n                }\n            };\n        }\n    }, [offset, getOwnerDocument]);\n    React.useEffect(() => {\n        if (offset === 0) {\n            let pip = false;\n            const trackPiP = (pipValue) => (event) => {\n                if (event.target === videoRef.current) {\n                    pip = pipValue;\n                    freezeNavigation.current = pip;\n                }\n            };\n            const onEnterPiP = trackPiP(true);\n            const onLeavePiP = trackPiP(false);\n            getOwnerDocument().addEventListener(\"enterpictureinpicture\", onEnterPiP);\n            getOwnerDocument().addEventListener(\"leavepictureinpicture\", onLeavePiP);\n            return () => {\n                getOwnerDocument().removeEventListener(\"enterpictureinpicture\", onEnterPiP);\n                getOwnerDocument().removeEventListener(\"leavepictureinpicture\", onLeavePiP);\n                if (pip) {\n                    freezeNavigation.current = false;\n                    getOwnerDocument()\n                        .exitPictureInPicture()\n                        .catch(() => { });\n                }\n            };\n        }\n    }, [offset, getOwnerDocument]);\n    const { width, height, poster, sources } = slide;\n    const scaleWidthAndHeight = () => {\n        const scalingProps = {};\n        scalingProps.style = { maxWidth: \"100%\", maxHeight: \"100%\" };\n        if (width && height && containerRect) {\n            const widthBound = width / height > containerRect.width / containerRect.height;\n            const elementWidth = widthBound ? containerRect.width : Math.round((containerRect.height / height) * width);\n            const elementHeight = !widthBound ? containerRect.height : Math.round((containerRect.width / width) * height);\n            scalingProps.width = elementWidth;\n            scalingProps.height = elementHeight;\n            scalingProps.style.width = elementWidth;\n            scalingProps.style.height = elementHeight;\n        }\n        return scalingProps;\n    };\n    const resolveBoolean = (attr) => {\n        if (slide[attr] === false)\n            return null;\n        if (slide[attr] === true)\n            return { [attr]: true };\n        if (video[attr] === false)\n            return null;\n        if (video[attr] === true)\n            return { [attr]: true };\n        return null;\n    };\n    const resolveString = (attr) => {\n        if (video[attr] || slide[attr]) {\n            return { [attr]: slide[attr] || video[attr] };\n        }\n        return null;\n    };\n    const suppressWhenFrozen = (event) => {\n        if (freezeNavigation.current) {\n            event.stopPropagation();\n        }\n    };\n    return (React.createElement(React.Fragment, null, sources && (React.createElement(\"div\", { ref: setContainerRef, style: {\n            width: \"100%\",\n            height: \"100%\",\n            ...(width ? { maxWidth: `${width}px` } : null),\n        }, className: clsx(cssClass(\"video_container\"), cssClass(CLASS_FLEX_CENTER), cssClass(CLASS_SLIDE_WRAPPER)) }, containerRect && (React.createElement(\"video\", { ref: setVideoRef, poster: poster, ...scaleWidthAndHeight(), ...resolveBoolean(\"controls\"), ...resolveBoolean(\"playsInline\"), ...resolveBoolean(\"loop\"), ...resolveBoolean(\"muted\"), ...resolveBoolean(\"playsInline\"), ...resolveBoolean(\"disablePictureInPicture\"), ...resolveBoolean(\"disableRemotePlayback\"), ...resolveString(\"controlsList\"), ...resolveString(\"crossOrigin\"), ...resolveString(\"preload\"), onPlay: () => {\n            var _a;\n            if (offset !== 0) {\n                (_a = videoRef.current) === null || _a === void 0 ? void 0 : _a.pause();\n                return;\n            }\n            publish(ACTIVE_SLIDE_PLAYING);\n        }, onEnded: () => {\n            publish(ACTIVE_SLIDE_COMPLETE);\n        }, onWheel: suppressWhenFrozen, onKeyDown: suppressWhenFrozen, onPointerDown: (event) => {\n            suppressWhenFrozen(event);\n            if (isWebKit() &&\n                videoRef.current &&\n                videoRef.current.getBoundingClientRect().bottom - event.clientY < 40) {\n                event.stopPropagation();\n            }\n        } }, sources.map(({ src, type, media }) => (React.createElement(\"source\", { key: [src, type, media].filter(Boolean).join(\"|\"), src: src, type: type, media: media })))))))));\n}\n\nfunction isVideoSlide(slide) {\n    return slide.type === \"video\";\n}\nfunction Video({ augment }) {\n    augment(({ render: { slide: renderSlide, ...restRender }, video, ...restProps }) => ({\n        render: {\n            slide: ({ slide, offset, rect }) => {\n                var _a;\n                return isVideoSlide(slide) ? (React.createElement(VideoSlide, { key: (_a = slide.sources) === null || _a === void 0 ? void 0 : _a.map((source) => source.src).join(\"|\"), slide: slide, offset: offset })) : (renderSlide === null || renderSlide === void 0 ? void 0 : renderSlide({ slide, offset, rect }));\n            },\n            ...restRender,\n        },\n        video: resolveVideoProps(video),\n        ...restProps,\n    }));\n}\n\nexport { Video as default };\n"],
  "mappings": "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",
  "names": []
}
